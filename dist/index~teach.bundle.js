(window.webpackJsonp=window.webpackJsonp||[]).push([[343],{1126:function(e,t,o){"use strict";var r=o(1),n=o.n(r),a=o(433),c=o(482);function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){n()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var p={mixins:[a.a,c.a],props:{teachReportFunc:{type:Function}},mounted:function(){this.$props},methods:{isColorfulIcon:function(e){return"s1s-ask-entry"===e.id||1===e.iconType},getItemReportInfo:function(e){return console.warn("问一问红点","getItemReportInfo","hasRedDot=".concat(this.hasRedDot),"redDotId=".concat(e.redDotId),"redDotType=".concat(e.redDotType)),{requestId:this.$store.state.index.requestId,searchId:this.$store.state.index.data.searchID,itemInfo:[this.typePos,4,encodeURIComponent(e.hotword||e.title||""),this.hasRedDot&&e.redDotId||"",this.hasRedDot&&e.redDotType||"",this.hasRedDot&&(1===e.redDotType?"NEW":e.redDotNum||encodeURIComponent(e.desc||""))||""].join("|")}},getTeachReportId:function(e,t){return this.teachReportFunc?this.teachReportFunc(i(i({},e),{},{isDisplay:1,word:[e.title,e.desc,this.hasRedDot&&"•"].filter((function(e){return e})).join("_"),docType:"service_comment_entry"}),t):void 0},reportInfoFor26897:function(e){return i(i({},this.$props),{},{block:i(i({},this.$props),{},{title:e.hotword||e.title})})}}},d=(o(3668),o(4)),u=Object(d.a)(p,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",e._l(e.items,(function(t,r){return o("div",{directives:[{name:"active",rawName:"v-active"}],key:e.realType+"#"+r,staticClass:"index__good-thing-info box active__item",attrs:{"data-expose-id":e.realType+"#"+r+"##"+(t.id||""),"data-new-teach-report-id":e.getTeachReportId(t,r+1),"data-index-report-id":""+e.M_getItemReportId(t,r+1,e.reportInfoFor26897(t)),role:"button"},on:{click:function(o){return e.tapGoodThing(t,r+1)}}},[o("online-image",{staticClass:"icon",attrs:{url:t.iconUrl,"is-icon":!e.isColorfulIcon(t)}}),o("div",{staticClass:"info"},[o("div",{staticClass:"title"},[o("span",[e._v(e._s(t.hotword||t.title))]),t.redDotType?o("div",{directives:[{name:"show",rawName:"v-show",value:e.hasRedDot,expression:"hasRedDot"}],staticClass:"reddot",class:1===t.redDotType?"reddot_newtag":"reddot_normal"},[e._v(e._s(t.redDotNum||""))]):e._e()]),o("div",{staticClass:"desc"},[t.desc?o("span",{directives:[{name:"show",rawName:"v-show",value:e.hasRedDot||t.descStay,expression:"hasRedDot || item.descStay"}]},[e._v(e._s(t.desc))]):e._e(),t.redDotType?e._e():o("div",{directives:[{name:"show",rawName:"v-show",value:e.hasRedDot,expression:"hasRedDot"}],staticClass:"reddot reddot_normal"},[e._v(e._s(t.redDotNum||""))])])]),o("svg-icon",{staticClass:"box-arrow",attrs:{name:"arrow"}})],1)})),0)}),[],!1,null,"c5f4d6ec",null);t.a=u.exports},3668:function(e,t,o){"use strict";o(460)},433:function(e,t,o){"use strict";var r=o(1),n=o.n(r),a=o(33),c=o.n(a),s=o(23),i=o.n(s),p=o(0),d=o(2);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){n()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}t.a={mixins:[p.n],props:{type:{type:Number,default:0},realType:{type:Number,default:0},items:{type:Array,default:function(){return[]}},typePos:{type:Number,default:0}},data:function(){return{hasRedDot:!1,detectRedDotJob:null}},watch:{items:{handler:function(e){var t=this;e&&e[0]&&(console.warn("问一问红点","准备计算hasRedDot",this.hasRedDot),this.detectRedDotJob=this.detectRedDot(e[0]).then((function(e){t.hasRedDot=e,t.detectRedDotJob=null,console.warn("问一问红点","已计算hasRedDot",t.hasRedDot)})))},deep:!0,immediate:!0}},created:function(){p.a.$on(p.k.INDEX_COMP_EXPOSE,this.onExpose)},methods:{tapGoodThing:function(e,t){var o=this;return c()(i.a.mark((function r(){var n,a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=o,r.next=3,p.e.get({key:"goodTingRedDot"});case 3:a=!r.sent,"[object Array]"!==Object.prototype.toString.apply(a)&&(a=[]),setTimeout((function(){o.hasRedDot=!1}),500),e.redDotId&&(a.push(e.redDotId),p.e.set({key:"goodTingRedDot",value:a})),o.$route.name===d.f.INDEX&&(n.M_clickReport({businessType:n.type,docId:e.id,expand:"好物圈点击",recommendId:n.$store.state.index.data.searchID},e),p.f.teach.reportCommonNewClick(o.getItemReportInfo(e)),o.M_clickReportFor26897&&o.M_clickReportFor26897(e,t+1,{},o.reportInfoFor26897(e))),o.$emit("tap",h(h({},e),{},{docId:e.tabID||"好物圈",optype:e.optype||d.c.weapp,realType:n.realType,itemPos:t}),{recordToRecentUsedWeApp:!1,teachReportId:o.getTeachReportId&&o.getTeachReportId(e,t)});case 9:case"end":return r.stop()}}),r)})))()},detectRedDot:function(e){return c()(i.a.mark((function t(){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.redDotId){t.next=3;break}return console.warn("问一问红点","detectRedDot","没有红点id，return false"),t.abrupt("return",!1);case 3:return t.next=5,p.e.get({key:"goodTingRedDot"});case 5:if(o=t.sent,console.warn("问一问红点","detectRedDot","获取到本地缓存","(".concat(o,")")),o&&o.length){t.next=10;break}return console.warn("问一问红点","detectRedDot","缓存为空，return true"),t.abrupt("return",!0);case 10:if(-1===o.indexOf(e.redDotId)){t.next=13;break}return console.warn("问一问红点","detectRedDot","有缓存，但不含当前id（".concat(e.redDotId,"），return false")),t.abrupt("return",!1);case 13:return console.warn("问一问红点","detectRedDot","默认return true"),t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))()},onExpose:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$el.querySelectorAll(".index__good-thing-info").forEach(function(){var o=c()(i.a.mark((function o(r,n){var a,c;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=e.items[n],!t.includes(r.dataset.exposeId)||!a){o.next=10;break}if(!e.detectRedDotJob){o.next=7;break}return console.warn("问一问红点","onExpose","红点计算未完成，暂时挂起"),o.next=6,e.detectRedDotJob;case 6:console.warn("问一问红点","onExpose","红点计算完成，继续分析曝光");case 7:c=e.getItemReportInfo(a),console.warn("问一问红点","onExpose",c),p.f.teach.reportCommonNewExpose(c);case 10:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}}}},460:function(e,t,o){},461:function(e,t,o){},482:function(e,t,o){"use strict";var r=o(1),n=o.n(r),a=o(24),c=o.n(a),s=o(2),i=o(19),p=o(0),d=o(3);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){n()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var l={computed:{isCache:function(){var e;return(null===(e=this.$store.state.teach.teachData)||void 0===e?void 0:e.isCache)||!1}},methods:{M_genClickId:function(){var e,t,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.$route.name==s.f.SUG?null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t||null===(o=t.sug)||void 0===o?void 0:o.sugId:p.b.searchId;return[r.searchId||n,r.timestamp||+new Date,"".concat(Math.random()).substr(2,10)].join("-")},M_getItemReportId:function(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.M_getBlockType(o);return[this.M_getBlockReportId(o,n),this.M_getItemReportContent(e,t,n),this.M_getReportIdExposeInfo(r)].join("$$")},M_getBlockReportId:function(e,t){var o,r,n=e||this,a=n.targetPos||n.displayPos||n.typePos||0,c=n.name||(null===(o=n.block)||void 0===o?void 0:o.title)||(null===(r=n.data)||void 0===r?void 0:r.title)||"";return t==i.a.teachType.HISTORY_IN_SINGLE_PAGE?(a=a||1,c=c||"搜索历史"):this.M_getPageType()==i.a.pageType.SUGGESTION&&(c=c||"SUG"),"".concat(a,"|").concat(t,"|").concat(encodeURIComponent(c))},M_getReportIdExposeInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e)},M_getItemReportContent:function(e,t,o){if(!e)return"";var r=void 0!==e.isDisplay?e.isDisplay:1,n=e.reason||"",a=e.docPullType||e.source||"",c=t||0,d=t||0,u=encodeURIComponent(e.nickName||e.appname||e.hotword||e.word||""),h=this.M_getDocType(e,o),l=e.username||e.userName||e.jumpInfo&&e.jumpInfo.username||e.jumpInfo&&e.jumpInfo.userName||"",f=e.appuin,I=e.appid||e.jumpInfo&&e.jumpInfo.appid||"",m=e.id||"",y=e.docId||f||I||l||encodeURIComponent(m)||u||"";if(this.M_getPageType()==i.a.pageType.TEACH)switch(o){case i.a.teachType.HOTWORD:case i.a.teachType.HISTORY_SUBSCRIPTIONS:case i.a.teachType.HOTSEARCHVIEW_ENTRIES:case i.a.teachType.HISTORY:case i.a.teachType.RECOMMEND_BOX:y=encodeURIComponent(e.hotword||e.word||"");break;case i.a.teachType.MUSIC_LIST:y=encodeURIComponent("".concat(e.hotword||"").concat(e.desc?"(".concat(e.desc,")"):"")),u=""}else if(this.M_getPageType()==i.a.pageType.DISCOVER_S1S_INDEX)switch(o){case 21:y=encodeURIComponent(e.title)}else if(this.M_getPageType()==i.a.pageType.HISTORY)switch(o){case i.a.teachType.HISTORY_IN_SINGLE_PAGE:y=encodeURIComponent(e.hotword||e.word||"")}return p.b.scene!=s.e.HOME_TOP_ENTRY||o!=i.a.teachType.HISTORY_SUBSCRIPTIONS||a||(a=0),"".concat(c,"|").concat(d,"|").concat(y,"|").concat("","|").concat(r,"|").concat(u,"|").concat(n,"|").concat("","|").concat(h,"|").concat(a)},M_exposeReportFor26897:function(e){if(e.length&&!this.disable26897()){var t=this,o={};e.forEach((function(e){var t=e.split("$$"),r=c()(t,3),n=r[0],a=r[1],i=r[2],p=void 0===i?"{}":i,d={};try{d=JSON.parse(p)}catch(l){}if(n){var u=d.actionId||s.g.EXPOSE_DOC,h="".concat(n,"@").concat(u);o[h]=(o[h]||[]).concat([a])}})),d.a.$emit(d.b.TEACH_NEW_EXPOSE,{reportMap:o,isCache:t.isCache}),Object.keys(o).forEach((function(e){var r=e.split("@"),n=c()(r,2),a=n[0],i=n[1];p.f.teach.commonTeachReport({itemInfo:a,docInfo:Array.from(new Set(o[e])).join("#"),pageType:t.M_getPageType(),actionId:Number(i)||s.g.EXPOSE_DOC,isCache:t.isCache})}))}},M_pullReportFor26897:function(){var e=this.M_getPageType("");p.f.teach.commonTeachReport({itemInfo:"",docInfo:"",actionId:1001,pageType:e})},M_clickReportFor26897:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.disable26897(r&&r.pageName||"")){var n=this,a=n.M_getPageType(r&&r.pageName||""),i=o.actionId||this.M_getActionId(e,a),d=e.itemReportId||this.M_getItemReportId(e,t,r),u=d.split("$$"),l=c()(u,2),f=l[0],I=l[1],m=o.clickId||n.M_genClickId(o);n.$store.commit({type:"teach/updateState",clickReportId:m});var y=this.getJumpParamFor25661(e,i);i>=3001&&i<=3019&&p.f.reportJumpType(Object.assign({subType:null==f?void 0:f.split("|")[1],pageType:a,docId:null==I?void 0:I.split("|")[2],newSearchType:s.h.searchType.DOC_SEARCH},y)),p.f.teach.commonTeachReport(h(h({itemInfo:f,docInfo:I,actionId:i,pageType:a},o),{},{isCache:n.isCache,extInfo:encodeURIComponent(JSON.stringify({clickId:m}))}))}},M_getActionId:function(e,t){var o,r=(null==e?void 0:e.jumpType)||(null==e||null===(o=e.jumpInfo)||void 0===o?void 0:o.jumpType)||0;return r?3e3+parseInt(r):[i.a.pageType.SUGGESTION,i.a.pageType.HISTORY].includes(t)?[s.e.GLOBAL,s.e.KEYBOARD_HISTORY,s.e.GLOBAL_HISTORY,s.e.GLOBAL_RECOMMEND,s.e.GLOBAL_FESTIVAL,s.e.GLOBAL_HIS_S1S_ENTRY,s.e.FINGER,s.e.S1S].includes(p.b.scene)?s.g.ALL_SEARCH:s.g.VERTICAL:s.g.CLICK_COMMON},M_getDocType:function(e,t){var o,r=(o={},n()(o,s.h.jumpType.WE_APP,i.a.docItemType.WEAPP),n()(o,s.h.jumpType.BIZ,i.a.docItemType.BIZ),o),a=e.jumpType||e.jumpInfo&&e.jumpInfo.jumpType||0;return e.docType?e.docType:this.getDocTypeByBlockType(t)?this.getDocTypeByBlockType(t):this.M_getPageType()==i.a.pageType.DISCOVER_S1S_INDEX?"title":a?r[a]:this.M_getPageType()==i.a.pageType.SUGGESTION?i.a.docItemType.SUGGEST_WORD:"title"},getDocTypeByBlockType:function(e){switch(e){case i.a.teachType.HISTORY_IN_SINGLE_PAGE:return i.a.docItemType.HISTORY_WORD;case i.a.teachType.HOTWORD:case i.a.teachType.RECOMMEND_BOX:return i.a.docItemType.SUGGEST_WORD;case i.a.teachType.FINDER_HOT_LIST:return i.a.docItemType.FINDER_HOT_VIDEO;case i.a.teachType.PAGE_SETTING:return i.a.docItemType.SETTING;default:return""}},M_getBlockType:function(e){var t=e||this,o=t.block&&t.block.type||t.data&&t.data.type||0;return t.pageName!=s.f.HISTORY&&this.$route.name!=s.f.HISTORY||(o=i.a.teachType.HISTORY_IN_SINGLE_PAGE),o},M_getPageType:function(e){switch(e||this.$route.name){case s.f.HISTORY:return i.a.pageType.HISTORY;case s.f.SUG:return i.a.pageType.SUGGESTION;case s.f.INDEX:return i.a.pageType.DISCOVER_S1S_INDEX;default:return i.a.pageType.TEACH}},disable26897:function(e){return!1},getJumpParamFor25661:function(e,t){var o=e.jumpInfo||{},r=e.jumpType||o.jumpType||t-3e3,n=s.h.jumpType,a={};switch(r){case n.BIZ:a.bizUsername=o.userName||e.userName;break;case n.WE_APP:a.weappUsername=o.userName||o.username||e.userName||e.username,a.jumpPath=o.weappUrl||o.relativeURL||e.weappUrl||e.relativeURL;break;case n.H5:a.jumpUrl=o.jumpUrl||e.jumpUrl;break;case n.CALL_SPEC_API:a.apiName=o.api,a.apiParams=encodeURIComponent(o.apiParams)}var c=[n.VERTICAL,n.ALL_SEARCH];return h(h({},a),{},{jumpType:r,clickType:c.includes(r)?2:1,newSearchType:c.includes(r)?s.h.searchType.DOC_SEARCH:""})}}};t.a=l},667:function(e,t,o){"use strict";o(461)},736:function(e,t,o){"use strict";var r=o(0),n=o(2),a={props:["text","id","expired","relatedId"],data:function(){return{isShow:!1}},computed:{searchId:function(){switch(this.$route.name){case n.f.INDEX:return this.$store.state.index.recommendId;case n.f.TEACH:return this.$store.state.teach.recommendId;case n.f.SUG:return this.$store.state.sug.sugId;default:return r.b.searchId}}},watch:{id:function(){this.detect()},isShow:function(){this.isShow&&this.$emit("expose")}},mounted:function(){this.detect()},methods:{detect:function(){var e="".concat("reddot-badge","-").concat(this.id),t=r.d.getStore(e);if(t){var o=(new Date).getTime()-t.expose;this.isShow=!(this.expired&&o>1e3*this.expired)}else this.expired&&r.d.store(e,{expose:(new Date).getTime()}),this.isShow=!0;this.isShow&&r.f.reddotBadge.reportExpose({reddotId:this.id,reddotText:this.text,reddotExpired:this.expired,searchId:this.searchId,relatedId:this.relatedId})},hide:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){e.isShow=!1}),t.delay||0)}}},c=(o(667),o(4)),s=Object(c.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return this.isShow?t("div",{staticClass:"weui-badge reddot-badge",class:{"weui-badge_dot":!this.text},attrs:{"aria-hidden":"true"}},[this._v(this._s(this.text))]):this._e()}),[],!1,null,"4dfc11cc",null);t.a=s.exports}}]);