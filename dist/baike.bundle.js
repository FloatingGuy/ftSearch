(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{3609:function(t,e,o){"use strict";o(680)},3610:function(t,e,o){"use strict";o(682)},3611:function(t,e,o){"use strict";o.r(e);var n=o(1),s=o.n(n),i=o(0),a=o(8),r=o(17),c=o(2),d={props:[]},l=(o(3609),o(4));function h(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?h(Object(o),!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var p={components:{LoadingPots:Object(l.a)(d,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-pots"},[e("span",{staticClass:"pot"}),e("span",{staticClass:"pot"}),e("span",{staticClass:"pot"})])}],!1,null,"7a53180d",null).exports},data:function(){return{query:i.b.query,content:"",showContent:"",showMaxDuration:10,showMaxPerWords:1,startWordIndex:0,showEllipsis:!0,loading:!1,contentStyle:{},preContentHeight:0,requestId:i.g.generateGuuId()}},computed:{showContentHtml:function(){return(this.showContent||"").replace(/\n/g,"<br>")},s1sKeywordsDataForReport:function(){var t=(i.b.thirdExtParam||{}).s1sKeywordsData,e=void 0===t?{}:t,o=(e.enterId,e.s1sContextInfo),n=void 0===o?"{}":o,s=e.s1sStatInfo,a=void 0===s?"{}":s,r={},c={};try{r=JSON.parse(decodeURIComponent(n)),c=JSON.parse(decodeURIComponent(a)),delete r.mixerCommonContext}catch(d){}return u(u({},e),{},{s1sContextInfo:r,s1sStatInfo:c})},s1sStatInfoObj:function(){var t=(i.b.thirdExtParam||{}).s1sKeywordsData,e=(void 0===t?{}:t).s1sStatInfo,o=void 0===e?"{}":e,n={};try{n=JSON.parse(decodeURIComponent(o))}catch(s){}return n},s1sContextInfoObj:function(){var t=(i.b.thirdExtParam||{}).s1sKeywordsData,e=void 0===t?{}:t,o=(e.enterId,e.s1sContextInfo),n=void 0===o?"{}":o,s=(e.s1sStatInfo,{});try{s=JSON.parse(decodeURIComponent(n))}catch(a){}return s},enterId:function(){var t=(i.b.thirdExtParam||{}).s1sKeywordsData,e=(void 0===t?{}:t).enterId,o=void 0===e?0:e;return o}},mounted:function(){var t=this;this.initStyle(),a.b.onCommonCgiReady((function(t){console.warn("baike onCommonCgiReady",t)})),setTimeout((function(){t.getBaikeContent()}))},methods:{initStyle:function(){var t=document.querySelector(".baike-page__header"),e=document.querySelector(".baike-page__footer"),o=document.querySelector(".baike-page-wrap"),n=0,s=0;t&&(n=t.getBoundingClientRect().height);e&&(s=e.getBoundingClientRect().height);this.contentStyle.top="".concat(n,"px");var i=o.getBoundingClientRect().height;this.contentStyle.maxHeight="".concat(i-n-s,"px")},getBaikeContent:function(){var t=this;i.f.baike.commonReport({actionType:2002,msgType:"pro",requestId:this.requestId,extInfo:{s1s_keywords_data:this.s1sKeywordsDataForReport}}),this.loading=!0;var e=(i.b.thirdExtParam||{}).s1sKeywordsData,o=void 0===e?{}:e;a.a.getCommonCgiData({cgiName:r.a.getQxArticleGPTInfo,data:o.s1sContextInfo||""}).then((function(e){var o=e.data,n=void 0===o?{}:o;console.warn("getQxArticleGPTInfo",e),i.g.isObjectEmpty(n)||n&&(t.content=n.result,t.loading=!1,t.showBaikeAnimation(),i.f.baike.commonReport({actionType:3e3,msgType:"ans",requestId:t.requestId,content:n.result,extInfo:{s1s_keywords_data:t.s1sKeywordsDataForReport}}))})).catch((function(e){t.content="获取结果失败",t.loading=!1,t.showBaikeAnimation()}))},showBaikeAnimation:function(){var t=this,e=document.querySelector(".baike-page__content"),o=document.querySelector(".baike-page__content-inner");this.showEllipsis=!0;var n=Math.ceil(Math.random()*this.showMaxDuration),s=Math.ceil(Math.random()*this.showMaxPerWords),i=this.startWordIndex+s;this.showContent+=this.content.slice(this.startWordIndex,i),this.startWordIndex=i;var a=o.getBoundingClientRect().height,r=void 0===a?0:a;r>this.preContentHeight&&this.$nextTick((function(){e.scrollTo({behavior:"smooth",top:r})})),this.preContentHeight=r,this.startWordIndex<this.content.length?setTimeout((function(){t.showBaikeAnimation()}),n):this.showEllipsis=!1},onClickSearch:function(){var t=this.s1sStatInfoObj,e=t.bizuin,o=void 0===e?0:e,n=t.msgid,s=void 0===n?0:n,a=t.msgidx,r=void 0===a?0:a,d=this.s1sContextInfoObj.mixerCommonContext,l=void 0===d?"":d,h=this.genClickId();i.f.baike.commonReport({actionType:5003,msgType:"sys",requestId:this.requestId,content:"搜索：「${this.query}」",extInfo:{s1s_keywords_data:this.s1sKeywordsDataForReport,clickid:h}}),this.M_openSearchWebView({actionType:7,scene:i.b.scene,query:i.b.query,forceFullPageSearch:!0,extParams:encodeURIComponent(JSON.stringify({isHomePage:1,crossExtReqParams:[{key:"parentSearchID",textValue:this.M_composeParentSid({t:c.p.MP_HIGH_LIGHT_GPT_JUMP,s:this.enterId,did:i.b.query,rid:"".concat(o,"_").concat(s,"_").concat(r),kv:this.s1sKeywordsDataForReport,isFromOpenSearchWebview:!0})},{key:"mixerCommonContext",textValue:l}]}))})},genClickId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[t.searchId||i.b.searchId||"",t.timestamp||+new Date,"".concat(Math.random()).substr(2,10)].join("-")},onClickClose:function(){var t=this.genClickId();i.f.baike.commonReport({actionType:5100,msgType:"fold",requestId:this.requestId,content:"",extInfo:{s1s_keywords_data:this.s1sKeywordsDataForReport,clickid:t}}),a.a.removeWebviewPage({animated:!0})}}},m=(o(3610),Object(l.a)(p,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"baike-page-wrap"},[o("div",{staticClass:"baike-page"},[o("div",{staticClass:"baike-page__header"},[o("span",{staticClass:"baike-page__header-close",on:{click:t.onClickClose}},[o("ui-arrow",{attrs:{direction:"down",align:"flex"}})],1),o("div",{staticClass:"baike-page__header-title"},[t._v(t._s(t.query))])]),o("div",{staticClass:"baike-page__content",style:t.contentStyle},[o("div",{staticClass:"baike-page__content-inner"},[o("span",{domProps:{innerHTML:t._s(t.xss(t.showContentHtml))}}),t.showEllipsis||t.loading?o("loading-pots"):t._e()],1)]),o("div",{staticClass:"baike-page__footer"},[o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"baike-page__footer-content",on:{click:t.onClickSearch}},[o("ui-image",{staticClass:"icons-outlined-search",attrs:{size:20,url:"https://res.wx.qq.com/t/fed_upload/eba034fd-f4d8-4028-b83e-530b5d632d14/magnifying_glass.svg"}}),o("span",{staticClass:"search_entry"},[t._v("搜索「"+t._s(t.query)+"」")])],1)])])])}),[],!1,null,null,null));e.default=m.exports},680:function(t,e,o){},682:function(t,e,o){}}]);