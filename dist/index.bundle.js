(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{1204:function(e,t,n){"use strict";n(462)},1445:function(e,t,n){"use strict";n(426)},1447:function(e,t,n){"use strict";n(431)},1457:function(e,t,n){"use strict";n(463)},1458:function(e,t,n){"use strict";n(464)},1461:function(e,t,n){"use strict";n(470)},1466:function(e,t,n){"use strict";n(471)},1472:function(e,t,n){"use strict";n(472)},2041:function(e,t,n){"use strict";n(456)},2160:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),s=n(24),o=n.n(s),a={},c=(n(1445),n(4)),u=Object(c.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"tail"})}),[],!1,null,"828e560e",null).exports,p=n(0),d=n(19),l=n(17),h=n(2),f=n(32),m=n.n(f),y=n(33),g=n.n(y),v=n(23),b=n.n(v),I=n(16),_=n(11),x=n(50),w=n(810),O=n(482);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={mixins:[O.a],props:{items:{type:Array,default:function(){return[]}}},data:function(){return{SearchInputId:w.a,sliderStyle:{},activeIndex:-1,isFirstEnter:!0,reportInfoFor26897:{block:{title:"宫格垂搜",type:12}}}},watch:{activeIndex:{handler:function(e){var t=this;e>-1&&setTimeout((function(){t.handleSlider(e),t.isFirstEnter=!1,p.a.$emit(p.k.VERT_CHANGE,t.items[e])}))},immediate:!0},items:{handler:function(e){if(e&&e.length&&-1===this.activeIndex){var t=e.findIndex((function(e){return e.businessType==p.b.type}));t>=0&&this.activeIndex!==t?this.activeIndex=t:this.activeIndex=0}},immediate:!0}},created:function(){},methods:{onTap:function(e,t){var n=T(T({},e),{},{type:e.businessType,focusSearchBar:!0}),i={animation:!0,skipCommonReport:!0,customReport:[{logid:15521,log_buffer:[+p.b.scene,"",+Date.now(),+e.businessType].join(",")},{logid:21441,log_buffer:["",p.b.sessionId||"",3,e.businessType,t,e.hotword].join(",")}]};this.$emit("tap",n,i),p.f.reportEventTrack({actionType:1001,scene:h.e.S1S_VERTICAL,type:e.businessType}),this.M_clickReportFor26897(e,t,{actionId:3016},this.reportInfoFor26897)},handleSlider:function(e){if(this.$refs.entries){var t=this.$refs.entries.querySelectorAll(".item")[e];this.sliderStyle={width:"".concat(t.offsetWidth,"px"),transform:"translateX(".concat(t.offsetLeft,"px)"),transition:this.isFirstEnter?"":"transform 0.3s ease"}}},setInputActive:function(e){p.a.$emit(p.k.SEARCH_BAR_ACTIVE,e)}}},C=(n(3667),Object(c.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.items.length?n("div",{ref:"entries",staticClass:"list"},[e._l(e.items,(function(t,i){return n("label",{key:t.hotword,staticClass:"item",class:{selected:e.activeIndex===i},attrs:{"data-expose-id":"__vertEntries__$"+t.businessType+"$"+i+"$"+t.hotword,"data-index-report-id":""+e.M_getItemReportId(t,i,e.reportInfoFor26897),role:"button",for:e.SearchInputId},on:{click:function(n){return e.onTap(t,i+1)},mousedown:function(t){return t.stopPropagation(),e.setInputActive(!0)},mouseup:function(t){return t.stopPropagation(),e.setInputActive(!1)}}},[e._v("\n    "+e._s(t.hotword)+"\n  ")])})),e.os.pc?n("span",{staticClass:"slider",style:e.sliderStyle}):e._e()],2):e._e()}),[],!1,null,"7c16cc9b",null).exports),j=n(481);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={components:{tags:j.a},props:{type:{type:Number,default:0},realType:{type:Number,default:0},title:{type:String,default:""},scene:{type:Number,default:0},parentType:{type:Number,default:0},iconUrl:{type:String,default:""},items:{type:Array,default:function(){return[]}},config:{type:Object,default:null},headJumpUrl:{type:Object,default:null},tags:{type:Array,default:function(){return[]}},moreText:{type:String,default:""},typePos:{type:Number,default:0},tailSplitLine:{type:Boolean,default:!0},bdExpandStyle:{type:String,default:""},boxTitleStyle:{type:String,default:""}},data:function(){return{collapsed:!0,EVENT_TYPE:{NORMAL:0,COLLAPSE:1}}},computed:{needExpand:function(){return this.config&&this.config.foldPos>0&&this.config.foldPos<this.items.length},visibleItems:function(){return this.needExpand&&this.collapsed?this.items.slice(0,this.config.foldPos):this.items}},methods:{onTap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e===this.EVENT_TYPE.COLLAPSE)return this.collapsed=!this.collapsed,void this.$emit("tap",{realType:this.realType,itemPos:0,hotword:this.collapsed?"收起":"更多"},{skipOpt:!0,triggerExpose:!0});this.headJumpUrl&&this.headJumpUrl.optype&&this.$emit("tap",P(P({},this.headJumpUrl),{},{realType:this.realType,itemPos:0}))}}},R=(n(1447),Object(c.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticClass:"box__hd",class:e.headJumpUrl&&e.headJumpUrl.optype?"more":"",on:{click:e.onTap}},[n("div",{staticClass:"box__hdl",attrs:{role:"option"}},[e.iconUrl?n("online-image",{staticClass:"box__icon",attrs:{url:e.iconUrl}}):e._e(),n("span",{class:{box__title:!0},style:e.boxTitleStyle},[e._v("\n        "+e._s(e.title)+"\n      ")]),n("tags",{staticClass:"box__tag",attrs:{tags:e.tags}})],1),e.headJumpUrl&&e.headJumpUrl.optype?n("div",{staticClass:"box__hdr",attrs:{role:"option"}},[n("div",{attrs:{"data-expose-id":e.realType+"#-1"}},[e._v("\n        "+e._s(e.moreText)+"\n      ")]),n("svg-icon",{staticClass:"box__arrow",staticStyle:{"margin-left":"4px"},attrs:{name:"arrow"}})],1):e.needExpand?n("div",{staticClass:"box__hdr"},[n("div",{staticClass:"box__dropdown",attrs:{"data-expose-id":e.realType+"#-1",role:"button"},on:{click:function(t){return e.onTap(e.EVENT_TYPE.COLLAPSE)}}},[e._v("\n        "+e._s(e.collapsed?"更多":"收起")+"\n        "),n("svg-icon",{staticClass:"box__arrow",class:e.collapsed?"box__arrow-down":"box__arrow-up",staticStyle:{"margin-left":"8px"},attrs:{name:"arrow"}})],1)]):e._e()]),n("div",{staticClass:"box__bd",style:e.bdExpandStyle},[e._t("default",null,{items:e.visibleItems,realType:e.realType,title:e.title,scene:e.scene,parentType:e.parentType})],2)])}),[],!1,null,"10b0aa8e",null).exports),N=n(51),$=n(67);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={created:function(){window.reportVueCreated("src/views/index/components/hotword-pc/hotword-pc.vue")},components:{tags:j.a},mixins:[$.a,p.n],props:{type:{type:Number,default:0},items:{type:Array,default:function(){return[]}},typePos:{type:Number,default:0},realType:{type:Number,default:0}},computed:{itemGroups:function(){var e=this.items.length,t=Math.ceil(e/2),n=this.items.map((function(e,t){return H(H({},e),{},{_index:t+1})}));return n.length?[n.slice(0,t),n.slice(t,e)]:[]}},methods:{tap:function(e){var t=this;p.b.setValue({searchId:"",type:0,isHomePage:1});var n=e.currentTarget,i=+p.g.attr(n,"data-index")-1,r=this.items[i],s=t.M_composeParentSid({t:h.p.INDEX_HOT_WORD,s:t.$store.state.index.recommendId,did:t.items[i].id,rid:t.$store.state.index.requestId});t.M_checkSpecialSearchBeforeLaunchNewSearch({query:r.hotword,callback:function(){p.a.$emit(p.k.GOTO,{page:h.f.RESULT,query:r.hotword||"",action:h.n.HOT_WORD,searchId:"",extReqParams:{key:"parentSearchID",textValue:s}})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:s}]}}),p.g.reportRealTime({scene:p.b.scene,recommendId:this.$store.state.index.recommendId,businessType:this.type,docId:this.items[i].id,docPos:i+1,typePos:this.typePos,isHomePage:0}),Object(I.g)(N.a.feature.indexHotWord)}}},L=(n(3498),Object(c.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hotword"},e._l(e.itemGroups,(function(t,i){return n("ul",{key:i,staticClass:"hotword-group"},e._l(t,(function(t){return n("li",{key:t._index,staticClass:"hotword-item",attrs:{"data-index":t._index,"data-expose-id":"__hotword__#"+e.realType+"#"+t._index+"#"+t.hotword},on:{click:e.tap}},[n("div",{staticClass:"hotword-item__word",attrs:{title:t.hotword}},[e._v(e._s(t.hotword))]),n("tags",{staticClass:"hotword-item__tag",attrs:{tags:t.tags}})],1)})),0)})),0)}),[],!1,null,"1e79d048",null).exports),F={created:function(){window.reportVueCreated("src/views/index/components/good-thing/good-thing.vue")},mixins:[n(433).a],methods:{getItemReportInfo:function(e){return{requestId:this.$store.state.index.requestId,searchId:this.$store.state.index.data.searchID,itemInfo:"".concat(this.typePos,"_4_").concat(e.hotword||e.title)}}}},V=(n(2041),Object(c.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.hasRedDot,expression:"hasRedDot"}],staticClass:"index__good-thing"},e._l(e.items,(function(t,i){return n("div",{directives:[{name:"active",rawName:"v-active"}],key:e.realType+"#"+i,staticClass:"index__good-thing-info active__item",attrs:{"data-expose-id":e.realType+"#"+i+"##"+(t.id||""),role:"button"},on:{click:function(n){return e.tapGoodThing(t,i+1)}}},[n("div",{directives:[{name:"image",rawName:"v-image:avatar",value:t.iconUrl,expression:"item.iconUrl",arg:"avatar"}],staticClass:"index__good-thing-icon"}),n("div",{staticClass:"index__good-thing-title"},[n("span",[e._v(e._s(t.hotword||t.title))])])])})),0)}),[],!1,null,"6b003dcc",null).exports),U=n(1126),B=n(13),J=n(736);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=!1,X={components:{reddotBadge:J.a},mixins:[p.n],props:["items","type","realType"],mounted:function(){this.reddotExposeTimeout=null,this.reddotExposeList=[]},created:function(){window.reportVueCreated("src/views/index/components/service-box/service-box.vue"),G||(B.a.preloadWeapp({userName:"wxdb2453762cc14cf3",appId:"gh_8e88e2b28133@app",preloadEnv:!0,fakeNative:!0}),G=!0)},methods:{tapService:function(e,t,n){if(e&&e.jumpInfo){var i=n.serviceEntry.id||"",r=n.serviceEntry.title||"",s={};if(e.redDotInfo){var o=this.$refs["reddot-".concat(e.id)],a=o&&o[0]||{};a.isShow&&(a.onClick({delay:500}),s={if_reddot:1,reddot_key:e.redDotInfo.key||"",reddot_content:e.redDotInfo.text||""},B.a.commonCgi({cgiName:l.a.serviceBoxReportRedDot,data:{cmd:"ReportRedDot",list:[{key:e.redDotInfo.key||"",type:1,action:2}]}}))}this.$emit("tap",W(W({},e),{},{docId:this.tabID,optype:h.c.weapp,realType:this.realType,itemPos:1}),{recordToRecentUsedWeApp:!1,skipCommonReport:!0,customReport:[{logid:20940,log_buffer:this.getReportItem(e,t+1,i,1,r,s)}]})}},onReddotExpose:function(e){var t=this;clearTimeout(this.reddotExposeTimeout),this.reddotExposeList.push({key:e.redDotInfo.key,type:1,action:1}),this.reddotExposeTimeout=setTimeout((function(){t.reddotExposeList&&t.reddotExposeList.length&&B.a.commonCgi({cgiName:l.a.serviceBoxReportRedDot,data:{cmd:"ReportRedDot",list:t.reddotExposeList}})}),100)},tapNotification:function(e,t,n){if(e&&e.jumpInfo){var i=n.notification.id||"",r=e.title||"",s=W(W({},e),{},{id:e.id,title:e.desc});this.$emit("tap",W(W({},e),{},{docId:this.tabID||"常用服务",optype:h.c.weapp,realType:this.realType,itemPos:1}),{recordToRecentUsedWeApp:!1,skipCommonReport:!0,customReport:[{logid:20940,log_buffer:this.getReportItem(s,t+1,i,2,r)}]})}},getServExposeId:function(e,t,n){return e&&n?"".concat(this.realType,"-").concat(n.serviceEntry.id||"","-0-").concat(e.id,"-").concat(t+1,"-").concat(e.redDotInfo?"".concat(e.redDotInfo.key,"-").concat(e.redDotInfo.text):""):""},getReportItem:function(e,t,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!e)return"";var o=this,a={page_id:"6780749134400913529",boxid:n,box_name:r,box_index:i,item_index:t,item_name:e.title||"",item_id:e.id||"",item_ext:s,appid:e.jumpInfo&&e.jumpInfo.weappAppid||"",username:e.jumpInfo&&e.jumpInfo.userName||"",url:e.jumpInfo&&e.jumpInfo.jumpUrl||e.jumpInfo.weappUrl||"",type:2e4,report_query:{businesstype:p.b.type,search_scene:p.b.scene,search_id:o.$store.state.index.recommendId}};return this.genKVLogString({DeviceModel:"unknown",DeviceBrand:"unknown",OsName:"unknown",OsVersion:"-1",LanguageVersion:"zh_CN",StartTime:Date.now(),EndTime:Date.now(),Count:1,ClientIPV6:"unknown",appId:"",pageName:"unknown",scene:p.b.scene,sessionId:o.$store.state.index.recommendId,appVersion:"-1",actionLog:encodeURIComponent(JSON.stringify([a]))})},genKVLogString:function(e){var t="";return Object.keys(e).forEach((function(n){0!==t.length&&(t+=","),t+=e[n]})),t}}},z=(n(1204),Object(c.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.items.length?n("div",{staticClass:"list"},e._l(e.items,(function(t,i){return n("div",{key:i,staticClass:"item"},[t.serviceEntry?n("div",{staticClass:"service"},[n("div",{staticClass:"service_title"},[e._v(e._s(t.serviceEntry.title))]),t.serviceEntry.list&&t.serviceEntry.list.length?n("div",{staticClass:"service_box"},e._l(t.serviceEntry.list,(function(i,r){return n("div",{key:i.id,staticClass:"service_box_item",attrs:{"data-expose-id":e.realType+"#"+r+"##"+e.getServExposeId(i,r,t),role:"button"},on:{click:function(n){return e.tapService(i,r,t)}}},[n("div",{staticClass:"service_box_item-inner"},[n("div",{staticClass:"icon_box"},[n("ui-image",{staticClass:"icon",attrs:{size:32,url:i.iconUrl}}),i.redDotInfo?n("reddot-badge",{ref:"reddot-"+i.id,refInFor:!0,staticClass:"reddot-badge",attrs:{id:i.redDotInfo.key,text:i.redDotInfo.text,"related-id":i.id},on:{expose:function(t){return e.onReddotExpose(i)}}}):e._e()],1),i.title?n("div",{staticClass:"title",domProps:{innerHTML:e._s(e.xss(i.title))}}):e._e(),i.desc?n("div",{staticClass:"desc",domProps:{innerHTML:e._s(e.xss(i.desc))}}):e._e()])])})),0):e._e()]):e._e(),t.notification&&t.notification.list&&t.notification.list.length?n("div",{staticClass:"notification"},e._l(t.notification.list,(function(i,r){return n("div",{key:i.id,staticClass:"notification_item",attrs:{"data-expose-id":e.realType+"#"+(1e4+r)+"##"+e.realType+"-"+(t.notification.id||"")+"-1-"+i.id+"-"+r,role:"button"},on:{click:function(n){return e.tapNotification(i,r,t)}}},[n("div",{staticClass:"notification_inner"},[n("div",{staticClass:"notification_item_title"},[e._v(e._s(i.title))]),n("div",{staticClass:"notification_item_desc"},[e._v(e._s(i.desc))]),n("div",{staticClass:"notification_item_sub"},[e._v(e._s(i.sub))]),n("svg-icon",{staticClass:"notification_item_arrow",attrs:{name:"arrow"}})],1)])})),0):e._e()])})),0):e._e()}),[],!1,null,"b1ddcd20",null).exports),K=n(720),Y=n(742),Q={created:function(){window.reportVueCreated("src/views/index/components/guess-box/components/tag.vue")},components:{},props:{tag:{type:Object,default:function(){return{}}}},methods:{pickIconStyle:function(e){var t={backgroundColor:e.color};return p.g.isDarkMode()&&e.darkColor&&(t.backgroundColor=e.darkColor),t},pickTitleStyle:function(e){var t={},n=["color","fontSize","padding","margin","fontWeight"];return Object.keys(e).forEach((function(i){n.includes(i)&&(t[i]=e[i])})),p.g.isDarkMode()&&e.darkColor&&(t.color=e.darkColor),t}}},Z=(n(1457),{created:function(){window.reportVueCreated("src/views/index/components/guess-box/components/tags.vue")},components:{Tag:Object(c.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tag-wrap"},[e.tag.icon?n("ui-image",{staticClass:"icon",style:e.pickIconStyle(e.tag.icon),attrs:{url:e.tag.icon.url}}):e._e(),n("div",{staticClass:"center"}),e.tag.title?n("span",{staticClass:"tag-inner",style:e.pickTitleStyle(e.tag)},[e._v(e._s(e.tag.title))]):e._e()],1)}),[],!1,null,"5c92535b",null).exports},props:{tags:{type:Array,default:function(){return[]}}}}),ee=(n(1458),{components:{Tags:Object(c.a)(Z,(function(){var e=this.$createElement,t=this._self._c||e;return this.tags&&this.tags.length?t("div",{staticClass:"tag-list"},this._l(this.tags,(function(e){return t("tag",{key:e.title,staticClass:"tag-item",attrs:{tag:e}})})),1):this._e()}),[],!1,null,"20808cfe",null).exports},props:{item:{type:Object,default:function(){return{}}},index:{type:Number,default:-1}},data:function(){return{}},watch:{item:{handler:function(){if(this.item.word){var e="".concat(this.index,"|").concat(encodeURIComponent(this.item.word),"|").concat(encodeURIComponent(this.item.query||this.item.word));this.item.reportJson&&this.$emit("report-doc-ext",{query:e,reportJson:{doc_pull_type:this.item.type,doc_pull_type_detail:this.item.reportJson}})}},immediate:!0}},methods:{getTagsTitle:function(e){if(e){var t="";return e.forEach((function(e){t+=e.title}))," ".concat(t)}return""},onTapItem:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$emit.apply(this,["tap-search"].concat(t))}}});n(3659);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie,re={name:"GuessBox",components:{GuessItem:Object(c.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"rmd__item",attrs:{role:"option","aria-label":e.index+1+" "+(e.item.word||"")+e.getTagsTitle(e.item.tag)+"，链接"},on:{click:function(t){return t.stopPropagation(),e.onTapItem(e.item,e.index)}}},[n("div",{staticClass:"rmd__item__inner",attrs:{"aria-hidden":"true"}},[n("span",{staticClass:"rmd__item__word",class:{"has-tag":e.item.tag}},[e._v(e._s(e.item.word))]),e.item.tag?n("tags",{staticClass:"rmd__item__tags",attrs:{tags:e.item.tag}}):e._e()],1)])}),[],!1,null,"317d8610",null).exports},mixins:[O.a],props:{items:{type:Array,default:function(){return[]}},realType:{type:Number,default:0},typePos:{type:Number,default:0},title:{type:String,default:""},scene:{type:Number,default:0},parentType:{type:Number,default:0},type:{type:Number,default:0}},data:function(){return{guesslist:[]}},computed:{requestId:function(){return this.$store.state.index.requestId},searchId:function(){return this.$store.state.index.data.searchID},blockExposeId:function(){return"".concat(this.vertEntries.length?this.typePos+1:this.typePos,"|",2,"|").concat(encodeURIComponent(this.title||""))},vertEntries:function(){return this.$store.state.index.vertEntries||[]},isCacheData:function(){return this.$store.state.index.isCacheData},cacheReqid:function(){return this.$store.state.index.cacheReqid},reportInfoFor26897:function(){return ne(ne({},this.$props),{},{block:ne({},this.$props)})}},watch:{items:{handler:function(e){e&&e.length&&(this.guesslist=this.handleItems(e))},immediate:!0}},created:function(){p.a.$on(p.k.INDEX_COMP_EXPOSE,this.onExpose)},beforeDestroy:function(){p.a.$off(p.k.INDEX_COMP_EXPOSE,this.onExpose)},methods:{handleItems:function(){var e=-1,t=this.items.map((function(t,n){return t.optype=t.optype||1,t.vueIsShow=!0,t.word=t.word.trim(),t.vueDocId="".concat(n,"|").concat(t.vueIsShow?++e:"","|").concat(encodeURIComponent(t.word),"|").concat(encodeURIComponent(t.query||t.word),"|").concat(t.vueIsShow?1:0,"|").concat(encodeURIComponent(t.tag&&t.tag.map((function(e){return e.title})).join("&")||""),"|").concat([].join("&"),"|||").concat(t.type),t})),n=encodeURIComponent(JSON.stringify({is_cache_data:this.isCacheData?1:0,cache_reqid:this.cacheReqid?this.cacheReqid:""}));return p.f.teach.reportCommonNewPull({requestId:this.requestId,searchId:this.searchId,itemInfo:this.blockExposeId,docInfo:t.map((function(e){return e.vueDocId})).join("#"),extInfo:n}),t},onTapSearch:function(e,t,n){var i=e.query||e.word,r={parentSearchID:this.M_composeParentSid({t:this.parentType,s:this.$store.state.index.recommendId,did:i,rid:this.requestId}),crossExtReqParams:[]};!function(e){if(e&&([12].includes(e.type)&&e.reportJson)){var t={};if(e.mixerCommonContext)try{t=JSON.parse(e.mixerCommonContext)}catch(n){}t.report_json=JSON.stringify({doc_pull_type:e.type,doc_pull_type_detail:e.reportJson}),e.mixerCommonContext=JSON.stringify(t)}}(e),e.mixerCommonContext&&r.crossExtReqParams.push({key:"mixerCommonContext",textValue:e.mixerCommonContext}),p.f.teach.reportCommonNewClick({requestId:this.requestId,searchId:this.searchId,itemInfo:this.blockExposeId,docInfo:e.vueDocId}),this.M_clickReportFor26897&&this.M_clickReportFor26897(e,t+1,{actionId:3013},this.reportInfoFor26897),Object(Y.a)({type:1,query:e.word,ext:JSON.stringify({uniqKey:e.uniqKey,type:e.type})}),this.$emit("tap",ne({skipCommonReport:!0,optype:e.optype,hotword:e.word,scene:this.scene},r)),Object(I.a)(p.m.guess.clickQuery)},onExpose:function(e){if(e&&e.length){var t=e.filter((function(e){return/^guess-block:/.test(e)})).map((function(e){return e.replace(/^guess-block:/,"")})),n=e.filter((function(e){return/^guess-item:/.test(e)})).map((function(e){return e.replace(/^guess-item:/,"")}));t.length&&p.f.teach.reportCommonNewExpose({requestId:this.requestId,searchId:this.searchId,itemInfo:this.blockExposeId,docInfo:""}),n.length&&(p.f.teach.reportCommonNewExpose({requestId:this.requestId,searchId:this.searchId,itemInfo:this.blockExposeId,docInfo:n.join("#")}),Object(I.a)(p.m.guess.exposeQuery,{rate:1,isSessionOnly:!0}))}},onReportDocExt:function(e){var t=e.query,n=e.reportJson;p.f.teach.reportCommonNewExt({query:t,requestId:this.requestId,searchId:this.searchId,itemType:2,reportJson:n})}}},se=(n(3670),Object(c.a)(re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recommend-list",attrs:{"data-expose-id":"guess-block:"+e.blockExposeId}},e._l(e.guesslist,(function(t,i){return n("guess-item",{key:t.vueDocId,attrs:{"data-expose-id":"guess-item:"+t.vueDocId,"data-index-report-id":""+e.M_getItemReportId(t,i,e.reportInfoFor26897),item:t,index:i},on:{"tap-search":e.onTapSearch,"report-doc-ext":e.onReportDocExt}})})),1)}),[],!1,null,"042a7933",null).exports),oe={functional:!0,render:function(e){return e("div")}},ae={functional:!0,render:function(e,t){var n=t.props,i=t.listeners,r=function(t){return e(t,{props:n,on:i})},s=function(t,r,s){return r?Object.assign(r,n):r=n,e(R,{props:r,on:i,scopedSlots:{default:function(n){return s?Object.assign(s,n):s=n,e(t,{props:Object.assign(s,r),on:i})}}})},o=n.type,a=n.items;if(a&&a.length>0)switch(o){case 2:return s(L);case 12:return r(V);case 15:return s(K.a,{bdExpandStyle:"padding-bottom: 4px;"});case 39:return s(se,{bdExpandStyle:"padding-bottom: 4px;",boxTitleStyle:"font-weight: normal; color: var(--FG-2); font-size: 14px;"});case 21:return r(U.a);case 24:return r(z)}return e(oe)},props:{type:{type:Number,default:0},realType:{type:Number,default:0},title:{type:String,default:""},scene:{type:Number,default:0},parentType:{type:Number,default:0},iconUrl:{type:String,default:""},items:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return null}},headJumpUrl:{type:Object,default:function(){return null}},tags:{type:Array,default:function(){return[]}},moreText:{type:String,default:""},typePos:{type:Number,default:0}}},ce={mixins:[p.n],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}}},methods:{tap:function(){this.M_go(this.item),this.$emit("tap:setting",this.item)}}},ue=(n(1461),Object(c.a)(ce,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"link-wrap"},[t("span",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__opacity",attrs:{role:"link"},on:{click:this.tap}},[this._v("\n    "+this._s(this.item.word)+"\n  ")])])}),[],!1,null,"ef5ab3d2",null).exports),pe=new(n(10).a)({setting:1}),de={components:{setting:ue},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{types:pe}},methods:{onTapSetting:function(e){this.$emit("tap:setting",e)}}},le=(n(1466),Object(c.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index-bottom"},e._l(e.data.items,(function(t,i){return n(e.types[t.type||1],e._b({key:i,tag:"components",attrs:{item:t,"data-expose-id":"__bottomComp__$"+(t.type||1)+"$"+i},on:{"tap:setting":e.onTapSetting}},"components",e.$props,!1))})),1)}),[],!1,null,"8dc81e5a",null).exports);n(21);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me={components:{"vert-entries":C,"index-comp":ae,bottom:le},mixins:[p.l,p.n],data:function(){return{nativeHeight:0,showAllOperateItem:!1,isFirstEnter:!0,banList:[],deviceType:p.b.deviceType,hotwordMap:{},curScene:0,canRefreshHotword:!0,fromEntryPage:!1,redDotRecordMap:{}}},computed:{bottomData:function(){return this.$store.state.index.bottom||null},ret:function(){var e=this,t=this.$store.state.index.data;return t&&this.handleExpose(),(t&&t.data||[]).reduce((function(t,n){return e.banList.indexOf(n.realType)<0&&(13===n.realType?e.frequentSearchBizs.length>0&&t.push(fe(fe({},n),{},{items:e.frequentSearchBizs})):t.push(n)),t}),[])},requestId:function(){return this.$store.state.index.requestId},isNewHotList:function(){return"guidePageList"===this.$store.state.index.dataType},vertEntries:function(){return this.$store.state.index.vertEntries},defaultNativeHeight:function(){return this.$store.state.index.defaultNativeHeight},realNativeHeight:function(){return this.nativeHeight>0?this.nativeHeight:this.defaultNativeHeight},frequentSearchBizs:function(){return this.$store.state.index.frequentSearchBizs.map((function(e){return{hotword:e.nickName,picUrl:e.avatarUrl,userName:e.userName,optype:3}})).filter((function(e){return!!e.hotword&&!!e.picUrl&&!!e.userName})).slice(0,8)}},watch:{$route:function(e){var t=this;"index"===e.name&&(p.b.setValue({scene:this.curScene||p.b.scene}),t.isFirstEnter=!1,t.getData(),t.$nextTick((function(){t.showAllOperateItem=!0})))}},created:spy((function(){var e=this,t=this;if(p.g.queryString.nativeHeight&&(t.nativeHeight=+p.g.queryString.nativeHeight),p.b.queryString.isPreload){p.b.queryString;var n=t.$store.state.onUiInitData;i(),n&&n.nativeHeight&&(t.nativeHeight=+n.nativeHeight)}else i();function i(){l.b.onTeachReady((function(e){var n=e.opts||{};0===p.b.type&&(p.f.reportEventTrack({requestId:e.requestId||t.requestId,actionType:208,query:n.query}),p.f.reportSearchStay({eventId:h.s.ENTRY,pageType:h.h.pageType.INDEX,searchId:t._dataHandler(e).searchID}),t.canRefreshHotword=!1,t.init(e),p.i.log({msg:"[index onTeachSearchDataReady] ".concat(JSON.stringify(e)),level:"info"}))})),t.getData({query:"me.getData_onUiInit"})}p.g.WeixinJSBridgeOn("onBeginWebSearchAnimation",(function(){t.showAllOperateItem=!1})),l.b.onWebviewResume((function(){t.$route.name==h.f.INDEX&&t.getData({},p.b.type)})),l.b.onWebviewPause((function(){t.fromEntryPage=!1})),l.b.onPageStateChange((function(t){"entryPage"===t.state&&(e.canRefreshHotword=!0,e.fromEntryPage=!0)})),l.b.onInputChange((function(e){e&&e.isCancelButtonClick&&window.scrollTo(0,0)}));var r=window.points&&window.points[0];p.f.reportEventTrack({actionType:200,timeStamp:r})})),mounted:function(){this.banList=p.d.getStore("HomePageBanList",[])||[]},destroyed:function(){p.d.store("HomePageBanList",this.banList),ie&&ie.destory()},methods:{_dataHandler:function(e){try{e="string"==typeof e.json?JSON.parse(e.json):e.json}catch(t){e={}}return e||{}},_doSearchOperation:function(e,t){p.g.WeixinJSBridgeInvoke("doSearchOperation",p.g.extend({action:2,scene:h.e.S1S},e),t||function(){})},init:spy(function(){var e=g()(b.a.mark((function e(t){var n,i,r,s,o,a,c=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isLoadingSearchGuide=!1,n=t.opts||{},i=(t||{}).isCacheData,r=void 0===i?0:i,p.i.log({msg:"[index init]".concat(JSON.stringify(t)),level:"info"}),s=this,!t.requestId||t.requestId==s.requestId){e.next=9;break}return Object(I.g)(p.m.feature.hotWord.ridFail),e.abrupt("return");case 9:if(r){e.next=14;break}p.e.set({key:"s1s:rmd_cache_reqid",value:s.$store.state.index.requestId}),s.$store.commit("index/updateCacheFlag",{isCacheData:0,cacheReqid:""}),e.next=24;break;case 14:return e.prev=14,e.next=17,p.e.get({key:"s1s:rmd_cache_reqid"});case 17:o=e.sent,s.$store.commit("index/updateCacheFlag",{isCacheData:r,cacheReqid:o}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(14),e.t0;case 24:if(void 0!==(t=this._dataHandler(t)).preSearchSwitch&&p.b.setValue({preSearchSwitch:t.preSearchSwitch}),0==t.businessType){e.next=30;break}return Object(I.a)(p.m.guess.discoverRecommendEmpty),Object(I.g)(p.m.feature.hotWord.busFail),e.abrupt("return");case 30:if(ie&&ie.resetExposeId(),t.searchID||t.data&&t.data.length&&(BJ_REPORT.info("recommendId empty：".concat(JSON.stringify(t))),Object(I.g)(p.m.feature.indexRidEmpty)),s.showAllOperateItem||(s.showAllOperateItem=!0,p.a.$emit(p.k.HOTWORD_ANIMATION_DONE,t.businessType)),a=t.data){e.next=39;break}return Object(I.a)(p.m.guess.discoverRecommendEmpty),Object(I.g)(p.m.feature.hotWord.ddFail),e.abrupt("return");case 39:a.length||(Object(I.a)(p.m.guess.discoverRecommendEmpty),Object(I.g)(p.m.feature.hotWord.ddLengthFail)),s.$store.commit("index/updateData",{data:t}),s.hotwordMap[t.businessType]=t,t&&t.discoverSearchGuide&&s.$store.commit("index/updateVertEntries",t.discoverSearchGuide),setTimeout((function(){p.f.reportEventTrack({requestId:s.requestId,actionType:209,query:n.query}),p.a.$emit(p.k.INDEX_RENDER_FINISH)}),0),setTimeout((function(){(!c.redDotRecordMap[p.b.sessionId]||Global.os.ios&&c.fromEntryPage)&&(p.g.WeixinJSBridgeInvoke("updateReddotTimeStamps",{reddotTimeStamps:t.timestamp,isSearch:1},(function(){})),c.fromEntryPage=!1,c.redDotRecordMap[p.b.sessionId]=!0)}),100);case 47:case"end":return e.stop()}}),e,this,[[14,21]])})));return function(t){return e.apply(this,arguments)}}()),handleExpose:function(){var e=this;setTimeout((function(){ie||(ie=new x.Expose((function(t){if(t.length){var n=t.reduce((function(e,t){if(!t)return e;var n=t.split("$");if("__vertEntries__"!==n[0]||n.length<4)return e;var i=Number(n[1]),r=Number(n[2]),s=n[3];return e.push([i,r+1,s]),e}),[]);if(n.length){var i=n.map((function(e){return e[0]})).join("_"),r=n.map((function(e){return e[1]})).join(";"),s=n.map((function(e){return e[2]})).join("_"),o=["",p.b.sessionId||"",2,i,r,s].join(",");p.i.commonCgi({cgiName:l.a.mmDataReport,data:{clientversion:Number(p.b.clientVersion),device:e.deviceType,item_list:[{logid:21441,log_buffer:o}]}})}e._handleExpose(t)}}),{container:e.$el})),ie.analysis()}))},onCloseBox:function(e,t){this.banList.push(t)},onTap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.optype,i=t.skipCommonReport,r=void 0!==i&&i,s=t.customReport,o=void 0===s?[]:s,a=t.skipOpt,c=void 0!==a&&a,u=t.triggerExpose,d=void 0!==u&&u,f=t.recordToRecentUsedWeApp,y=void 0===f||f;if(n||c){d&&this.handleExpose();var g=[];if(r||g.push({logid:21103,log_buffer:["",3,e.realType,this.$store.state.index.data.searchID||"",p.b.sessionId||"",e.itemPos,encodeURIComponent(e.hotword||"")].join(",")}),o&&o.length&&g.push.apply(g,m()(o)),g.length&&p.i.commonCgi({cgiName:l.a.mmDataReport,data:{clientversion:Number(p.b.clientVersion),device:this.deviceType,item_list:g}}),!c)if(n===h.c.search){p.f.reportJumpType({businessType:p.b.type,pageType:h.h.pageType[this.$route.name],docId:"",clickType:2,newSearchType:h.h.searchType.DOC_SEARCH});var v=e.parentSearchID||this.M_composeParentSid({t:h.p.INDEX_WOW_LIST,s:this.$store.state.index.recommendId,did:e.id,rid:this.$store.state.index.requestId});if(e.scene&&1!=p.b.queryString.isV2&&(this.curScene=p.b.scene,p.b.setValue({scene:e.scene})),1==p.b.queryString.isV2)return void this._doSearchOperation({action:3,query:e.hotword,scene:h.e.S1S,onUiInitBypassMap:{type:e.businessType||0,query:e.hotword||"",action:h.n.HOT_WORD,searchId:"",sessionId:p.b.sessionId,scene:e.scene||h.e.S1S,extParams:encodeURIComponent(JSON.stringify({parentSearchID:v,crossExtReqParams:e.crossExtReqParams||[]}))}});p.i.setInputBar({query:e.hotword,isInputChange:!1});var b=[{key:"parentSearchID",textValue:v}];e.crossExtReqParams&&b.push.apply(b,m()(e.crossExtReqParams)),p.a.$emit(p.k.GOTO,{type:e.businessType||0,isHomePage:e.isHomePage||p.b.isHomePage,page:h.f.RESULT,query:e.hotword||"",action:h.n.HOT_WORD,searchId:"",extReqParams:b}),p.b.setValue({type:e.businessType||0,isHomePage:e.isHomePage||p.b.isHomePage}),this._doSearchOperation({action:3,query:e.hotword,scene:h.e.S1S})}else n===h.c.vertical?this.onTapVert(e,t):n===h.c.weapp?this.M_go(fe(fe({},e),y?{}:{scene:202,startWeAppScene:1163})):n===h.c.bizSession?p.g.startSearchItemDetailPage({userName:e.userName,isTeachPage:!0,opType:n}):n===h.c.finder?p.i.openFinderFeed({feedId:e.feedId,extInfo:e.extInfo}):this.M_startDetail(e)}},onTapSetting:function(){if(this.bottomData){var e=["",p.b.sessionId,2].join(",");p.i.commonCgi({cgiName:l.a.mmDataReport,data:{clientversion:Number(p.b.clientVersion),device:this.deviceType,item_list:[{logid:24403,log_buffer:e}]}})}},getData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this;n._isLoadingSearchGuide=!0,t&&_.a.commit("index/getSearchRid"),e=fe(fe({},e),{},{query:e.query||(n.isNewHotList?"new":"")}),p.f.reportEventTrack({requestId:n.requestId,actionType:203,query:e.query});var i={guessReqInfo:{requestId:_.a.state.index.requestId,hotwordList:[]}};if((!this.redDotRecordMap[p.b.sessionId]||Global.os.ios&&this.fromEntryPage)&&(i.discoverReqInfo={clear_reddot:!0}),_.a.state.index.data){var r=_.a.state.index.data.data,s=r&&r.filter((function(e){return 39===e.type}))[0]||{};i.ctx=s.ctx||"",n.canRefreshHotword||(i.guessReqInfo.hotwordList=(s.items||[]).map((function(e){var t=fe({},e);return delete t.vueIsShow,delete t.vueDocId,t})),i.guessReqInfo.hotwordList.length&&(i.action_type=2))}p.i.getTeach(fe(fe({},p.b.getBase()),{},{type:n.M_os(p.b.type,0),scene:n.M_os(p.b.scene,h.e.S1S),requestType:d.a.requestType.net,requestId:_.a.state.index.requestId,guideInfo:JSON.stringify(i)}),fe({requestId:_.a.state.index.requestId},e)).catch((function(e){throw Object(I.a)(p.m.guess.discoverRecommendEmpty),Object(I.a)(p.m.guess.catchGetTeach),e}))}}};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ge={name:"Index",components:{Tail:u,exposureBlock:n(54).a},mixins:[me,O.a],methods:{_handleExpose:function(e){var t,n=this,i=[],r=[];if(e.forEach((function(e){var s=(e||"").split("##"),a=o()(s,2);t=a[0],a[1],t&&i.push(t);var c=e.match(/^\d+(?=#)/)||[],u=o()(c,1)[0];if(u){var p=n.$refs["IndexComp_".concat(u)];p&&p.onExpose&&r.push((function(){return p.onExpose.call(p,e)}))}})),i.length>0){var s=i.reduce((function(e,t){if(!t)return e;var n=t.split("#");if(n.length<2)return e;var i=Number(n[0]),r=Number(n[1]),s=e[e.length-1];return s&&s.length&&s[0]===i?s.push(r+1):e.push([i,r+1]),e}),[]),a=s.map((function(e){return e[0]})).join("_"),c=s.map((function(e){return e.slice(1).join(";")})).join("_"),u=["",2,a,n.$store.state.index.data.searchID||"",p.b.sessionId||"",c].join(",");p.i.commonCgi({cgiName:l.a.mmDataReport,data:{clientversion:Number(p.b.clientVersion),device:n.deviceType,item_list:[{logid:21103,log_buffer:u}]}})}if((p.a.$emit(p.k.INDEX_COMP_EXPOSE,e),n.bottomData)&&e.findIndex((function(e){return/^__bottomComp__/.test(e)}))>-1){var d=["",p.b.sessionId,1].join(",");p.i.commonCgi({cgiName:l.a.mmDataReport,data:{clientversion:Number(p.b.clientVersion),device:n.deviceType,item_list:[{logid:24403,log_buffer:d}]}})}},onTapVert:function(e,t){this._doSearchOperation(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({action:2,scene:h.e.S1S_VERTICAL},e))}}},ve=(n(1472),Object(c.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index__box",style:{paddingTop:e.realNativeHeight+"px"},attrs:{"data-p-0bfpe":""}},[n("div",{staticClass:"index__box-wrap"},[n("exposure-block",{attrs:{attr:"data-index-report-id"},on:{expose:e.M_exposeReportFor26897}},[n("transition",{attrs:{name:"allOperateItems"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showAllOperateItem,expression:"showAllOperateItem"}]},[n("vert-entries",{attrs:{items:e.vertEntries},on:{tap:e.onTap}}),e._l(e.ret,(function(t,i){return n("index-comp",e._b({key:t.realType,attrs:{"type-pos":i+1},on:{tap:e.onTap}},"index-comp",t,!1))})),e.bottomData?e.bottomData?n("bottom",{attrs:{data:e.bottomData},on:{"tap:setting":e.onTapSetting}}):e._e():n("tail",{directives:[{name:"show",rawName:"v-show",value:e.ret.length>0,expression:"ret.length > 0"}]})],2)])],1)],1)])}),[],!1,null,null,null));t.default=ve.exports},3498:function(e,t,n){"use strict";n(432)},359:function(e,t,n){},360:function(e,t,n){},3659:function(e,t,n){"use strict";n(468)},3667:function(e,t,n){"use strict";n(428)},3670:function(e,t,n){"use strict";n(469)},426:function(e,t,n){},428:function(e,t,n){},431:function(e,t,n){},432:function(e,t,n){},456:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){},464:function(e,t,n){},468:function(e,t,n){},469:function(e,t,n){},470:function(e,t,n){},471:function(e,t,n){},472:function(e,t,n){},481:function(e,t,n){"use strict";var i={props:{tags:{type:Array,default:function(){return[]}},noBg:Boolean},methods:{onTapTag:function(e,t){this.$emit("click",e,t)}}},r=n(4),s=Object(r.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("ui-tags",{staticClass:"colorful-tags",attrs:{flex:"",tags:this.tags,"no-bg":this.noBg},on:{"tap:tag":this.onTapTag}})}),[],!1,null,null,null);t.a=s.exports},648:function(e,t,n){"use strict";n(360)},720:function(e,t,n){"use strict";var i=n(1),r=n.n(i);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a={props:{items:{type:Array,default:function(){return[]}},realType:{type:Number,default:0}},computed:{list:function(){return this.items.map((function(e){return o(o({},e),{},{tag:e.tags&&e.tags[0]||null})}))}}},c=(n(648),n(4)),u=Object(c.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list"},e._l(e.list,(function(t,i){return n("div",{key:e.realType+"#"+i,staticClass:"item",attrs:{"data-expose-id":e.realType+"#"+i,role:"option","aria-label":i+1+" "+(t.hotword||"")+(t.tag&&t.tag.title||"")+"，链接"},on:{click:function(n){return e.$emit("tap",Object.assign({},t,{realType:e.realType,itemPos:i+1}))}}},[n("div",{staticClass:"item__index",attrs:{"aria-hidden":"true"}},[n("span",[e._v("\n        "+e._s(i+1)+"\n      ")])]),n("div",{staticClass:"item__bd",attrs:{"aria-hidden":"true"}},[n("span",{style:{marginRight:(t.tag?4:0)+"px"}},[e._v(e._s(t.hotword))]),t.tag?n("ui-tag",e._b({},"ui-tag",t.tag||{},!1)):e._e()],1)])})),0)}),[],!1,null,"c959a0d4",null);t.a=u.exports},740:function(e,t,n){"use strict";n(359)},742:function(e,t,n){"use strict";var i=n(1),r=n.n(i),s=n(0);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){return s.i.getCommonCgiData({cgiName:"SearchGlobalEduCommApi",data:a({searchId:"",sessionId:s.b.sessionId,scene:s.b.scene,device:s.b.device,H5Version:s.b.version,clientVersion:s.b.wechatVersion,type:1,query:""},e)})}},810:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(0),r=n(17),s=n(2),o=n(21),a={name:"SearchBar",components:{History:function(){var e=o.a.startImport("history");return n.e(237).then(n.bind(null,2221)).then((function(t){return o.a.afterImport(e,"history"),t}))},Suggestion:function(){var e=o.a.startImport("suggestion");return n.e(244).then(n.bind(null,2166)).then((function(t){return o.a.afterImport(e,"suggestion"),t}))}},data:function(){return{SearchInputId:u,typingInput:"",searchInput:"",lastInput:"",lastVertType:null,inputTimer:null,inputFocus:!1,showHistory:!0,showSuggestion:!1,selectIndex:-1,selectInput:"",transferred:!1,customActive:!1}},computed:{hisList:function(){return this.$refs.History&&this.$refs.History.historyListShow||[]},sugList:function(){return this.$refs.Sug&&this.$refs.Sug.suggestoinObj||[]},selectList:function(){try{return this.showHistory?this.hisList.map((function(e){return e.hotword})):this.sugList.reduce((function(e,t){var n=t.items,i=void 0===n?[]:n;return e.concat(i.map((function(e){return e.word||e.nickName})))}),[])}catch(e){return[]}},selectHisItem:function(){try{return this.showHistory&&this.selectIndex>=0?this.hisList[this.selectIndex]:null}catch(e){return null}},selectSugItem:function(){try{return this.showSuggestion&&this.selectIndex>=0&&this.sugList.reduce((function(e,t){var n=t.items,i=void 0===n?[]:n;return e.concat(i)}),[])[this.selectIndex]||null}catch(e){return null}},input:{get:function(){return this.selectInput||this.searchInput},set:function(e){this.inputFocus=!0,this.changeInput({query:e}),this.toggleHint(!e),this.clearSelect()}},isIndex:function(){return this.$route.name===s.f.INDEX},currentVert:function(){var e,t,n=this.isIndex?this.$store.state.index.vertEntries:this.$store.state.result.category,r=n.find((function(e){return e.selected}))||n.find((function(e){return e.type==i.b.type||e.businessType==i.b.type}))||n[0]||{};return{word:null!==(e=r.word)&&void 0!==e?e:r.hotword,type:null!==(t=r.type)&&void 0!==t?t:r.businessType}},placeholder:function(){var e="en"===i.b.lang?" ":"",t=this.currentVert,n=t.type?t.word:"";return"".concat(i.g.L("搜索")).concat(e).concat(n)}},watch:{$route:function(){var e=i.g.getUrlParamsResultOption();e.query!==this.searchInput&&this.changeInput(e)}},created:function(){window.reportVueCreated("src/components/search-bar/search-bar.vue"),this.searchInput=i.b.query||i.b.queryString.query||"",i.a.$on(r.c.onInputChange,this.changeInput),i.a.$on(r.c.onInputConfirm,this.onGoto),i.a.$on(i.k.GOTO,this.onGoto),i.a.$on(i.k.SEARCH_BAR_TRANSFER,this.transferDom),i.a.$on(i.k.SEARCH_BAR_ACTIVE,this.toggleActive),i.a.$on(i.k.BACK_BUTTON_CLICK,this.hideHint),i.a.$on(i.k.goToPageIndex,this.focusInput),window.addEventListener("mousedown",this.hideHint),window.addEventListener("blur",this.hideHint),window.addEventListener("focus",this.focusWhenIndex)},mounted:function(){document.dispatchEvent(new Event(i.k.SEARCH_BAR_READY))},methods:{transferDom:function(e){e&&(e.appendChild(this.$refs.SearchForm),this.transferred=!0,this.focusWhenIndex())},focusInput:function(e){var t=this;e&&(e.reset||e.clear)&&(this.clearInput(),this.clearSelect(),this.hideHint()),setTimeout((function(){t.$refs.SearchInput.focus()}))},focusWhenIndex:function(){this.isIndex&&this.focusInput()},onFocus:function(e){this.inputFocus=e,this.toggleHint()},onCancel:function(){!this.inputFocus&&this.input&&(this.input=""),this.clearSelect(),this.inputFocus=!1},onGoto:function(e){this.hideHint(e)},hideHint:function(e){var t=this;e&&e.query&&(this.searchInput=e.query),this.selectInput&&(this.searchInput=this.selectInput,this.emitInput()),e&&e.path&&(e.path.includes(this.$refs.SearchForm)||e.path.some((function(e){return e.htmlFor&&e.htmlFor===u})))||this.$nextTick((function(){t.$refs.SearchInput.blur(),t.inputFocus=!1}))},changeInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query||e.word||"";this.searchInput=t,this.typingInput=t},clearInput:function(){this.searchInput="",this.typingInput="",this.toggleHint(!0)},toggleHint:function(e){this.inputFocus&&(this.showHistory=!this.searchInput,this.showSuggestion=!!this.searchInput,(e||this.searchInput)&&this.emitInput())},toggleActive:function(e){this.customActive=e&&document.activeElement===this.$refs.SearchInput},emitInput:function(){var e=this;this.inputFocus||(this.inputFocus=!0),this.clearSelect(),this.inputTimer&&window.clearTimeout(this.inputTimer),this.inputTimer=setTimeout((function(){e.lastInput===e.searchInput&&e.lastVertType===e.currentVert.type||(e.lastInput=e.searchInput,e.lastVertType=e.currentVert.type,i.a.$emit(r.c.onInputChange,{query:e.searchInput,isInputChange:!0}))}),100)},emitSearch:function(e){if(this.emitSelect(),this.searchInput){if("btn"===e)this.emitConfirm(s.n.PC_SEARCH_BAR);else try{this.selectSugItem?this.$refs.Sug.tapIndex(this.selectIndex):this.selectHisItem?this.$refs.History.tapItem(this.selectHisItem):this.emitConfirm(void 0,s.p.ENTER_INPUT_CONFIRM)}catch(t){this.emitConfirm(void 0,s.p.ENTER_INPUT_CONFIRM)}this.hideHint()}else this.focusInput()},emitConfirm:function(e,t){i.a.$emit(i.k.GOTO,{page:s.f.RESULT,query:this.searchInput||"",action:e,parentType:t,searchId:""})},onSelect:function(e){if(this.inputFocus){var t=this.selectList.length;if(t){var n=this.selectIndex;-1===n?n=e>0?0:t-1:0===n&&e<0||n===t-1&&e>0?n=-1:n+=e,this.selectIndex=n,this.selectInput=this.selectList[n]||""}}else this.onFocus(!0)},emitSelect:function(){this.searchInput=this.selectInput||this.searchInput},alterSelect:function(e){this.selectIndex=e},clearSelect:function(){this.selectInput="",this.selectIndex=-1}}},c=(n(740),n(4)),u=(Object(c.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.transferred,expression:"transferred"}],ref:"SearchForm",staticClass:"search",on:{mousedown:function(t){!e.inputFocus&&e.onFocus(!0)}}},[n("div",{staticClass:"search-area"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.input,expression:"input",modifiers:{trim:!0}}],ref:"SearchInput",class:{empty:!e.typingInput&&!e.input},attrs:{id:e.SearchInputId,type:"text",name:"query",autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.input},on:{input:[function(t){t.target.composing||(e.input=t.target.value.trim())},function(t){e.typingInput=t.target.value}],keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.preventDefault(),e.onCancel.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.hideHint()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onSelect(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onSelect(1))}],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitSearch.apply(null,arguments)},blur:function(t){return e.$forceUpdate()}}}),n("label",{directives:[{name:"show",rawName:"v-show",value:e.input,expression:"input"},{name:"active",rawName:"v-active"}],staticClass:"search-area-clear weui-icon-clear active__opacity",attrs:{for:e.SearchInputId},on:{click:e.clearInput}}),n("button",{on:{mousedown:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.emitSearch("btn")}}},[e._v(e._s(e._f("L")("搜索")))]),n("label",{class:["search-area-bg",{active:e.inputFocus||e.customActive}],attrs:{for:e.SearchInputId}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.inputFocus&&(e.showSuggestion||e.showHistory),expression:"inputFocus && (showSuggestion || showHistory)"}],staticClass:"search-hint",on:{mouseout:function(t){return e.alterSelect(-1)}}},[n("suggestion",{directives:[{name:"show",rawName:"v-show",value:e.showSuggestion&&e.sugList.length,expression:"showSuggestion && sugList.length"}],ref:"Sug",attrs:{"select-index":e.selectIndex},on:{hover:e.alterSelect}}),n("history",{directives:[{name:"show",rawName:"v-show",value:e.showHistory,expression:"showHistory"}],ref:"History",attrs:{"select-index":e.selectIndex},on:{hover:e.alterSelect}})],1)])}),[],!1,null,"0941b748",null).exports,"weixin-search-input")}}]);