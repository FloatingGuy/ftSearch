(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1089:function(e,t,a){},1097:function(e,t,a){},1098:function(e,t,a){},1829:function(e,t,a){"use strict";a(1098)},2170:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a(660),s=a(3),c=a(17),m=a(2),o=a(16),r={components:{clientImage:a(82).a},mixins:[i.n,i.l],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},methods:{tapContact:function(e){var t,a,n=e.userName,s=e.matchWord,c=this;c.M_clickReport({actionType:m.g.VERTICAL},e),i.f.reportJumpType({businessType:c.data&&(c.data.real_type||c.data.type),subType:null===(t=c.data)||void 0===t?void 0:t.subType,pageType:m.h.pageType[null===(a=c.$route)||void 0===a?void 0:a.name],docId:c.item.docID,clickId:c.$store.state.result.state.clickReportId,clickType:1,jumpType:m.h.jumpType.VERTICAL}),c.M_openSearchWebView({actionType:3,extParams:encodeURIComponent(JSON.stringify({jumpFor:"contactPage",tagList:{tagType:m.q.SNSALBUM,tagName:s,userName:n},crossExtReqParams:[{key:"parentSearchID",textValue:this.M_composeParentSid({t:m.p.MORE,s:i.b.searchId,did:this.item.docID,rid:this.$store.state.result.previousRid})}]})),jumpUrl:"",type:8,query:s,scene:i.b.scene,searchId:i.b.searchId}),Object(o.g)(i.m.feature.localContactSearch.clickContact)}}},u=(a(3326),a(4)),d=Object(u.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contact",attrs:{"data-id":e.item.docID}},[a("div",{staticClass:"contact__inner"},[a("div",{staticClass:"moments_contact_body"},[a("div",{staticClass:"moments_media img img_multi"},e._l(e.item.subItems,(function(t,i){return a("div",{key:i,staticClass:"moments_contact_wrap",on:{click:function(a){return a.stopPropagation(),e.tapContact(t)}}},[i<4?a("div",{staticClass:"moments_contact"},[a("client-image",{key:e.item.docID,staticClass:"moments_contact_pic",attrs:{item:t,type:e.data.type}}),a("p",{staticClass:"moments_contact_nick",domProps:{innerHTML:e._s(e.xss(t.displayName))}})],1):e._e()])})),0)])])])}),[],!1,null,"c57aede8",null).exports,p=a(1),l=a.n(p);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={components:{UiMoment:a(3301).a},mixins:[i.n],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0},nickName:{type:String,default:""},thumb:{type:String,default:""}},computed:{momentProps:function(){var e=this.item;return{objectType:e.objectType,content:e.content,dateTime:e.dateTime,address:e.address,mediaTitle:e.mediaTitle,mediaList:e.mediaList,mediaSource:e.mediaSource,mediaPicUrl:e.mediaPicUrl,mediaMusicTitle:e.mediaMusicTitle,mediaMusicDesc:e.mediaMusicDesc,jumpInfo:e.jumpInfo}}},methods:{callTapCb:function(e){this.M_clickReport({objectType:this.item.objectType,expand2:e,noStartSearchItemDetailPage:!!e,ClickZone:0,ClickSource:this.item.objectType,actionType:3e3+m.l.MOMENT}),e||this.M_jump({jumpType:m.l.MOMENT,actionType:m.l.MOMENT,type:+this.data.type,userName:this.item.userName,snsid:this.item.snsid,objectXmlDesc:this.item.objectXmlDesc,fromMusicItem:!0,docID:this.item.docID})},onTap:function(){var e=this;Object(o.e)(i.m.detail.result.searchItem8),e.$data.isActive=!0,setTimeout((function(){e.$data.isActive=!1}),1e3),e.callTapCb()},onTapMedia:function(e){var t=e.snsImageIndex,a=void 0===t?0:t,i=e.cardFrame,n=void 0===i?{}:i;this.item.jumpInfo&&(this.M_clickReport({objectType:this.item.objectType,ClickZone:1,ClickSource:this.item.objectType,jumpUrl:this.item.jumpInfo.jumpType===m.l.H5?this.item.jumpInfo.jumpUrl:""},this.item.jumpInfo),this.M_go(f(f({},this.item),{},{jumpInfo:f(f({},this.item.jumpInfo),{},{snsImageIndex:a,cardFrame:n})})))}}},y=(a(3402),Object(u.a)(b,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"moment-normal active__item enriched",on:{click:this.onTap}},[t("ui-moment",this._b({attrs:{"nick-name":this.nickName,thumb:this.thumb,"thumb-size":40},on:{"tap:media":this.onTapMedia,"tap:mediaMore":this.onTap}},"ui-moment",this.momentProps,!1))],1)}),[],!1,null,"700ef356",null).exports),I=a(66),v=1,j={components:{momentContact:d,momentNormal:y},mixins:[i.n,i.l],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{view:"normal",isActive:!1,requestAvatarID:"",requestSnsID:"",nickName:"",thumb:"",requestSnsIDIdxMap:{}}},watch:{"item.snsid":function(e){Object(n.a)(this.item),this.getAvatar(),this.getSns()}},created:function(){var e=this;e.item.itemType===v&&(e.$data.view="contact"),I.a._getCache(e.item.userName)?e.nickName=I.a._getCache(e.item.userName):Object(n.a)(e.item),e.getAvatar(),e.getSns(),s.a.$on(s.b.CLIENT_NAME_DONE,(function(t){e.nickName=t[e.item.userName]||e.nickName,I.a._setCache(e.item.userName,e.nickName)})),c.b.onImageReady((function(t){t[e.requestAvatarID]&&(e.thumb=t[e.requestAvatarID],I.a._setCache(e.requestAvatarID,t[e.requestAvatarID])),e.item&&e.item.mediaList&&e.item.mediaList.length&&Object.keys(e.requestSnsIDIdxMap).forEach((function(a){if(t[a]){var i=a;e.$set(e.item.mediaList[e.requestSnsIDIdxMap[i]],"thumb",t[i]),e.$set(e.item.mediaList[e.requestSnsIDIdxMap[i]],"isDecode",!0),I.a._setCache(i,t[i])}}))}))},methods:{getAvatar:function(){var e=this;e.requestAvatarID="".concat(e.item.userName,"_").concat(e.data.type),I.a._getCache(e.requestAvatarID)?e.thumb=I.a._getCache(e.requestAvatarID):I.a._getAvatar({id:e.requestAvatarID,userName:e.item.userName,type:e.data.type})},getSns:function(){var e=this;e.item&&e.item.mediaList&&e.item.mediaList.length&&e.item.mediaList.forEach((function(t,a){a<4&&t.enc&&!t.isDecode&&(I.a._getCache("".concat(e.item.docID+a))?(e.$set(e.item.mediaList[a],"thumb",I.a._getCache("".concat(e.item.docID+a))),e.$set(e.item.mediaList[a],"isDecode",!0)):(e.requestSnsIDIdxMap["".concat(e.item.docID+a)]=a,I.a._getSns({id:"".concat(e.item.docID+a),snsid:e.item.snsid,objectXmlDesc:e.item.objectXmlDesc,imageUrl:t.thumb,index:a})))}))}}},_=(a(1829),Object(u.a)(j,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return"normal"==e.view?a("momentNormal",e._b({attrs:{"nick-name":e.nickName,thumb:e.thumb,"data-id":e.M_exposeId()}},"momentNormal",e.$props,!1)):a("momentContact",e._b({attrs:{"data-id":e.M_exposeId()}},"momentContact",e.$props,!1))}),[],!1,null,null,null));t.default=_.exports},3326:function(e,t,a){"use strict";a(1089)},3402:function(e,t,a){"use strict";a(1097)},660:function(e,t,a){"use strict";var i,n,s,c=a(0),m=a(3);t.a=(n=[],s={},function(e){n.some((function(t){return t.userName===e.userName}))||n.push({id:e.vueId,userName:e.userName,nickName:e.nickName||"",alias:e.alias||""}),i||(i=setTimeout((function(e){c.g.WeixinJSBridgeInvoke("getSearchDisplayNameList",{data:n.splice(0)},(function(e){if(e&&(0==+e.retCode||0==+e.ret)&&e.data){e.data="string"==typeof e.data?JSON.parse(e.data):e.data;var t={};e.data.forEach((function(e){t[e.userName]=e.displayName})),s=Object.assign(t),m.a.$emit(m.b.CLIENT_NAME_DONE,s)}})),i=null}),200))})}}]);