(window.webpackJsonp=window.webpackJsonp||[]).push([[6,276],{1164:function(t,e,i){},1165:function(t,e,i){},1166:function(t,e,i){},1168:function(t,e,i){},2369:function(t,e,i){"use strict";i(1168)},244:function(t,e,i){},248:function(t,e,i){},249:function(t,e,i){},263:function(t,e,i){(function(e){var i=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,r=parseInt,s="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,d=Math.max,p=Math.min,f=function(){return l.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var s=o.test(t);return s||a.test(t)?r(t.slice(2),s?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,i){var n,o,a,r,s,c,l=0,u=!1,v=!1,_=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var i=n,a=o;return n=o=void 0,l=e,r=t.apply(a,i)}function g(t){return l=t,s=setTimeout(C,e),u?y(t):r}function b(t){var i=t-c;return void 0===c||i>=e||i<0||v&&t-l>=a}function C(){var t=f();if(b(t))return k(t);s=setTimeout(C,function(t){var i=e-(t-c);return v?p(i,a-(t-l)):i}(t))}function k(t){return s=void 0,_&&n?y(t):(n=o=void 0,r)}function w(){var t=f(),i=b(t);if(n=arguments,o=this,c=t,i){if(void 0===s)return g(c);if(v)return s=setTimeout(C,e),y(c)}return void 0===s&&(s=setTimeout(C,e)),r}return e=h(e)||0,m(i)&&(u=!!i.leading,a=(v="maxWait"in i)?d(h(i.maxWait)||0,e):a,_="trailing"in i?!!i.trailing:_),w.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=c=o=s=void 0},w.flush=function(){return void 0===s?r:k(f())},w}}).call(this,i(53))},2662:function(t,e,i){"use strict";i(1165)},289:function(t,e,i){},290:function(t,e,i){},296:function(t,e,i){},3139:function(t,e,i){"use strict";i(296)},3205:function(t,e,i){"use strict";i(248)},3289:function(t,e,i){"use strict";i(244)},3692:function(t,e,i){"use strict";i(1164)},3693:function(t,e,i){"use strict";i(1166)},459:function(t,e,i){"use strict";var n={methods:{ozJump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;e.M_confirm_go(t.dialog,t)}},computed:{M_canHeaderJump:function(){return!!this.item.header&&!!(this.item.header.jumpUrl||this.item.header.weappUrl||this.item.header.jumpInfo)}}};e.a=n},480:function(t,e,i){"use strict";var n=i(493),o=i(0),a={mixins:[o.l,o.n],props:{useUiSource:{type:Boolean,default:!1},text:{type:[String,Number],default:""},size:{type:Number,default:32},iconUrl:{type:String,default:"https://res.wx.qq.com/a/fed_upload/658e7c8d-708d-499b-8d41-4cca1d510d03/play.svg"},ts:{type:Number,default:0},liveWatch:{type:Boolean,default:!1},like:{type:Boolean,default:!1},isHot:{type:Boolean,default:!1},duration:{type:Boolean,default:!1},durationAtLeftBottom:{type:String,default:""},isTop:{type:Boolean,default:!1},noIcon:{type:Boolean,default:!1},dateTime:{type:String,default:""},tag:{type:Object,default:function(){}},tags:{type:Array,default:function(){return[]}},liveEnd:{type:Boolean,default:!1},tapSourceAlone:{type:Boolean,default:!1},tapTextAlone:{type:Boolean,default:!1},title:{type:String,default:""},desc:{type:String,default:""},descList:{type:Array,default:function(){return[]}},source:{type:Object,default:function(){return{}}},friendInfo:{type:Object,default:function(){return{}}},showGradient:{type:Boolean,default:!1},gradientPadding:{type:[Number,String],default:8},maskType:{type:Number,default:1},tagDate:{type:String,default:""},tagTitle:{type:String,default:""},specialShadow:{type:Boolean,default:!1},hotComment:{type:Object,default:function(){return null}},textWithBg:{type:Boolean,default:!1}},computed:{maskTypeText:function(){return{1:"视频",2:"文章"}[this.maskType]},showAdvancedSpecialShadow:function(){return(!!this.dateTime||!!this.source||!!this.ts||this.text)&&(!!this.friendInfo&&!!this.friendInfo.avatars&&this.friendInfo.avatars.length>0||!!this.title||!!this.desc)&&!this.hasHotComment},hasHotComment:function(){var t,e;return!(null===(t=this.hotComment)||void 0===t||null===(e=t.content)||void 0===e||!e.trim())}},methods:{decodeEmoji:function(t){if(t){var e=t.replace(/\\n/gi," ");return Object(n.decode)(e)}return""},tapSource:function(t){this.$emit("tap:source",t,this.M_getItemPos(t))},tapHotComment:function(t){var e;null!==(e=this.hotComment)&&void 0!==e&&e.jumpInfo&&(t.stopPropagation(),this.M_go(this.hotComment.jumpInfo),this.M_clickReport({clickZone:1,itemPos:this.M_getItemPos(this.hotComment),reportItem:this.reportItem},this.hotComment))}}},r=(i(3205),i(484),i(4)),s=Object(r.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"play-mask",attrs:{role:"option"}},[t.tag?i("ui-tag",{staticClass:"mask-tag",attrs:{title:t.tag.title,type:t.tag.type}}):t._e(),t.tags?i("ui-tags",{staticClass:"mask-tag",attrs:{tags:t.tags}}):t._e(),i("div",{staticClass:"mask-tag scene-tag"},[t.tagDate?i("div",{staticClass:"scene-tag__date"},[i("span",[t._v(t._s(t.tagDate))])]):t._e(),t.tagTitle?i("div",{staticClass:"scene-tag__title"},[i("span",[t._v(t._s(t.tagTitle))])]):t._e()]),i("div",{staticClass:"extra-wrap",class:{"linear-gradient":t.showGradient&&!t.specialShadow},style:{padding:"number"==typeof t.gradientPadding?t.gradientPadding+"px":""+t.gradientPadding}},[t.specialShadow?i("div",{class:{"special-shadow":!0,"special-shadow--advanced":t.showAdvancedSpecialShadow,"special-shadow--hot-comment":t.hasHotComment}}):t._e(),t.hasHotComment?i("ui-clamp",{directives:[{name:"active",rawName:"v-active.stop",value:!!t.hotComment.jumpInfo,expression:"!!hotComment.jumpInfo",modifiers:{stop:!0}}],class:{"hot-comment":!0,active__opacity:!!t.hotComment.jumpInfo},attrs:{autoresize:"","max-lines":2,"raw-html":t.decodeEmoji(t.hotComment.content),"aria-label":t.hotComment.content,"data-report-id":t.M_itemReportId(t.hotComment,1)},nativeOn:{click:function(e){return t.tapHotComment.apply(null,arguments)}},scopedSlots:t._u([{key:"before",fn:function(){return[i("span",{staticClass:"hot-comment__item-wrap"},[i("span",{staticClass:"hot-comment__label"},[t._v(t._s(t.hotComment.label))])])]},proxy:!0},{key:"after",fn:function(){return[i("span",{staticClass:"hot-comment__item-wrap"},[i("span",{staticClass:"hot-comment__like"},[i("online-image",{staticClass:"icon-like",attrs:{url:"https://res.wx.qq.com/t/fed_upload/59ee2753-a126-4495-bd1e-daccbdc285bf/like2_outlined.svg"}}),i("span",{staticClass:"ui-aria-hidden"},[t._v(", 获得")]),i("span",[t._v(t._s(t.hotComment.likeNum))]),i("span",{staticClass:"ui-aria-hidden"},[t._v("个赞")])],1)])]},proxy:!0}],null,!1,151505576)},[i("span",{staticClass:"hot-comment__content"})]):[t.friendInfo&&t.friendInfo.avatars&&t.friendInfo.avatars.length>0?i("div",{staticClass:"social",attrs:{"aria-hidden":"true"}},[i("div",{staticClass:"social__avatars"},t._l(t.friendInfo.avatars,(function(t){return i("ui-image",{key:t,staticClass:"social__avatar",attrs:{url:t,size:28,mode:"avatar"}})})),1),t.friendInfo.text?i("div",{staticClass:"social__title"},[t._v("\n          "+t._s(t.friendInfo.text)+"\n        ")]):t._e(),t.friendInfo.afterText?i("div",{staticClass:"social__after-text"},[t._v("\n          "+t._s(t.friendInfo.afterText)+"\n        ")]):t._e(),i("online-image",{staticClass:"social__mark",attrs:{url:"https://res.wx.qq.com/t/fed_upload/947ffded-fd95-4cf1-853c-1f052774f6aa/like_outlined_medium.svg"}})],1):t._e(),t.title?i("div",{staticClass:"vc-title",domProps:{innerHTML:t._s(t.xss(t.title))}}):t._e(),t.desc?i("div",{staticClass:"vc-desc",domProps:{innerHTML:t._s(t.xss(t.desc))}}):t._e(),t.descList?i("div",{staticClass:"vc__desc--list"},t._l(t.descList,(function(e,n){return i("span",{key:e+n,staticClass:"pr-8"},[t._v("\n          "+t._s(e)+"\n          "),i("span",{staticClass:"ui-aria-hidden"},[t._v(",")])])})),0):t._e(),t.durationAtLeftBottom?i("div",{staticClass:"play-mask__text",attrs:{role:"option"}},[i("span",{staticClass:"ui-aria-hidden"},[t._v("时长：")]),i("span",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(t.durationAtLeftBottom))])]):t.dateTime?i("div",{staticClass:"datetime"},[t._v("\n        "+t._s(t.dateTime)+"\n      ")]):!t.useUiSource&&t.source?i("div",{directives:[{name:"active",rawName:"v-active.stop",value:t.tapSourceAlone,expression:"tapSourceAlone",modifiers:{stop:!0}}],staticClass:"vc-source",class:{"vc-source_with-tag":t.source.tag,active__opacity:t.source.jumpInfo&&t.tapSourceAlone},attrs:{"data-report-id":t.M_itemReportId(t.source)},on:{click:function(e){return e.stopPropagation(),t.tapSource(t.source)}}},[t.source.iconUrl?i("ui-image",{staticClass:"vc-source__thumb",attrs:{url:t.source.iconUrl,size:20,mode:"avatar",overlay:""}}):t._e(),t.source.title||t.source.mark?i("div",{staticClass:"vc-source-title-box"},[i("div",{staticClass:"vc-source__title"},[i("p",{staticClass:"vc-source__text",domProps:{innerHTML:t._s(t.xss(t.source.title))}}),i("div",{staticClass:"badges"},t._l(t.source.mark,(function(t){return i("ui-image",{key:t,attrs:{url:t,size:14,mode:"raw"}})})),1),i("p",{staticClass:"vc-source__dateTime",domProps:{innerHTML:t._s(t.xss(t.source.dateTime))}})])]):t._e()],1):t.source?i("ui-source",t._b({directives:[{name:"active",rawName:"v-active.stop",value:!!t.source.jumpInfo,expression:"!!source.jumpInfo",modifiers:{stop:!0}}],attrs:{"data-report-id":t.M_itemReportId(t.source)},nativeOn:{click:function(e){return e.stopPropagation(),t.tapSource(t.source)}},scopedSlots:t._u([{key:"after-text",fn:function(){},proxy:!0}])},"ui-source",t.source,!1)):t._e(),i("div",{staticClass:"extra-info-gap"}),t.ts||t.text?i("span",{directives:[{name:"active",rawName:"v-active.stop",value:t.tapTextAlone,expression:"tapTextAlone",modifiers:{stop:!0}}],staticClass:"play-mask__bg active__opacity"},[t.like?i("span",{staticClass:"play-mask__text",class:{"play-mask__text_with-bg":t.textWithBg},attrs:{role:"option"}},[t.isHot?i("online-image",{staticClass:"icon-like",attrs:{url:"https://res.wx.qq.com/t/fed_upload/1f3fb4f3-6753-466e-9a75-eef436716497/fire.svg"}}):i("online-image",{staticClass:"icon-like",attrs:{url:"https://res.wx.qq.com/t/fed_upload/b9567c10-5a84-47b5-ae89-8c71aedb8c92/like_outlined_medium.svg"}}),i("span",{staticClass:"ui-aria-hidden"},[t._v("，点赞：")]),i("span",[t._v(t._s(t.text))])],1):i("span",{staticClass:"play-mask__text",class:{"play-mask__text_with-bg":t.textWithBg},attrs:{role:"option"}},[t.durationAtLeftBottom?t._e():[t.ts||t.duration||t.text.toString().indexOf(":")>-1?i("span",{staticClass:"ui-aria-hidden"},[t._v("，时长：")]):t._e(),t.liveWatch?i("span",{staticClass:"ui-aria-hidden"},[t._v(t._s("，"+t.text))]):t._e(),t.ts?i("span",[t._v(t._s(t._f("mmss")(t.ts)))]):i("span",{attrs:{"aria-hidden":t.liveWatch}},[t._v(t._s(t.text))])],t.isTop?i("online-image",{staticClass:"icon-top",attrs:{url:"https://res.wx.qq.com/t/fed_upload/d649fe44-ec25-474b-bcc0-2281a0105218/top.svg"}}):t._e()],2)]):t._e(),i("span",{staticClass:"ui-aria-hidden"},[t._v(t._s(","+t.maskTypeText+"。"))])]],2),t.noIcon?t._e():i("div",{staticClass:"play-icon-wrapper"},[i("ui-image",{staticClass:"play-icon",attrs:{"aria-label":"播放",url:t.iconUrl,size:t.size,type:"img"}})],1),t.liveEnd?i("div",{staticClass:"live-end-tip"},[i("ui-image",{staticClass:"live-end-icon",attrs:{url:"https://res.wx.qq.com/a/fed_upload/4e09c767-7238-4dab-bb48-8da245eeb470/live_icon.svg",size:20}}),i("span",[t._v("直播已结束")])],1):t._e()],1)}),[],!1,null,"2e6b8585",null);e.a=s.exports},484:function(t,e,i){"use strict";i(249)},485:function(t,e,i){"use strict";function n(t){return!!t.jumpInfo||(!!t.jumpType||!(!t.userName&&!t.jumpUrl))}i.d(e,"a",(function(){return n}))},513:function(t,e,i){"use strict";i.r(e);var n=i(24),o=i.n(n),a=i(1),r=i.n(a),s=i(0),c=i(8),l=(i(12),i(2)),u=i(567),d=i(480),p=i(504),f={name:"ActivityCardContainer",components:{"v-mask":d.a,VideoPlayer:p.a},props:{aspectRatio:{type:Number,default:9/16},roundCornerSize:{type:Number,default:8},imageUrl:String,videoUrl:String,duration:[String,Number],strDuration:String,likeNum:String,noPlayIcon:{type:Boolean,default:!0},tag:Object,readNum:String,nonceId:String,exportId:String,pollingCgi:Object,activityBlock:Object},methods:{onVideoError:function(){this.$emit("video:error")},onTapMask:function(){this.$emit("tap:card")},onTapCard:function(){this.$emit("tap:card")}}},m=(i(3692),i(4)),h=Object(m.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-card-container-wrap",on:{click:function(e){return e.stopPropagation(),t.onTapCard.apply(null,arguments)}}},[i("video-player",{staticClass:"activity-card-container",attrs:{src:t.videoUrl,poster:t.imageUrl,"export-id":t.exportId,"nonce-id":t.nonceId,"round-corner":!0,"aspect-ratio":t.aspectRatio,"round-corner-size":t.roundCornerSize,"polling-cgi":t.pollingCgi,tag:t.tag,controls:t.noPlayIcon?[]:["sound","play"]}},[i("div",{staticClass:"slot-wrapper"},[t._t("default")],2)]),t.likeNum||t.duration||t.strDuration||t.readNum||t.activityBlock?i("v-mask",{attrs:{text:t.likeNum||t.duration||t.strDuration||t.readNum||t.activityBlock&&t.activityBlock.readNum,like:!!t.likeNum,"no-icon":!0,size:40,"gradient-padding":12,source:t.activityBlock.source,title:t.activityBlock.title,desc:t.activityBlock.desc,"desc-list":t.activityBlock.descList,"use-ui-source":"","special-shadow":""},nativeOn:{click:function(e){return t.onTapMask.apply(null,arguments)}}}):t._e()],1)}),[],!1,null,"3e9dee84",null).exports;function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var y={name:"ActivityCard",components:{ComplaintPopover:u.default,ActivityCardContainer:h},mixins:[s.n,s.l],props:{cardInfo:Object,noPlay:Boolean},data:function(){return{bubbleImg:"https://res.wx.qq.com/t/fed_upload/cda467f7-0a71-4cb8-91cc-4aabbc7a45e9/bubble.gif",shakeImg:"https://res.wx.qq.com/t/fed_upload/8e4d6632-fd0a-462a-8d38-9a5aec4e34d7/shake.gif?",endAction:Global.os.android?"terminate":"suspend",isShakeCardExpose:!1,isOverSpread:!1,openADFlag:!0,transitionFlag:!0,playingFlag:!1,showBubble:!1,useGif:!1,isFirst:!0}},computed:{activity:function(){return this.cardInfo.activityBlock},menus:function(){return this.cardInfo.menus},isShakeType:function(){return 51005==this.cardInfo.cardType}},mounted:function(){var t=this;this.isShakeType&&(new IntersectionObserver(this.handleObserve,{threshold:.95}).observe(this.$el),this.preloadAD(),s.a.$on(s.k.APP_VIEW_CHANGED,(function(e){"index"==e.page&&t.suspend()})),c.b.onDeviceMotionFired(this.onMotionFired),c.b.onWebviewResume(this.onResume),c.b.onWebviewPause(this.suspend))},beforeDestroy:function(){this.isShakeType&&(c.b.offDeviceMotionFired(this.onMotionFired),c.b.offWebviewResume(this.onResume),c.b.offWebviewPause(this.suspend))},methods:{onVideoError:function(t){this.$emit("video:error",t)},onTapPlay:function(t){this.$emit("tap:play",t)},onTapCard:function(t){this.$emit("tap:card",t)},onTapButton:function(t){this.$emit("tap:button",_(_({},t),{},{itemPos:this.M_itemReportIdMap[t.reportId]}))},onTapMenu:function(t){this.$emit("tap:menu",_(_({},t),{},{itemPos:this.M_itemReportIdMap[t.reportId]}))},onTapInfo:function(t,e){if(this.isShakeType&&!this.playingFlag){this.transitionFlag=!0,this.playingFlag=!0,this.isOverSpread=!0,this.refreshAnimation(),this.$emit("tap:info",t);this.$emit("shake:card",this.cardInfo,{actionId:2,actionCarrier:3}),e.stopPropagation()}},onMotionFired:function(){if(this.openADFlag){this.openADFlag=!1;this.$emit("shake:card",this.cardInfo,{actionId:7,actionCarrier:3})}},activate:function(){s.i.deviceMotionMonitor({action:"activate",amplitude:.65})},suspend:function(){s.i.deviceMotionMonitor({action:this.endAction})},preloadAD:function(){var t=l.h.jumpType,e=this.cardInfo,i=e.jumpInfoForShake,n=e.jumpInfo;n.jumpType==t.AD_NATIVE&&this.M_go({jumpInfo:_({preLoad:1},n)}),i.jumpType==t.AD_NATIVE&&this.M_go({jumpInfo:_({preLoad:1},i)})},handleObserve:function(t,e){var i=this;t.forEach((function(t){var e=t.isIntersecting;i.isShakeCardExpose=e,e?i.activate():i.suspend(),i.isFirst&&e&&i.startAnimation()}))},startAnimation:function(){var t=this,e=new Image;e.onload=function(){t.isFirst=!1,t.playingFlag=!0,t.useGif=!0,setTimeout((function(){t.useGif=!1,t.isOverSpread=!0,t.refreshAnimation();t.$emit("shake:card",t.cardInfo,{actionId:2,actionCarrier:3})}),1200)},e.src=t.shakeImg},onResume:function(){this.isShakeCardExpose&&this.activate(),this.openADFlag=!0},transitionEnd:function(t){var e=this;if(e.transitionFlag&&t.target===t.currentTarget){e.transitionFlag=!1;var i=new Image;i.onload=function(){e.useGif=!0,e.showBubble=!0,setTimeout((function(){e.useGif=!1,e.showBubble=!1,e.isOverSpread=!1,setTimeout((function(){e.playingFlag=!1}),400)}),3600)},i.src=e.shakeImg}},refreshAnimation:function(){var t=new Image;t.onload=function(){};var e=this.shakeImg.split("?")[0];this.shakeImg="".concat(e,"?time=").concat(Math.random()),t.src=this.shakeImg}}},g=(i(2662),Object(m.a)(y,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.cardInfo?i("activity-card-container",t._b({directives:[{name:"active",rawName:"v-active"}],staticClass:"media-card",attrs:{"read-num":"","no-play":t.noPlay},on:{"tap:card":function(e){return t.onTapCard(t.cardInfo)},"tap:play":function(e){return t.onTapPlay(t.cardInfo)},"video:error":function(e){return t.onVideoError(t.cardInfo)}}},"activity-card-container",t.cardInfo,!1),[t.cardInfo.complaint?i("complaint-popover",{staticClass:"complaint-popover",attrs:{complaint:t.cardInfo.complaint},on:{"confirm:negative":function(e){return t.$emit("confirm:negative")}},scopedSlots:t._u([{key:"trigger",fn:function(){return[i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"complaint-entry"},[i("div",[t._v(t._s(t.cardInfo.complaint.entryText))]),i("ui-arrow",{staticClass:"complaint-entry__arrow",attrs:{size:12,align:"flex",direction:"down"}})],1)]},proxy:!0}],null,!1,86335775)}):t._e(),t.activity&&(t.activity.title||t.activity.descList||t.activity.button||t.activity.source)||t.cardInfo.readNum?i("div",{staticClass:"activity",class:{overSpread:t.isOverSpread,shakeCardType:t.isShakeType}},[i("div",{staticClass:"activity-inner"},[i("div",{directives:[{name:"active",rawName:"v-active.stop",value:t.isShakeType,expression:"isShakeType",modifiers:{stop:!0}}],staticClass:"activity-info",attrs:{role:"button"},on:{click:function(e){return t.onTapInfo(t.cardInfo,e)}}},[t.isShakeType?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"activity-icon",on:{transitionend:t.transitionEnd}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showBubble,expression:"showBubble"},{name:"image",rawName:"v-image:custom",value:t.bubbleImg,expression:"bubbleImg",arg:"custom"}],staticClass:"gif-icon-bubble"}),i("svg-icon",{directives:[{name:"show",rawName:"v-show",value:!t.useGif,expression:"!useGif"}],attrs:{name:"shake"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.useGif,expression:"useGif"},{name:"image",rawName:"v-image:custom",value:t.shakeImg,expression:"shakeImg",arg:"custom"}],staticClass:"gif-icon-shake"})],1):t._e()]),t.activity.button?i("ui-button",{staticStyle:{"margin-left":"12px"},attrs:{mini:"",loading:t.cardInfo.loading,title:t.activity.button.title,"data-report-id":t.M_itemReportId(t.activity.button.reportId)},nativeOn:{click:function(e){return e.stopPropagation(),t.onTapButton(t.activity.button)}}}):t.cardInfo.readNum&&0!=t.cardInfo.readNum?i("div",{staticClass:"text-mask"},[t._v(t._s(t.cardInfo.readNum))]):t._e()],1)]):t.menus&&t.menus.length?i("div",{staticClass:"menus"},[i("div",{staticClass:"menus-inner"},t._l(t.menus,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:e.title+n,staticClass:"menu-item active__opacity",attrs:{role:"button","data-report-id":t.M_itemReportId(e.reportId,n+1)},on:{click:function(i){return i.stopPropagation(),t.onTapMenu(e)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])})),0)]):t._e()],1):t._e()}),[],!1,null,"adc23202",null).exports),b=i(39),C=i(459);function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?k(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var I={name:"ActivityCardSlide",components:{ActivityCard:g,UiScroll:i(809).a},mixins:[b.a,C.a,s.l],props:{list:Array,decayFactor:{type:Number,default:1},padding:Number},computed:{isOneCard:function(){return 1===this.list.length}},mounted:function(){this.list.length>=1&&this.$emit("expose:card",w(w({},this.list[0]),{},{index:0}))},methods:{onVideoError:function(t,e){this.$emit("video:error",w(w({},t),{},{index:e}))},onTapPlay:function(t,e){this.$emit("tap:play",w(w({},t),{},{index:e}))},onTapCard:function(t,e){this.$emit("tap:card",w(w({},t),{},{index:e,itemPos:this.M_getItemPos(t.reportId)}))},onTapButton:function(t,e){this.$emit("tap:button",w(w({},t),{},{index:e}))},onTapMenu:function(t,e){this.$emit("tap:menu",w(w({},t),{},{index:e}))},onTapInfo:function(t,e){this.$emit("tap:info",w(w({},t),{},{index:e}))},onShakeCard:function(t,e){this.$emit("shake:card",t,e)},onScrollEnd:function(t){var e=t.map((function(t,e){return w(w({},t),{},{index:e})})).filter((function(t){return t.include&&t.visible})),i=(e&&e[0]||{}).index;if(void 0!==i){var n=this.list[i];n.isShow||(this.$emit("onShow:card",{index:i,itemPos:this.M_getItemPos(n.reportId)}),this.$emit("expose:card",w(w({},this.list[i]),{},{index:i})))}},getItemWidth:function(){return this.$refs.card.$el.scrollWidth+8}}},x=(i(3693),Object(m.a)(I,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.list?i("div",{staticClass:"activity-card-slide"},[t.isOneCard?i("div",{staticClass:"only-media-card"},[i("activity-card",{attrs:{"card-info":t.list&&t.list[0],"data-report-id":t.M_itemReportId(t.list[0],1)},on:{"video:error":function(e){return t.onVideoError(e,0)},"tap:play":function(e){return t.onTapPlay(e,0)},"tap:card":function(e){return t.onTapCard(e,0)},"tap:button":function(e){return t.onTapButton(e,0)},"tap:menu":function(e){return t.onTapMenu(e,0)},"tap:info":function(e){return t.onTapInfo(e,0)},"shake:card":function(e){return t.onShakeCard(arguments,0)}}})],1):i("ui-scroll",{directives:[{name:"arrow-scroll",rawName:"v-arrow-scroll",value:{step:t.getItemWidth},expression:"{ step: getItemWidth }"}],attrs:{snap:"",padding:t.padding||16,items:t.list,wait:50,role:"listbox","decay-factor":t.decayFactor},on:{scrollEnd:t.onScrollEnd},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,o=e.index;return[i("activity-card",{ref:"card",attrs:{"card-info":n,"data-report-id":t.M_itemReportId(n,o+1)},on:{"video:error":function(e){return t.onVideoError(e,o)},"tap:play":function(e){return t.onTapPlay(e,o)},"tap:card":function(e){return t.onTapCard(e,o)},"tap:button":function(e){return t.onTapButton(e,o)},"tap:menu":function(e){return t.onTapMenu(e,o)},"tap:info":function(e){return t.onTapInfo(e,o)},"shake:card":function(e){return t.onShakeCard(arguments,o)}}})]}}],null,!1,2325869214)})],1):t._e()}),[],!1,null,"d4fe8a4c",null).exports),O=i(485),T=i(15),j=i(3),S=i(28),P=new(i(10).a)({COMMON:51001,MENUS:51002,STOCK:51003,SINGLE:51004,SHAKE:51005,VIDEO:51006,SUBSCRIBE:51007});function $(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var B={name:"Swiper",components:{ActivityCardSlide:x},mixins:[s.n,s.l],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},source:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0},reservePaddingH:{type:Boolean,default:!1},decayFactor:{type:Number,default:1}},data:function(){return{renderList:[]}},computed:{itemInfo:function(){return s.g.isObjectEmpty(this.source)?this.item:this.source},isService:function(){return!s.g.isObjectEmpty(this.source)},isEliminatingPaddingH:function(){return this.isService&&!this.reservePaddingH}},watch:{item:{handler:function(){this.renderList=(this.itemInfo.list||[]).map((function(t,e){return E(E({videoUrl:""},t),{},{loading:!1,isShow:0===e,id:s.g.generateGuuId()})}))},immediate:!0}},methods:{onTapCard:function(t){if(Object(O.a)(t)){var e=t.index;this.M_go(t),this.clickReport({clickZone:2,clickContent:"",index:e,reportItem:{expand:t.jumpInfo&&t.jumpInfo.expandReport,target:t}}),this.useReportCgi(e),this.$emit("tap")}},onTapButton:function(t){var e=this,i=t.index,n=this.renderList[i];if(t.cgiName){var o=t.cgiName,a=t.reportId;if(this.clickReport({clickZone:3,clickContent:t.title||"",index:i,reportItem:{target:t}}),n.loading)return;this.$set(n,"loading",!0);var r=setTimeout((function(){e.$set(n,"loading",!1)}),3e3);s.i.getCommonCgiData({cgiName:t.cgiName,data:t.param}).then((function(t){if(e.$set(n,"loading",!1),j.a.$emit(s.k.hideToast),0!==t.errCode&&t.errMsg)e.$store.commit("updateDialog",{confirm:"确定",cancel:!1,title:t.errMsg});else{var i=n.cardType==P.SUBSCRIBE||"finderLivingSubscribe"===o;if(i&&t.errCode<0)e.$store.commit("updateDialog",{confirm:"确定",cancel:!1,title:"操作失败"});else{""!==t.successMsg&&j.a.$emit(s.k.showToast,{action:i?S.a.pure:S.a.done,text:t.successMsg||"已领取到卡包"});var c=t.activityBlock&&t.activityBlock.button||t.button;c&&e.$set(n.activityBlock,"button",E({reportId:a},c)),r&&clearTimeout(r)}}}))}else Object(O.a)(t)?(this.clickReport({clickZone:3,clickContent:t.title||"",index:i,reportItem:{target:t}}),this.M_go(t),this.useReportCgi(i)):Object(O.a)(n)&&(this.clickReport({clickZone:3,clickContent:t.title||"",index:i,reportItem:{expand:n.jumpInfo&&n.jumpInfo.expandReport,target:E(E({},n),{},{itemPos:t.itemPos||this.M_itemReportId(n.reportId,i+1),reportId:t.reportId||n.reportId})}}),this.M_go(n),this.useReportCgi(i));this.$emit("tap")},onTapMenu:function(t){if(Object(O.a)(t)){this.clickReport({clickZone:3,clickContent:t.title||"",index:e,reportItem:{expand:t.jumpInfo&&t.jumpInfo.expandReport,target:t}});var e=t.index;this.M_go(t),this.useReportCgi(e),this.$emit("tap")}},onTapInfo:function(t){var e=t.index;this.clickReport({clickZone:1,clickContent:t.activityBlock.title,index:e})},useReportCgi:function(t){var e=this,i=this.renderList[t],n=i.reportCgi;n&&n.cgiName&&s.i.getCommonCgiData({cgiName:n.cgiName,data:n.param}).then((function(t){t.activityBlock&&t.activityBlock.button&&e.$set(i.activityBlock,"button",t.activityBlock.button)}))},clickReport:function(t){var e=t.clickZone,i=t.clickContent,n=void 0===i?"":i,o=t.index,a=void 0===o?0:o,r=t.reportItem,s=void 0===r?{}:r,c=this.renderList[a],l=this.M_clickReport({clickZone:e,clickContent:n,reportItem:s},s.target).clickId;T.c.activitySlide.reportClick({docID:this.item.docID,cardPos:a,businessType:this.data.real_type?this.data.real_type:this.data.type,cardType:c.cardType,itemTitle:c.activityBlock&&c.activityBlock.title,itemType:c.realJumpType,logKeyId:l})},onExposeCard:function(t){j.a.$emit(s.k.exposeAnalysis),T.c.activitySlide.reportExpose({docID:this.item.docID,cardPos:t.index,businessType:this.data.real_type?this.data.real_type:this.data.type,cardType:t.cardType,itemTitle:t.activityBlock&&t.activityBlock.title,itemType:t.realJumpType})},onShowCard:function(t){var e=this,i=t.index,n=t.itemPos,o=this.renderList.findIndex((function(t){return t.isShow}));if(o>-1){var a=this.renderList[o];a.isShow&&this.M_clickReport({ban12721Report:!0,banAdReport:!0,clickContent:a.activityBlock&&a.activityBlock.title,actionType:l.g.HOR_TOUCHMOVE,itemPos:n},a)}this.renderList.forEach((function(t,n){e.$set(t,"isShow",n===i)})),this.$emit("tap")},onShakeCard:function(t,e){var i=o()(t,2),n=i[0],a=i[1];if(n.jumpInfoForShake){var r=a.actionCarrier,c=a.actionId;7==c&&this.M_go({jumpInfo:n.jumpInfoForShake});var l=s.g.generateGuuId();T.c.activitySlide.reportShake({docID:this.item.docID,cardPos:e,logKeyId:l,businessType:this.data.real_type?this.data.real_type:this.data.type,cardType:n.cardType,actionId:c,actionCarrier:r}),this.$emit("tap")}}}},M=(i(2369),Object(m.a)(B,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide oz__margin-dense oz__item oz__body",class:{"service-swiper":t.isEliminatingPaddingH},attrs:{"data-id":t.M_exposeId()}},[i("activity-card-slide",{ref:"slide",attrs:{list:t.renderList,"parent-box-report-id":t.boxReportId,"parent-doc-report-id":t.docReportId,"parent-item-pos":t.parentItemPos,"decay-factor":t.decayFactor,padding:t.itemInfo.padding},on:{"tap:card":t.onTapCard,"tap:button":t.onTapButton,"tap:menu":t.onTapMenu,"tap:info":t.onTapInfo,"expose:card":t.onExposeCard,"onShow:card":t.onShowCard,"shake:card":t.onShakeCard}})],1)}),[],!1,null,"bf68ea44",null));e.default=M.exports},567:function(t,e,i){"use strict";i.r(e);var n=i(3),o=i(0),a=i(1),r=i.n(a),s=i(2),c=i(28);function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={mixins:[o.l,o.n],props:{complaint:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{innerWidth:window.innerWidth||document.documentElement.clientWidth||390,curActionIndex:-1,reasons:[]}},computed:{curAction:function(){return this.complaint.actions[this.curActionIndex]},showButton:function(){return this.reasons.some((function(t){return t.checked}))}},created:function(){n.a.$on(n.b.negativeHide,this.resetData)},destroyed:function(){n.a.$off(n.b.negativeHide,this.resetData)},methods:{resetData:function(){this.reasons=[],this.curActionIndex=-1},onTapJump:function(t){this.M_go(t),this.M_clickReport({feedBackType:4,banAdReport:!0,pickAdFeedBackReport:!0,clickContent:t.title},t)},handleConfirm:function(t){var e=t.actionType,i=t.reason,a=void 0===i?"":i,r=t.showToast,s=void 0===r||r,l=this.curAction;s&&n.a.$emit(n.b.showToast,{text:"已反馈",action:c.a.done}),o.i.getCommonCgiData({cgiName:"adcomplaint",data:{actionType:e,reason:a,query:o.b.query,adType:this.item.type||0,reportId:l.reportId,title:l.title,extBackComm:JSON.stringify(this.data.extBackComm||{})}}),this.$emit("tap:hide")},onTapConfirm:function(t){var e=this,i=this.reasons.filter((function(t){return t.checked})).map((function(t){return encodeURIComponent(t.wording)})).join("|");this.M_clickReport({feedBackType:5,banAdReport:!0,pickAdFeedBackReport:!0,clickContent:i,actionType:s.g.CONFIRM_CHANGE_CODE,adUnlikeReason:i},t),this.handleConfirm({actionType:1,reason:i,showToast:![2].includes(this.item.type)}),[2].includes(this.item.type)?this.$emit("confirm:negative"):setTimeout((function(){n.a.$emit(n.b.hideBox,{typePos:e.typePos})}))},onTapAction:function(t,e){var i=this,n=function(e){i.M_clickReport({feedBackType:e,banAdReport:!0,pickAdFeedBackReport:!0,clickContent:t.title,actionType:s.g.CONFIRM_CHANGE_CODE},t)};this.curActionIndex=e,this.reasons=(t.reason&&t.reason.list||[]).map((function(t){return u(u({},t),{},{checked:!1})})),this.reasons.length>0?n(3):(n(2),this.handleConfirm({actionType:2}))},onTapReason:function(t,e){t.checked=!t.checked}}},p=(i(619),i(4)),f={components:{reason:Object(p.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-wrap",style:{width:.77*t.innerWidth+"px"}},[t.reasons.length?t.curAction.reason?i("div",{staticClass:"reasons-wrap"},[i("div",{staticClass:"header-wrap"},[i("div",{staticClass:"title-part"},[i("p",{staticClass:"title-word"},[t._v("\n          "+t._s(t.curAction.replaceTitle||t.complaint.title)+"\n        ")]),i("p",{staticClass:"desc-word"},[t._v("\n          "+t._s(t.curAction.replaceDesc||t.complaint.desc)+"\n        ")])]),t.curAction.reason.confirm?i("div",{staticClass:"button-part"},[t.showButton?i("div",{staticClass:"weui-btn weui-btn_primary confirm-btn",attrs:{"data-report-id":t.M_itemReportId(t.curAction.reason.confirm.reportId)},on:{click:function(e){return e.stopPropagation(),t.onTapConfirm(t.curAction.reason.confirm)}}},[t._v("\n          "+t._s(t.curAction.reason.confirm.title)+"\n        ")]):t._e()]):t._e()]),i("div",{staticClass:"reasons"},t._l(t.reasons,(function(e,n){return i("div",{key:e.wording,staticClass:"reason",class:{reason__checked:e.checked},on:{click:function(i){return i.stopPropagation(),t.onTapReason(e,n)}}},[t._v("\n        "+t._s(e.wording)+"\n      ")])})),0)]):t._e():i("div",{staticClass:"actions-wrap"},[i("div",{staticClass:"header-wrap"},[i("div",{staticClass:"title-part"},[i("p",{staticClass:"desc-word"},[t._v("\n          "+t._s(t.complaint.desc)+"\n        ")]),i("p",{staticClass:"title-word"},[t._v("\n          "+t._s(t.complaint.title)+"\n        ")])])]),i("div",{staticClass:"actions"},t._l(t.complaint.actions,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active"}],key:e.title,staticClass:"action active__item",attrs:{"data-report-id":t.M_itemReportId(e.reportId,n+1)},on:{click:function(i){return i.stopPropagation(),t.onTapAction(e,n)}}},[i("online-image",{staticClass:"icon",attrs:{url:e.iconUrl}}),i("p",[t._v(t._s(e.title))])],1)})),0)]),t.complaint.outlink&&t.complaint.outlink.title?i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"jump-wrap active__mask",attrs:{"data-report-id":t.M_itemReportId(t.complaint.outlink.reportId)},on:{click:function(e){return e.stopPropagation(),t.onTapJump(t.complaint.outlink)}}},[i("div",{staticClass:"jump-in"},[t._v("\n      "+t._s(t.complaint.outlink.title)+"\n    ")])]):t._e()])}),[],!1,null,"00d01ed2",null).exports},mixins:[o.l,o.n],props:{complaint:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},computed:{className:function(){return this.complaint.type?"":"ad-complaint-popover"}},methods:{onEmitHide:function(){n.a.$emit(n.b.negativeHide)},onHideComplaint:function(){var t=this.$refs.popoverRef;t&&t.hide&&t.hide()}}},m=(i(620),i(3139),Object(p.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("PopOver",{ref:"popoverRef",staticClass:"complaint-popover",attrs:{"class-name":t.className,"spacing-v":16},on:{trigger:function(e){return t.M_clickReport({feedBackType:1,banAdReport:!0,pickAdFeedBackReport:!0,clickContent:t.complaint.entryText,actionType:3406},t.complaint)},hide:t.onEmitHide},nativeOn:{click:function(t){t.stopPropagation()},touchstart:function(t){t.stopPropagation(),t.preventDefault()},touchmove:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"trigger",fn:function(){return[i("div",{attrs:{"data-report-id":t.M_itemReportId(t.complaint.reportId)}},[t._t("trigger",(function(){return[i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"complaint-entry"},[i("div",[t._v(t._s(t.complaint.entryText))]),i("ui-arrow",{staticClass:"complaint-entry__arrow",attrs:{size:12,align:"flex",direction:"down"}})],1)]}))],2)]},proxy:!0},{key:"content",fn:function(){return[t._t("content",(function(){return[t.complaint.type?1===t.complaint.type?i("reason",t._b({on:{"tap:hide":t.onHideComplaint,"confirm:negative":function(e){return t.$emit("confirm:negative")}}},"reason",t.$props,!1)):t._e():i("div",{staticClass:"complaint-content"},[t.complaint.title?i("div",{staticClass:"complaint-content__bd"},[i("div",{staticClass:"complaint-content__title"},[t._v("\n            "+t._s(t.complaint.title)+"\n          ")]),t.complaint.actions&&t.complaint.actions.length>0?i("div",{staticClass:"complaint-content__actions"}):t._e()]):t._e(),t.complaint.outlink&&t.complaint.outlink.title?i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"complaint-content__link active__item",attrs:{role:"button","data-report-id":t.M_itemReportId(t.complaint.outlink.reportId)},on:{click:function(e){e.stopPropagation(),t.M_go(t.complaint.outlink),t.M_clickReport({feedBackType:4,banAdReport:!0,pickAdFeedBackReport:!0,clickContent:t.complaint.outlink.title},t.complaint.outlink)}}},[i("span",[t._v(t._s(t.complaint.outlink.title))])]):t._e()])]}))]},proxy:!0}],null,!0)})}),[],!1,null,"09a7f579",null));e.default=m.exports},619:function(t,e,i){"use strict";i(289)},620:function(t,e,i){"use strict";i(290)},809:function(t,e,i){"use strict";var n=i(1),o=i.n(n),a=i(33),r=i.n(a),s=i(23),c=i.n(s),l=i(263),u=i.n(l),d=i(34),p=i.n(d),f=i(35),m=i.n(f);function h(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var _=function(){function t(e){p()(this,t);var i=Object.assign({container:".swiper",item:".item",activeClass:"active",threshold:50,duration:300,padding:0,decayFactor:1,useCapture:!1},e);this.$el=i.el||document,this.$container=this.$el.querySelector(i.container),this.itemSelector=i.item,this._start={},this._move={},this._end={},this._ignore=!1,this._offset=0,this._eventHandlers={},this._options=i,this._current=0,this._padding=this._options.padding,this.$container.style.marginLeft="".concat(this._padding,"px"),this._bind()}return m()(t,[{key:"on",value:function(t,e){if(this._eventHandlers[t])throw new Error("event ".concat(t," is already register"));if("function"!=typeof e)throw new Error("parameter callback must be a function");return this._eventHandlers[t]=e,this}},{key:"_getContainerWidth",value:function(){return this._getItemElements().reduce((function(t,e){return t+e.rect.width}),0)}},{key:"_getItemElements",value:function(){return[].map.call(this.$container.querySelectorAll(this.itemSelector),(function(t){return{el:t,rect:t.getBoundingClientRect()}}))}},{key:"_getItemElementsCount",value:function(){return this.$container.querySelectorAll(this.itemSelector).length}},{key:"_getItemElement",value:function(t){var e=this.$container.querySelector("".concat(this.itemSelector,":nth-child(").concat(t+1,")"));return e?{el:e,rect:e.getBoundingClientRect()}:null}},{key:"_bind",value:function(){var t=this._options.useCapture;this._startEventListener=this._startEventListener.bind(this),this._moveEventListener=this._moveEventListener.bind(this),this._endEventListener=this._endEventListener.bind(this),this.$el.addEventListener("touchstart",this._startEventListener,t),this.$el.addEventListener("touchmove",this._moveEventListener,t),this.$el.addEventListener("touchend",this._endEventListener,t)}},{key:"_startEventListener",value:function(t){this._start.x=t.changedTouches[0].pageX,this._start.y=t.changedTouches[0].pageY,this._ignore=!1,this.$container.style["-webkit-transition"]="none",this.$container.style.transition="none"}},{key:"_moveEventListener",value:function(t){if(this._move.x=t.changedTouches[0].pageX,this._move.y=t.changedTouches[0].pageY,this._ignore||Math.abs(this._start.x-this._move.x)/1<Math.abs(this._start.y-this._move.y))this._ignore=!0;else{var e=(this._move.x-this._start.x)*this._options.decayFactor,i=+(e-this._offset);i=e>=0?Math.min(e-this._offset,.6*this._getItemElement(0).rect.width):Math.max(e-this._offset,.6*-this._getItemElement(this._getItemElementsCount()-1).rect.width+Math.min(0,this.$el.offsetWidth-this._getContainerWidth()-2*this._padding));var n="translate3d(".concat(i,"px, 0, 0)");this.$container.style["-webkit-transform"]=n,this.$container.style.transform=n,this._eventHandlers.scroll&&this._eventHandlers.scroll.apply(this,t),t.preventDefault()}}},{key:"_endEventListener",value:function(t){if(this._ignore?(this._end.x=this._start.x,this._end.y=this._start.y):(this._end.x=t.changedTouches[0].pageX,this._end.y=t.changedTouches[0].pageY),this._getContainerWidth()<=this.$el.offsetWidth)return this._current=0,this._show(this._current),void(Math.abs(this._start.x-this._end.x)+Math.abs(this._start.y-this._end.y)>1&&t.preventDefault());var e=(this._end.x-this._start.x)*this._options.decayFactor;this._prev=this._current;var i=this._offset-e;this._current=this._getCurrentByOffset(i,{round:!0}),this._prev===this._current&&(e>this._options.threshold&&this._current>0?this._current-=1:e<-this._options.threshold&&this._current<this._getItemElementsCount()-1&&(this._current+=1)),this._show(this._current)}},{key:"_getCurrentByOffset",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.items||this._getItemElements(),o=i.round||!1,a=0,r=t,s=h(n);try{for(s.s();!(e=s.n()).done;){var c=e.value,l=c.rect.width;if(o){if((r-=l)<-l/2)break;if(a+=1,r<l/2)break}else if(a+=1,(r-=l)<0)break}}catch(u){s.e(u)}finally{s.f()}return a}},{key:"_show",value:function(t){var e=this,i=this._getItemElements();this._offset=i.slice(0,t).reduce((function(t,e){return t+e.rect.width}),0);var n=Math.max(this._getContainerWidth()-this.$el.offsetWidth+2*this._padding,0);this._offset>n&&(this._offset=n,this._current=this._getCurrentByOffset(n,{items:i}));var o="translate3d(-".concat(this._offset,"px, 0, 0)"),a="".concat(this._options.duration,"ms");this.$container.style["-webkit-transition"]=a,this.$container.style.transition=a,this.$container.style["-webkit-transform"]=o,this.$container.style.transform=o,clearTimeout(this._timeout),this._timeout=setTimeout((function(){(e._current!=e._prev||null!==e._timeout||e._goto>-1)&&(e._eventHandlers.swiped&&e._eventHandlers.swiped.apply(e,[e._prev,e._current]),e._goto=-1,e._timeout=null)}),this._options.duration)}},{key:"go",value:function(t){if(!(t<0||t>this._getItemElementsCount()-1||t===this._current))return 0===t?(this._current=0,this._prev=0):(this._current=t,this._prev=t-1),this._goto=t,this._show(this._current),this}},{key:"refresh",value:function(){this._current=this._getCurrentByOffset(this._offset,{round:!0}),this._show(this._current)}}]),t}();function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var g={name:"UiScroll",props:{items:{type:Array,default:function(){return[]}},snap:{type:Boolean,default:!1},start:{type:Number,default:0},scrollToCenter:{type:Boolean,default:!1},wait:{type:Number,default:300},padding:{type:Number,default:16},decayFactor:{type:Number,default:1},useCapture:{type:Boolean,default:!1}},watch:{start:function(t){this._isMounted&&this.scrollTo(t)},items:function(){this.snap&&this.scrollTo(0)}},created:function(){this.onScrollEnd=u()(this.onScrollEnd.bind(this),this.wait)},mounted:function(){var t=this;return r()(c.a.mark((function e(){var i,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t,t.$refs.scroll&&t.snap&&(n=t.$el.querySelector(".ui-scroll__wrapper"))&&(n.style.marginLeft="".concat(t.padding-4,"px")),t.$refs.scroll){e.next=4;break}return e.abrupt("return");case 4:if(!t.snap){e.next=13;break}return e.next=7,t.$nextTick();case 7:t.$refs.scroll.querySelector(".ui-scroll__item"),(o=new _({el:t.$refs.scroll,container:".ui-scroll__wrapper",item:".ui-scroll__item",padding:t.padding-4,decayFactor:t.decayFactor,useCapture:t.useCapture})).on("scroll",(function(e){return t.$emit("scroll",e)})),o.on("swiped",(function(t,e){i.onScrollEnd()})),t.swiper=o,t.scrollTo(t.start);case 13:t.scrollToCenter&&t.scrollTo(t.start);case 14:case"end":return e.stop()}}),e)})))()},methods:{refresh:function(){this.swiper&&this.swiper.refresh()},onScroll:function(t){this.$emit("scroll",t),this.onScrollEnd()},calcVisibility:function(){var t=this;if(!this.$refs.scroll||!this.$refs.items)return[];var e=this.$refs.scroll;return this.parentRect=e.getBoundingClientRect(),this.$refs.items.map((function(e){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){o()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({el:e},t.getVisibility(e))}))},onScrollEnd:function(){this.$emit("scrollEnd",this.calcVisibility())},getVisibility:function(t){if(!t)return{visible:!1,include:!1};var e=t.getBoundingClientRect(),i=this.parentRect,n=function(t,e){return parseFloat(t)<=parseFloat(e)+1},o=Boolean(n(i.left,e.left)&&n(e.right,i.right)&&n(i.top,e.top)&&n(e.bottom,i.bottom));return{visible:Boolean((n(i.left,e.right)&&n(e.right,i.right)||n(i.left,e.left)&&n(e.left,i.right))&&(n(i.top,e.bottom)&&n(e.bottom,i.bottom)||n(i.top,e.bottom)&&n(e.bottom,i.bottom))),include:o}},scrollTo:function(t){if(t=Math.max(Math.min(t,this.items.length-1),0),this.snap)this.swiper.go(t);else{var e=this.$refs.items[t].getBoundingClientRect(),i=e.left,n=e.width,o=this.$refs.scroll.getBoundingClientRect(),a=o.left,r=o.width,s=this.$refs.scroll.scrollLeft,c=i-a;this.$refs.scroll.scrollTo({left:this.scrollToCenter?c+s-(r-n)/2:c+s,top:0,behavior:"smooth"})}}}},b=(i(3289),i(4)),C=Object(b.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.snap?i("div",{ref:"scroll",staticClass:"ui-scroll ui-scroll-snap"},[i("div",{staticClass:"ui-scroll__wrapper"},t._l(t.items,(function(e,n){return i("div",{key:e.id||e.docId||e.docID||n+ +new Date,ref:"items",refInFor:!0,staticClass:"ui-scroll__item",attrs:{"data-scroll-item-index":n}},[t._t("default",null,{item:e,index:n})],2)})),0)]):i("div",{ref:"scroll",staticClass:"ui-scroll ui-scroll-smooth",on:{scroll:function(e){return e.stopPropagation(),e.preventDefault(),t.onScroll.apply(null,arguments)}}},[i("div",{staticClass:"ui-scroll__wrapper"},t._l(t.items,(function(e,n){return i("div",{key:e.id||e.docId||e.docID||n+ +new Date,ref:"items",refInFor:!0,staticClass:"ui-scroll__item",attrs:{"data-scroll-item-index":n}},[t._t("default",null,{item:e,index:n})],2)})),0)])}),[],!1,null,"f8361092",null).exports;C.install=function(t){t.component(C.name,C)};e.a=C}}]);