(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{1214:function(t,e,i){"use strict";i(657)},1347:function(t,e,i){"use strict";i(508)},1348:function(t,e,i){"use strict";i(551)},1473:function(t,e,i){"use strict";i(475)},1474:function(t,e,i){"use strict";i(494)},1477:function(t,e,i){"use strict";i(501)},1478:function(t,e,i){"use strict";i(503)},1480:function(t,e,i){"use strict";i(509)},1481:function(t,e,i){"use strict";i(523)},1484:function(t,e,i){"use strict";i(553)},1485:function(t,e,i){"use strict";i(555)},1488:function(t,e,i){"use strict";i(554)},1489:function(t,e,i){"use strict";i(556)},1491:function(t,e,i){"use strict";i(557)},1493:function(t,e,i){"use strict";i(558)},1494:function(t,e,i){"use strict";i(559)},1502:function(t,e,i){"use strict";i(569)},1504:function(t,e,i){"use strict";i(571)},1505:function(t,e,i){"use strict";i(573)},1512:function(t,e,i){"use strict";i(582)},1520:function(t,e,i){"use strict";i(637)},1533:function(t,e,i){"use strict";i(608)},1534:function(t,e,i){"use strict";i(609)},1535:function(t,e,i){"use strict";i(610)},1536:function(t,e,i){"use strict";i(611)},1538:function(t,e,i){"use strict";i(671)},1539:function(t,e,i){"use strict";i(672)},1540:function(t,e,i){"use strict";i(621)},1554:function(t,e,i){"use strict";i(626)},1655:function(t,e,i){"use strict";i(627)},1658:function(t,e,i){"use strict";i(646)},1756:function(t,e,i){"use strict";i(647)},1769:function(t,e,i){"use strict";i(649)},1806:function(t,e,i){"use strict";i(650)},1837:function(t,e,i){"use strict";i(651)},1903:function(t,e,i){"use strict";i(606)},1928:function(t,e,i){"use strict";i(653)},1974:function(t,e,i){"use strict";i(654)},1998:function(t,e,i){"use strict";i(656)},2056:function(t,e,i){"use strict";i(602)},2158:function(t,e,i){"use strict";i.r(e);var n=i(24),o=i.n(n),r=i(32),s=i.n(r),a=i(33),c=i.n(a),l=i(1),u=i.n(l),d=i(23),p=i.n(d),h=i(0),f=i(2);function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var _=4,b=5,y=6,v=7,g={props:["block","typePos"],data:function(){return{}},mixins:[h.n],methods:{_timeAbridge:function(t){return"number"!=typeof(t=+t)?0:Math.floor(t/1e3)},_report:function(t){var e="",i=t.optype,n=!1;try{e=JSON.parse(h.b.queryString.extInfo).globalId}catch(o){}if(i===_)e&&(n=this.block.items.some((function(t){return t.globalId===e})));else if(i===b){if(e)return;(e=h.d.getStore("globalId"))&&(n=this.block.items.some((function(t){return t.globalId===e})))}else n=!0;n&&this._reportCommon(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t))},_reportCommon:function(t){var e=Object.assign({searchreddotreport:1,nettype:h.b.netType,reddottype:0,reddotid:h.d.getStore("globalId"),reddotconsumets:0,optype:0,notshowreason:"",reddotts:h.d.getStore("globalIdTs")||this._timeAbridge(new Date)},t);h.g.reportCommon(h.g.object2params(e)),h.g.object2params(e)},_storeRedMark:function(){var t="";try{t=JSON.parse(h.b.queryString.extInfo).globalId}catch(e){}t&&(h.d.store("globalId",t),h.d.store("globalIdTs",this._timeAbridge(new Date)))},_detectRedMark:function(t){var e=h.d.getStore("globalId");return!(!e||e!==t)&&(this._report({optype:y,reddotid:e}),!0)},onTap:function(t,e){var i=this;t.optype===f.c.h5?i.M_startDetail({type:2,jumpUrl:t.jumpUrl}):t.optype===f.c.commonSearch?i.M_openSearchWebView({actionType:7,type:0,query:"",scene:t.scene,isSug:0,isHomePage:1,docID:""}):i.M_openSearchWebView({actionType:5,searchId:i.$store.state.teach.recommendId,query:"看一看",type:2,jumpUrl:"",tagPageType:1,extParams:JSON.stringify(Object.assign({tagName:t.hotword,tagId:t.channelId,navigationId:t.navigationId||""},t)),tagId:t.channelId,navigationId:t.navigationId||"",navBarColor:"#FFFFFF",statusBarStyle:"black",nativeConfig:{title:t.headTitle||""},topStoryScene:h.b.queryString.topStoryScene||0});var n=h.d.getStore("globalId");if(t.globalId===n){var o=e.currentTarget.querySelector(".rec-channel__item-inner");o.className=o.className.replace("red-mark",""),h.d.remove("globalId"),this._report({optype:v,reddotid:n,reddotconsumets:i._timeAbridge(new Date)})}h.f.teach.reportRecClick({channelid:t.channelId,navigationid:t.navigationId||"",guidetype:i.block.type,searchid:i.$store.state.teach.recommendId})}},created:function(){this._storeRedMark(),this._report({optype:_}),this._report({optype:b})}},w=(i(1473),i(4)),I=Object(w.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"teach-block rec-channel"},[i("p",{staticClass:"teach-block__title"},[t._v(t._s(t.block.title))]),i("ul",{staticClass:"rec-channel__list"},t._l(t.block.items,(function(e,n){return i("li",{key:n,attrs:{"data-expose-id":e.channelId+"_"+(e.navigationId||""),role:"button"}},[i("div",{staticClass:"rec-channel__item",on:{click:function(i){return t.onTap(e,i)}}},[i("span",{staticClass:"rec-channel__item-inner",class:{"teach__red-mark":t._detectRedMark(e.globalId)}},[t._v(t._s(e.hotword))])])])})),0)])}),[],!1,null,null,null).exports,O={mixins:[h.n],props:{block:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0}},data:function(){return{showData:[],isShowAll:!1}},computed:{titleClass:function(){return"teach__title"}},created:function(){window.reportVueCreated("src/views/teach/components/recommend_category/recommend_category.vue")},methods:{_handleData:function(){},onTap:function(t){var e=this,i={searchId:e.$store.state.teach.recommendId};t.jumpUrl&&(i.jumpUrl=e.M_composeUrl(t.jumpUrl,{fontRatio:+h.b.queryString.fontRatio||1})),e.M_go(Object.assign({},t,i)),h.f.teach.reportRecClick({channelid:t.channelId,navigationid:t.navigationId||"",guidetype:e.block.type,searchid:e.$store.state.teach.recommendId})},showALL:function(){var t=this;t.isShowAll?(t.showData=t.block.items,t.isShowAll=!1,h.f.teach.reportRecClick({channelid:0,navigationid:"",searchid:t.$store.state.teach.recommendId,guidetype:t.block.type,foldtype:1})):(t.showData=t.block.items.slice(0,t.block.showNum||7),t.isShowAll=!0,h.f.teach.reportRecClick({channelid:0,navigationid:"",searchid:t.$store.state.teach.recommendId,guidetype:t.block.type,foldtype:2}))}}},C=(i(1474),Object(w.a)(O,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"teach-block rec-category"},[i("p",{class:[t.titleClass]},[t._v("\n    "+t._s(t.block.title)+"\n  ")]),i("ul",{staticClass:"rec-category__ul"},t._l(t.showData,(function(e,n){return i("li",{key:n,staticClass:"rec-category__list",attrs:{"data-expose-id":e.channelId+"_"+(e.navigationId||""),role:"button"}},[i("div",{staticClass:"rec-category__item",attrs:{"data-index":n},on:{click:function(i){return t.onTap(e)}}},[t._v("\n        "+t._s(e.hotword)+"\n      ")])])})),0)])}),[],!1,null,null,null).exports),x={components:{resultBiz:i(2094).default},mixins:[h.n,h.l],props:["typePos","block"],data:function(){return{}},created:function(){window.reportVueCreated("src/views/teach/components/big-avatar-biz/big-avatar-biz.vue")},methods:{}},k=(i(1477),Object(w.a)(x,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"big-avatar-biz"},[i("p",{staticClass:"teach__title teach__biz-title"},[t._v("\n    "+t._s(t.block.title||"公众号")+"\n  ")]),i("ul",{staticClass:"teach__list"},t._l(t.block.items,(function(e,n){return i("result-biz",{key:e.aliasName,attrs:{item:e,data:t.block,"type-pos":t.typePos+1,pos:n+1}})})),1)])}),[],!1,null,"77d369c8",null).exports),E=i(718),T=i(16),P=i(3),S=i(25),j=i(482),R=i(719);function N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var D={components:{HistoryItem:E.a,HistoryClearItem:R.a},mixins:[h.n,h.l,j.a],props:["block","typePos"],data:function(){return{isIOS8:Global.os.ios&&parseInt(h.b.os.version)<9}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?N(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(S.c)({requestId:function(t){return t.teach.requestId}})),methods:{_convertDeletable:function(t){var e=h.g.object2params(t);return"ishistorydel=1&".concat(e)},onTap:function(t){var e=this,i=this.block.items[t],n=i.hotword;if(i.opType=i.optype||i.opType||f.c.search,h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id,blockWord:this.block.title,blockExpand:this.block.expand,blockIndex:this.typePos,itemId:i.id,itemWord:i.hotword,itemExpand:i.expand,itemIndex:t+1}),h.f.teach.reportCommonNewClick({searchId:h.b.searchId,requestId:this.requestId,itemInfo:this.block.vueBlockId&&this.block.vueBlockId.replace(/^block:/,"")||"",docInfo:i.vueItemId&&i.vueItemId.replace(/^item:/,"")||""}),this.M_clickReportFor26897(i,t+1,{actionId:{1:3004,4:3002}[parseInt(i.opType)]}),h.b.scene==f.e.HOME_TOP_ENTRY&&i.source&&Object.keys(i.source||{}).length)this.M_go(i.source);else if(1==i.opType){var o={crossExtReqParams:[{key:"parentSearchID",textValue:e.M_composeParentSid({t:f.p.TEACH_HISTORY,s:e.$store.state.teach.recommendId,did:i.hotword,rid:e.$store.state.index.requestId})}]};i.mixerCommonContext&&o.crossExtReqParams.push({key:"mixerCommonContext",textValue:i.mixerCommonContext}),e.M_checkSpecialSearchBeforeLaunchNewSearch({query:n,callback:function(){h.g.setSearchInputWord({query:n,isInputChange:!1}),P.a.$emit(P.b.GOTO,{page:f.f.RESULT,query:n,searchId:"",extReqParams:o.crossExtReqParams})},extParams:o})}else 4==i.opType&&e.M_startDetail({type:2,jumpUrl:i.jumpUrl});Object(T.g)(h.m.feature.teachHis),1024===h.b.type&&h.f.reportFictionClick({blockType:this.block.type,pos:t+1,word:i.hotword})},tapDelete:function(t){var e=this.block.items[t];if(h.g.reportRealTime({scene:h.b.scene,recommendId:this.$store.state.teach.recommendId,businessType:h.b.type,docId:e.hotword,docPos:t,typePos:this.typePos,isHomePage:0,sceneActionType:h.b.sceneActionType}),this.reportFeatureClick(5),this.M_clickReportFor26897(e,t+1,{actionId:f.g.CLICK_DELETE}),h.f.teach.reportCommonClick({isDelete:1,blockType:this.block.type,blockId:this.block.id,blockWord:this.block.title,blockExpand:this.block.expand,blockIndex:this.typePos,itemId:e.id,itemWord:e.hotword,itemExpand:e.expand,itemIndex:t+1}),1024===h.b.type){var i={scene:h.b.scene,query:e.hotword,businesstype:h.b.type,id:e.id||"",clienttimestamp:(new Date).getTime()};h.g.reportCommon(this._convertDeletable(i)),h.f.reportFictionClick({blockType:this.block.type,pos:t+1,word:e.hotword,isDelete:1})}this.$store.commit("teach/deleteData",{dataIdx:this.typePos-1,itemIdx:t})},tapClear:function(){h.f.teach.reportCommonClick({isDelete:2,blockId:"删除所有历史",blockWord:this.block.deleteWord,blockExpand:this.block.expand,blockIndex:this.typePos}),this.reportFeatureClick(6),this.M_clickReportFor26897("",0,{actionId:f.g.CLICK_CLEAR}),this.$store.commit("teach/clearData",{isDelete:!1,dataIdx:this.typePos-1})},reportFeatureClick:function(t){h.f.teach.reportFeatureBtnClick({featureInfo:t,actionId:2,searchId:h.b.searchId,requestId:this.requestId,itemInfo:this.block.vueBlockId.replace(/^block:/,""),businessType:h.b.type})}}},M=(i(1478),Object(w.a)(D,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.block.items&&t.block.items.length?i("div",{staticClass:"history-box",attrs:{"data-teach-report-id":"his-"+t.block.vueBlockId}},[t.block.title?i("p",{staticClass:"teach__title"},[t._v("\n    "+t._s(t.block.title)+"\n  ")]):t._e(),i("div",{staticClass:"history-box__bd"},[t._l(t.block.items,(function(e,n){return i("history-item",{key:n,staticClass:"history-box__item",attrs:{title:e.hotword,tags:e.updateInfo?[{title:e.updateInfo,type:3}]:[],"data-expose-id":e.id,"data-teach-report-id":"his-"+e.vueItemId+"@"+t.block.vueBlockId,"data-new-teach-report-id":""+t.M_getItemReportId(e,n+1),"delete-icon-props":{"data-teach-report-id":"his-feature:5@"+t.block.vueBlockId}},on:{tap:function(e){return t.onTap(n)},"tap:delete":function(e){return t.tapDelete(n)}}})})),t.block.deleteWord?i("history-clear-item",{attrs:{title:t.block.deleteWord,"data-teach-report-id":"his-feature:6@"+t.block.vueBlockId},nativeOn:{click:function(e){return t.tapClear.apply(null,arguments)}}}):t._e()],2)]):t._e()}),[],!1,null,null,null).exports),H=i(17),A=i(8);function L(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var $,B=!1,F={props:{block:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0}},data:function(){return{title:"",path:"",height:"",iconHeight:"80px"}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?L(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({showTitle:{get:function(){return this.title||this.block.title},set:function(t){this.title=t}},showPath:{get:function(){return this.path||this.block.iconUrl},set:function(t){this.path=t}}},Object(S.c)({baseInfo:function(t){return t.teach.similar.baseInfo}})),created:function(){window.reportVueCreated("src/views/teach/components/similar-emoticon/button.vue");var t=this;h.a.$on("emoticonIsChosen",(function(e){t.showTitle="轻触更换表情",e.asyncDownload||(t.showPath=e.thumbPath,t.clearTeachData())})),h.a.$on(P.b.APP_VIEW_CHANGED,(function(e){e.page!==f.f.TEACH&&(t.showPath="")})),H.b.onImageReady((function(e){e[t.baseInfo.md5]&&(t.showPath=e[t.baseInfo.md5])})),h.f.teach.reportSimilarPlus({reportType:2,requestId:t.baseInfo.requestId,searchId:t.baseInfo.searchId}),window.addEventListener("scroll",t._scroll,!1)},mounted:function(){var t=this;this.height="".concat(this.$refs.button.offsetHeight,"px"),this.block.autoPop&&!B&&(this.$nextTick((function(){t.tap(!1)})),B=!0)},destroyed:function(){window.removeEventListener("scroll",this._scroll)},methods:{_touchStart:function(){$=window.scrollY},_scroll:function(){var t=this,e=window.scrollY,i=window.innerHeight||document.documentElement.clientHeight,n=(window.pageYOffset||document.documentElement.scrollTop)+i,o=t.$root.$el.scrollHeight;if(e<0)t.$refs.button.style.position="absolute";else if(n>o)t.$refs.button.style.position=o==i?"absolute":"fixed";else{var r;if(t.$refs.button.style.position="fixed",$&&(r=e-$),$=e,!r)return;var s=parseInt(t.iconHeight)-r/4,a=parseInt(t.height)-r/4;s=Math.min(s,80),s=Math.max(s,50),a=Math.min(a,180),a=Math.max(a,150),t.iconHeight="".concat(s,"px"),t.height="".concat(a,"px")}},clearTeachData:function(){var t=this.$store.state.teach.teachData;this.$store.dispatch("teach/updateData",{data:Object.assign({},t,{data:[Object.assign({},this.block,{iconUrl:this.showPath,title:"轻触更换表情"})]})})},tap:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this;e.$store.dispatch("teach/similar/generateRid"),A.a.gotoEmoticonPad({requestId:e.baseInfo.requestId,sessionId:h.b.sessionId,scene:h.b.scene}),t&&h.f.teach.reportSimilarPlus({reportType:e.baseInfo.md5?3:1,requestId:e.baseInfo.requestId,searchId:e.baseInfo.searchId}),t&&Object(T.g)(h.m.feature.smiliarTapTeach)}}},W=(i(1347),Object(w.a)(F,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"similar-button-wrap",style:{height:t.height}},[i("div",{ref:"button",staticClass:"similar-button"},[i("div",{staticClass:"similar-button__info",attrs:{"aria-label":t.showTitle,role:"button"},on:{click:t.tap}},[i("div",{staticClass:"similar-button__icon-wrap",style:{height:t.iconHeight,width:t.iconHeight}},[t.showPath?i("div",{staticClass:"similar-button__sticker",style:{backgroundImage:"url("+t.showPath+")"}}):i("svg-icon",{staticClass:"similar-button__icon",attrs:{name:"stickers"}})],1),i("div",{staticClass:"similar-botton__title"},[t._v("\n        "+t._s(t.showTitle)+"\n      ")])])])])}),[],!1,null,null,null).exports),q=i(82);function U(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var G={album:1,albumSticker:2,single:3,custom:4},V={created:function(){window.reportVueCreated("src/views/teach/components/similar-emoticon/emoticon-item.vue")},components:{clientImage:q.a},props:{emoticon:{type:Object,default:function(){return{}}},pos:{type:Number,default:0}},data:function(){return{}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({clientImage:function(){var t=this.emoticon.type;return[G.albumSticker,G.single].indexOf(t)>-1}},Object(S.c)({baseInfo:function(t){return t.teach.similar.baseInfo}})),methods:{tap:function(){var t,e=this;h.i.openSticker(Object.assign({position:e.pos,docID:e.emoticon.docID,searchId:e.baseInfo.searchId,fromSearchType:2,pageType:f.o[null===(t=e.$route)||void 0===t?void 0:t.name]},e.emoticon)),h.f.teach.reportSimilarClick({clickMd5:e.emoticon.md5,queryMd5:e.baseInfo.md5,offset:e.baseInfo.offset,searchId:e.baseInfo.searchId,tab:e.baseInfo.tab,requestId:e.baseInfo.requestId,pos:e.pos}),Object(T.g)(h.m.feature.smiliarTapSticker)}}},K=(i(1480),Object(w.a)(V,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"similar-item",attrs:{"data-expose-id":this.emoticon.md5,"aria-hidden":"true"},on:{click:this.tap}},[e("client-image",{staticClass:"similar-item__inner",attrs:{item:this.emoticon,mode:"sticker"}})],1)}),[],!1,null,null,null).exports),Y=i(81);function z(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function X(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?z(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):z(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Z=!1,Q={components:{emoticon:K,scroll:Y.a},data:function(){return{show:!1,loading:""}},computed:X(X({},Object(S.c)({baseInfo:function(t){return t.teach.similar.baseInfo},emoticons:function(t){return t.teach.similar.emoticons},data:function(t){return t.teach.similar.data},teachObjList:function(t){return t.teach.teachData&&t.teach.teachData.data}})),{},{loadingWord:{get:function(){return this.loading||"加载中..."},set:function(t){this.loading=t}}}),watch:{data:function(t){t.nomoreText&&(this.loadingWord=t.nomoreText)}},created:function(){var t=this,e=this;h.a.$on("emoticonIsChosen",(function(i){t.teachObjList.filter((function(t){return 13===t.type})).length&&(e.emoticonReset(),e.show=!0,e.$store.commit({type:"teach/similar/updateBase",md5:i.md5,tab:i.tab,aesKey:i.aesKey,emojiUrl:i.emojiUrl}),e.getData({offset:0}))})),h.a.$on("onSimilarEmoticonReady",(function(t){Z=!1,e.$store.dispatch({type:"teach/similar/dataReady",data:t})})),h.a.$on(P.b.APP_VIEW_CHANGED,(function(t){t.page!==f.f.TEACH&&(e.emoticonReset(),e.show=!1)}))},methods:{getData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Z=!0;var e=this,i=e.baseInfo,n=i.md5,o=i.offset,r=i.searchId,s=i.requestId,a=i.tab,c=i.aesKey,l=i.emojiUrl,u=Object.assign({md5:n,offset:o,searchId:r,requestId:s,tab:a,aesKey:c,emojiUrl:l,scene:h.b.scene,sessionId:h.b.sessionId},t);A.a.getEmoticon(u)},emoticonReset:function(){this.$store.commit("teach/similar/emoticonReset"),this.loadingWord=""},scrollEnd:function(){Z||!this.data.continueFlag&&this.data.items||(this.$store.dispatch("teach/similar/generateRid"),this.getData())},expose:function(t){if(t.length){var e=this,i=[];t.forEach((function(t){for(var n=0;n<e.emoticons.length;n++){var o=e.emoticons[n];if(o.md5===t){i.push(Object.assign({index:n+1},o));break}}})),h.f.teach.reportSimilarExpose({searchId:e.baseInfo.searchId,md5:e.baseInfo.md5,tab:e.baseInfo.tab,requestId:e.baseInfo.requestId,pos:i[0].index,md5Content:i.map((function(t){return t.md5})).join(";")})}}}},J=(i(1481),Object(w.a)(Q,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("scroll",{staticClass:"similar-list",attrs:{end:t.scrollEnd,expose:t.expose,on:t.show,"aria-hidden":"true"}},[i("div",{staticClass:"similar-list__box"},[t.data.resultWording?i("div",{staticClass:"similar-list__count"},[i("span",{staticClass:"similar-list__count-word"},[t._v(t._s(t.data.resultWording))])]):t._e(),i("div",{staticClass:"similar-list__list"},t._l(t.emoticons,(function(t,e){return i("emoticon",{key:t.docID,attrs:{emoticon:t,pos:e+1}})})),1)]),i("div",{staticClass:"similar-list__loading"},[t.loading?t._e():i("span",{staticClass:"similar-list_load-icon circle-loading"}),i("span",[t._v(t._s(t.loadingWord))])])]):t._e()}),[],!1,null,null,null).exports),tt=i(19);function et(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function it(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?et(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):et(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var nt={mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0},displayPos:{type:Number,default:0}},data:function(){return{isBizUnionTopScene:h.b.isBizUnionTopScene,docItemType:tt.a.docItemType}},computed:{col:function(){var t=this.block.items.map((function(t){return h.g.strLen(t.hotword)}));return Math.max.apply(Math,s()(t))<10?3:2}},methods:{onTap:function(t,e){var i=this,n=this;h.g.fastClickCheck((function(){t.opType=t.optype||t.opType,h.f.teach.reportCommonClick({blockType:i.block.type,blockId:i.block.id,blockWord:i.block.title,blockExpand:i.block.expand,blockIndex:i.displayPos,itemId:t.id,itemWord:t.hotword,itemExpand:t.expand,itemIndex:e+1}),i.M_clickReportFor26897(it(it({},t),1==t.game_flag?{docType:i.docItemType.GAME_WORD}:{}),e+1,[f.e.BIZ_SPECIFIC,f.e.MP_INNER_TOP_RIGHT_SEARCH].includes(h.b.scene)?{actionId:3004}:{});var o=i.M_composeParentSid({t:f.p.HOT_WORD,s:i.$store.state.teach.recommendId,did:t.id||t.hotword,rid:i.$store.state.index.requestId});if([f.e.MP_INNER_TOP_RIGHT_SEARCH].includes(h.b.scene))n.M_openSearchWebView({actionType:3,page:f.f.RESULT,scene:h.b.scene,type:2,query:t.hotword,searchId:h.b.searchId,isShowCancel:!1,extParams:encodeURIComponent(JSON.stringify({isHomePage:0,isMpVertical:!0,crossExtReqParams:[{key:"parentSearchID",textValue:o}],userName:h.b.userName}))});else if(t.opType==f.c.search)h.i.setInputBar({query:t.hotword,isInputChange:!1}),P.a.$emit(P.b.GOTO,{page:f.f.RESULT,query:t.hotword,searchId:"",extReqParams:{key:"parentSearchID",textValue:o}});else{var r,s,a,c={};if(t.isForbidHistory||null!==(r=t.jumpInfo)&&void 0!==r&&r.forbidTeachData)c.extParams=Object.assign(t.isForbidHistory?{isForbidHistory:t.isForbidHistory}:{},null!==(a=t.jumpInfo)&&void 0!==a&&a.forbidTeachData?{forbidTeachData:t.jumpInfo.forbidTeachData}:{});i.M_go(it(it({},t),{},{jumpInfo:Object.assign(c,it(it({},(null==t?void 0:t.jumpInfo)||{}),{},{parentSearchID:(null==t||null===(s=t.jumpInfo)||void 0===s?void 0:s.parentSearchID)||o}))}))}Object(T.g)(h.m.feature.teachHot)}),2e3)}}},ot=(i(3487),Object(w.a)(nt,(function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return e.block.items&&e.block.items.length?n("div",{staticClass:"rows teach__box_outer",class:(t={},t["rows-with-style-"+e.block.showType]=e.block.showType>=0,t)},[e.block.title?n("p",{staticClass:"teach__title"},[e._v(e._s(e.block.title))]):e._e(),n("ui-column",{staticClass:"teach__main",attrs:{col:e.col,list:e.block.items},scopedSlots:e._u([{key:"default",fn:function(t){var i,o=t.item,r=t.index;return[n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"rows-word-wrapper active__link",class:(i={},i["style-"+o.showType]=o.showType,i),attrs:{"data-hotword":o.hotword,"data-index":r,"data-expose-id":o.id,"data-new-teach-report-id":""+e.M_getItemReportId(Object.assign({},o,1==o.game_flag?{docType:e.docItemType.GAME_WORD}:{}),r+1),role:"button"},on:{click:function(t){return e.onTap(o,r)}}},[n("span",{staticClass:"rows-word",domProps:{innerHTML:e._s(e.xss(o.hotword))}}),o.tags?n("ui-tags",{attrs:{flex:"",tags:o.tags,"aria-hidden":"true"}}):e._e()],1)]}}],null,!1,1984896194)}),n("div",{staticStyle:{"padding-top":"1px"}})],1):e._e()}),[],!1,null,"f7aad450",null).exports),rt=i(14),st=i(12),at=i(5);function ct(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var lt={mixins:[h.n,j.a],data:function(){return{title:this.block.title||rt.a.L("经常搜索的公众号")}},props:["block","typePos","displayPos"],methods:{onTap:function(t,e){var i={userName:t.userName,isTeachPage:!0,opType:f.c.bizSession};h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id,blockWord:this.title,blockExpand:this.block.expand,blockIndex:this.displayPos,itemId:t.id,itemWord:t.nickName,itemExpand:t.expand,itemIndex:e+1}),this.M_clickReportFor26897(t,e+1,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ct(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},st.a.scene!=f.e.S1S_VERTICAL&&st.a.scene!=f.e.VERTICAL||st.a.type!=at.b.OFFICE_ACCOUNT?{}:{actionId:f.g.BIZ})),t.jumpInfo?this.M_go(t.jumpInfo):rt.a.startSearchItemDetailPage(i),rt.a.reportRealTime({scene:st.a.scene,recommendId:this.$store.state.teach.recommendId,businessType:+this.block.type,docId:t.userName||t.nickName,docPos:e+1,typePos:this.displayPos,isHomePage:0,sceneActionType:st.a.sceneActionType})}}},ut=(i(1348),Object(w.a)(lt,(function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.block.items&&e.block.items.length,expression:"block.items && block.items.length"}],staticClass:"official-a teach__box_outer",class:(t={},t["official-a-with-style-"+e.block.showType]=e.block.showType>=0,t)},[n("p",{staticClass:"teach__title"},[e._v(e._s(e.title))]),n("ul",{staticClass:"official-a__list teach__main"},[e._l(e.block.items,(function(t,i){return[i<8?n("li",{directives:[{name:"active",rawName:"v-active"}],key:i,staticClass:"active__mask official-a__wrap",attrs:{"data-new-teach-report-id":""+e.M_getItemReportId(t,i+1),"data-expose-id":t.id,role:"button"},on:{click:function(n){return e.onTap(t,i)}}},[n("div",{staticClass:"official-a__item"},[n("span",{staticClass:"biz__sug-thumb",style:{backgroundImage:"url("+(t.avatarUrl||t.iconUrl)+")"}}),n("p",[e._v(e._s(t.nickName))])])]):e._e()]}))],2)])}),[],!1,null,null,null).exports),dt=function(t){return"/page/detail/detail?q=".concat(encodeURIComponent(t.join(";")))},pt={filters:{formatNum:function(t){if(null==t)return"--";if(!/^(\+|-)?(\d+)(\.\d+)?$/.test(t))return t;var e=RegExp.$1,i=RegExp.$2,n=RegExp.$3,o=new RegExp;for(o.compile("(\\d)(\\d{3})(,|$)");o.test(i);)i=i.replace(o,"$1,$2$3");return"".concat(e).concat(i).concat(n)},formatRate:function(t){return null==t?"--":"".concat((100*Math.abs(t)).toFixed(2),"%")}},mixins:[h.l,h.n],props:{block:{type:Object,default:function(){return{}}}},computed:{items:function(){return(this.block.wxindex&&this.block.wxindex.group_list||[]).map((function(t){return{gid:t.gid,group_wxindex:(t.group_wxindex||[]).map((function(e){if(e.wxindex_str){for(var i=e.wxindex_str.split(","),n=i.length-1;n>=0;n-=1)if(-1!=i[n]){e.currentIndex=+i[n],n>0&&i[n-1]>0?e.rate=(i[n]-i[n-1])/i[n-1]:e.rate=1;break}n<0&&(t.currentIndex=void 0,t.rate=void 0)}else t.currentIndex=void 0,t.rate=void 0;return e}))}}))},showMoreLink:function(){return(this.block.wxindex&&this.block.wxindex.group_list||[]).length<(this.block.wxindex&&this.block.wxindex.total_cnt||0)}},created:function(){var t=this;window.reportVueCreated("src/views/teach/components/wx-index/wx-index.vue"),H.b.onWebviewResume((function(){t.$emit("update")}))},methods:{onSlide:function(t,e,i,n){t>0?t>18&&n.dataset.moved&&(n.style.left="0px",delete n.dataset.moved):(t||e||i||(this.$refs.wxIndexItem||[]).forEach((function(t){t!==n&&(t.style.left="0px",delete t.dataset.moved)})),i?Math.abs(t)>=36?(n.style.left="".concat(-72,"px"),n.dataset.moved=!0):(n.style.left="0px",delete n.dataset.moved):Math.abs(t)>=18&&(n.dataset.moved?n.style.left="-".concat(80,"px"):n.style.left="".concat(Math.max(t,-72),"px")))},onView:function(t){(this.$refs.wxIndexItem||[]).forEach((function(t){t.style.left="0px",delete t.dataset.moved}));var e=this.items[t];if(e){var i=(e.group_wxindex||[]).map((function(t){return t.query}));h.f.teach.reportWxIndex({actionType:1,groupId:e.gid,content:i.join(",")}),this.M_go({jumpType:2,userName:"gh_935b85261f35@app",relativeURL:i.length?dt(i):"/page/index/index"})}},onDelete:function(t){var e=this.items[t];e&&(h.f.teach.reportWxIndex({actionType:2,groupId:e.gid,content:(e.group_wxindex||[]).map((function(t){return t.query})).join(",")}),h.i.commonCgi({cgiName:H.a.delWxIndex,data:{gid:e.gid,queryList:(e.group_wxindex||[]).map((function(t){return t.query}))}}))},onMore:function(){h.f.teach.reportWxIndex({actionType:3}),this.M_go({jumpType:2,userName:"gh_935b85261f35@app",relativeURL:"/page/index/index"})}}},ht=(i(1484),Object(w.a)(pt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.items.length?i("div",{staticClass:"wx-index__bd"},[i("span",{staticClass:"ui-aria-hidden"},[t._v("微信指数")]),t._m(0),t._l(t.items,(function(e,n){return i("div",{key:e.gid,staticClass:"wx-index__item"},[e.group_wxindex&&e.group_wxindex.length>0?i("div",{directives:[{name:"slide",rawName:"v-slide:horizontal",value:t.onSlide,expression:"onSlide",arg:"horizontal"},{name:"active",rawName:"v-active"}],ref:"wxIndexItem",refInFor:!0,staticClass:"wx-index__box",on:{click:function(e){return t.onView(n)}}},t._l(e.group_wxindex,(function(n){return i("div",{key:e.gid+"###"+n.query,staticClass:"wx-index__tr"},[i("div",{staticClass:"wx-index__td"},[t._v("\n          "+t._s(n.query)+"\n        ")]),i("div",{staticClass:"wx-index__td",attrs:{role:"option"}},[i("span",{staticClass:"ui-aria-hidden"},[t._v("最新指数：")]),t._v("\n          "+t._s(t._f("formatNum")(n.currentIndex))+"\n        ")]),i("div",{staticClass:"wx-index__td wx-index__rate",class:{"wx-index__rate_up":n.rate>=0,"wx-index__rate_down":n.rate<0},attrs:{role:"option"}},[i("span",{staticClass:"ui-aria-hidden"},[t._v(t._s(n.rate>=0?"上升":"下降")+"：")]),t._v("\n          "+t._s(t._f("formatRate")(n.rate))+"\n        ")])])})),0):t._e(),i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"wx-index__box-delete",attrs:{role:"button"},on:{click:function(e){return t.onDelete(n)}}},[t._v("\n      删除\n    ")])])})),t.showMoreLink?i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"wx-index__link",attrs:{role:"button"},on:{click:t.onMore}},[t._v("\n    前往小程序获取完整历史\n  ")]):t._e()],2):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wx-index__tr wx-index__hd",attrs:{"aria-hidden":"true"}},[e("div",{staticClass:"wx-index__td"},[this._v("\n      最新查询\n    ")]),e("div",{staticClass:"wx-index__td"},[this._v("\n      最新指数\n    ")]),e("div",{staticClass:"wx-index__td"},[this._v("\n      日环比\n    ")])])}],!1,null,null,null).exports),ft={props:["typePos","block"],data:function(){return{}},computed:{items:function(){return this.block.items}},methods:{onTapEntrance:function(t,e){var i=this;h.g.fastClickCheck((function(){i.M_go(t.jumpInfo),t.cgi&&t.cgi.name&&h.i.getCommonCgiData({cgiName:t.cgi.name,data:t.cgi.params}),h.f.teach.reportCommonClick({blockType:i.block.type,blockId:i.block.id,blockWord:i.block.header&&i.block.header.title,blockExpand:i.block.expand,blockIndex:i.typePos,itemId:t.id,itemWord:t.title,itemExpand:t.expand,itemIndex:e+1})}),1e3)}}},mt=(i(1488),Object(w.a)(ft,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"strong-show-grid"},t._l(t.items,(function(e,n){return i("li",{key:n,staticClass:"grid-item",attrs:{"data-expose-id":e.id,role:"button"}},[i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"grid-item-inner active__mask",on:{click:function(i){return i.stopPropagation(),t.onTapEntrance(e,n)}}},[i("div",{staticClass:"icon-box"},[e.iconUrl?i("ui-image",{attrs:{url:e.iconUrl,size:40}}):t._e()],1),e.title?i("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.xss(e.title))}}):t._e(),e.desc?i("p",{staticClass:"desc",domProps:{innerHTML:t._s(t.xss(e.desc))}}):t._e()])])})),0)}),[],!1,null,"73aa6811",null).exports),_t=i(736),bt={props:["typePos","block","header"],computed:{renderHeader:function(){return this.header||this.block.header||{}}},methods:{onTapMore:function(){this.renderHeader.moreInfo&&this.renderHeader.moreInfo.jumpInfo&&(this.M_go(this.renderHeader.moreInfo.jumpInfo),h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id,blockWord:this.renderHeader.moreInfo.title,blockExpand:this.block.expand,blockIndex:this.typePos}))}}},yt=(i(1485),Object(w.a)(bt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"default-header"},[i("h3",{attrs:{role:"option"},domProps:{innerHTML:t._s(t.xss(t.renderHeader.title))}}),t.renderHeader.moreInfo?i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"more-box active__opacity",on:{click:function(e){return e.stopPropagation(),t.onTapMore.apply(null,arguments)}}},[i("span",[t._v(t._s(t.renderHeader.moreInfo.title))]),i("ui-arrow")],1):t._e()])}),[],!1,null,"4c78d586",null).exports),vt={components:{reddotBadge:_t.a,defaultHeader:yt},props:["typePos","block"],data:function(){return{}},computed:{items:function(){return this.block.items}},mounted:function(){this.reddotExposeTimeout=null,this.reddotExposeList=[]},methods:{onReddotExpose:function(t){var e=this;clearTimeout(this.reddotExposeTimeout),this.reddotExposeList.push({key:t.redDotInfo.key,type:1,action:1}),this.reddotExposeTimeout=setTimeout((function(){h.i.commonCgi({cgiName:H.a.serviceBoxReportRedDot,data:{cmd:"ReportRedDot",list:e.reddotExposeList}})}),100)},onTapEntrance:function(t,e){var i=this;h.g.fastClickCheck((function(){if(i.M_go(t.jumpInfo),t.redDotInfo){var n=i.$refs["reddot-".concat(t.id)][0];n.isShow&&(n.onClick({delay:500}),h.i.commonCgi({cgiName:H.a.serviceBoxReportRedDot,data:{cmd:"ReportRedDot",list:[{key:t.redDotInfo.key,type:1,action:2}]}}))}t.cgi&&t.cgi.name&&h.i.getCommonCgiData({cgiName:t.cgi.name,data:t.cgi.params}),h.f.teach.reportCommonClick({blockType:i.block.type,blockId:i.block.id,blockWord:i.block.header&&i.block.header.title,blockExpand:i.block.expand,blockIndex:i.typePos,itemId:t.id,itemWord:t.title,itemExpand:t.expand,itemIndex:e+1})}),1e3)}}},gt=(i(1489),Object(w.a)(vt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap-box-grid"},[t.block.header?i("default-header",t._b({},"default-header",t.$props,!1)):t._e(),i("div",{staticClass:"wrap-box-grid-body"},t._l(t.items,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active"}],key:n,staticClass:"wrap-box-grid-item active__mask",attrs:{"data-expose-id":e.id,role:"button"},on:{click:function(i){return i.stopPropagation(),t.onTapEntrance(e,n)}}},[i("div",{staticClass:"icon-box"},[e.iconUrl?i("ui-image",{attrs:{url:e.iconUrl,size:32}}):t._e(),e.redDotInfo?i("reddot-badge",{ref:"reddot-"+e.id,refInFor:!0,staticClass:"reddot-badge",attrs:{id:e.redDotInfo.key,text:e.redDotInfo.text,expired:e.redDotInfo.expired,"related-id":e.id},on:{expose:function(i){return t.onReddotExpose(e)}}}):t._e()],1),e.title?i("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.xss(e.title))}}):t._e(),i("span",{staticClass:"ui-aria-hidden"},[t._v("，")]),e.desc?i("p",{staticClass:"desc",domProps:{innerHTML:t._s(t.xss(e.desc))}}):t._e()])})),0)],1)}),[],!1,null,"3dadd61d",null).exports);function wt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var It={components:{DefaultHeader:yt},mixins:[h.n,h.l],props:{block:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({header:function(){return this.block.header?this.block.header:this.block.title?{title:this.block.title}:null}},Object(S.c)({baseInfo:function(t){return t.teach.similar.baseInfo}})),methods:{onTapOption:function(t){this.M_go(t.jumpInfo||t),h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id,blockWord:this.block.title,blockExpand:this.block.expand,blockIndex:this.typePos,itemId:t.id,itemWord:t.title,itemExpand:t.expand,itemIndex:t+1})}}},Ot=(i(1491),Object(w.a)(It,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-list"},[t.header?i("default-header",t._b({attrs:{header:t.header}},"default-header",t.$props,!1)):t._e(),t._l(t.block.items,(function(e){return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:e.title,staticClass:"option active__item",attrs:{"data-expose-id":e.id,role:"button"},on:{click:function(i){return i.stopPropagation(),t.onTapOption(e)}}},[e.iconUrl||e.picUrl?i("ui-image",{staticClass:"option-icon",attrs:{url:e.iconUrl||e.picUrl,size:40}}):t._e(),i("div",{staticClass:"option-text"},[i("div",{staticClass:"option-title",domProps:{innerHTML:t._s(t.xss(e.title))}}),i("span",{staticClass:"ui-aria-hidden"},[t._v(".")]),i("div",{staticClass:"option-desc",domProps:{innerHTML:t._s(t.xss(e.desc))}})]),i("ui-arrow",{attrs:{size:"big"}})],1)}))],2)}),[],!1,null,"4544ce45",null).exports),Ct={components:{DefaultHeader:yt,clientImage:q.a},props:{block:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0}},computed:{header:function(){return this.block.header?this.block.header:this.block.title?{title:this.block.title}:null}},methods:{onTapGridItem:function(t,e){this.M_go(t),h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id,blockWord:this.block.title,blockExpand:this.block.expand,blockIndex:this.typePos,itemId:t.id,itemWord:t.title||"",itemExpand:t.expand,itemIndex:e+1,listItemId:t.listItems.map((function(t){return t.id})).join("_")})}}},xt=(i(1493),Object(w.a)(Ct,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emoticon-grid"},[t.header?i("default-header",t._b({attrs:{header:t.header}},"default-header",t.$props,!1)):t._e(),i("div",{staticClass:"emoticon-grid-wrapper"},t._l(t.block.items,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:e.title,staticClass:"emoticon-grid-item active__item",attrs:{"data-expose-id":e.id,"aria-label":(e.title?e.title+"，":"")+(e.desc?e.desc+"，":"")+"搜索表情",role:"button"},on:{click:function(i){return i.stopPropagation(),t.onTapGridItem(e,n)}}},[t._l(e.listItems,(function(t){return i("client-image",{key:t.encryptUrl,staticClass:"emoticon",attrs:{item:t,mode:"sticker"}})})),i("div",{staticClass:"item-title",domProps:{innerHTML:t._s(t.xss(e.title))}}),e.desc?i("div",{staticClass:"item-desc",domProps:{innerHTML:t._s(t.xss(e.desc))}}):t._e()],2)})),0)],1)}),[],!1,null,"3a42318e",null).exports),kt={created:function(){window.reportVueCreated("src/views/teach/components/hotword-cross-line/hotword-cross-line.vue")},mixins:[h.l,h.n],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0}},methods:{tap:function(t,e){if(h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id,blockWord:this.block.title,blockExpand:this.block.expand,blockIndex:this.typePos,itemId:t.id,itemWord:t.hotword,itemExpand:t.expand,itemIndex:e+1}),(t.opType||t.optype)==f.c.search){var i=this.M_composeParentSid({t:f.p.HOT_WORD,s:this.$store.state.teach.recommendId,did:t.id||t.hotword,rid:this.$store.state.index.requestId});this.M_openSearchWebView({actionType:3,jumpUrl:"",type:h.b.type,subType:h.b.subType,query:t.hotword,extParams:encodeURIComponent(JSON.stringify({isHomePage:0,crossExtReqParams:[{key:"parentSearchID",textValue:i}]}))})}else this.M_go(t)}}},Et=(i(1494),Object(w.a)(kt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"teach-hot"},[t.block.title?i("p",{staticClass:"teach__title"},[t._v("\n    "+t._s(t.block.title)+"\n  ")]):t._e(),i("div",{staticClass:"teach-hot__lines"},t._l(t.block.items,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active"}],key:e.hotword,staticClass:"teach-hot__line active__item",attrs:{"data-expose-id":e.id,role:"button"},on:{click:function(i){return t.tap(e,n)}}},[i("div",{staticClass:"teach-hot__line-inner"},[i("div",{staticClass:"teach-hot__wrap"},[i("div",{staticClass:"teach-hot__word"},[t._v("\n            "+t._s(e.hotword)+"\n          ")]),e.tags&&e.tags.length?i("ui-tags",{staticClass:"teach-hot__tag",attrs:{tags:e.tags,flex:"","no-bg":""}}):t._e()],1),i("span",{staticClass:"ui-aria-hidden"},[t._v("，")]),e.recommendTags&&e.recommendTags.length?i("ui-tags",{staticClass:"teach-hot__recommend-tag",attrs:{tags:e.recommendTags,"no-bg":""}}):t._e()],1)])})),0)])}),[],!1,null,"e7f8de9e",null).exports),Tt={name:"SectionHeader",props:{config:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},Pt=(i(2425),Object(w.a)(Tt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section-header"},[e("span",{staticClass:"section-header-title",attrs:{role:"option"},domProps:{innerHTML:this._s(this.xss(this.config.title))}}),this._t("default")],2)}),[],!1,null,"687e3e04",null).exports),St={name:"Arrow",props:{direction:{type:String,default:"right"},size:{type:[Number,String],default:""},gap:{type:[Number,Boolean],default:!1},align:{type:String,default:"inline"},ariaHidden:{type:Boolean,default:!0}},computed:{scaleRatio:function(){switch(!0){case"number"==typeof this.size:return this.size/24;case"big"===this.size:return 1;case"small"===this.size:return 16/24;default:return 20/24}},arrowClass:function(){return{"local-arrow-align-inline":"inline"===this.align,"local-arrow-align-flex":"flex"===this.align}},arrowGap:function(){if(!1===this.gap)return null;var t=!0===this.gap?4:this.gap;return"inline"===this.align?t-3:t}},methods:{}},jt=(i(1502),Object(w.a)(St,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"arrow-wrap"},["up"===t.direction||"down"===t.direction?i("div",{staticClass:"local-arrow",class:t.arrowClass,style:{marginLeft:t.arrowGap+"px",width:1.5*t.scaleRatio+"rem",height:.75*t.scaleRatio+"rem"},attrs:{"aria-hidden":t.ariaHidden}},[i("svg",{staticClass:"local-arrow-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 12"}},[i("path",{attrs:{d:"M17.42 2.454l1.06 1.06-5.779 5.78a.996.996 0 01-1.413 0L5.51 3.514l1.061-1.06 5.425 5.425 5.424-5.425z",transform:"up"===t.direction?"rotate(180 12 6)":"",fill:"currentColor","fill-rule":"evenodd"}})])]):i("div",{staticClass:"local-arrow",class:t.arrowClass,style:{marginLeft:t.arrowGap+"px",width:.75*t.scaleRatio+"rem",height:t.scaleRatio+"rem"},attrs:{"aria-hidden":t.ariaHidden}},[i("svg",{staticClass:"local-arrow-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16"}},[i("path",{attrs:{d:"M2.454 2.58l1.06-1.06 5.78 5.779a.996.996 0 010 1.413l-5.78 5.779-1.06-1.061L7.88 8.005 2.454 2.581z",transform:"left"===t.direction?"rotate(180 6 8)":"",fill:"currentColor","fill-rule":"evenodd"}})])])])}),[],!1,null,"923ab852",null).exports),Rt={components:{Arrow:jt},props:{item:{type:Object,default:function(){return{}}},index:{type:Number,default:-1},isEditting:{type:Boolean,default:!1},isShowClockIcon:{type:Boolean,default:!1}},data:function(){return{}},methods:{onTapItem:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.push(this.$el),this.isEditting?this.$emit.apply(this,["tap-delete"].concat(e)):this.$emit.apply(this,["tap-search"].concat(e))}}};i(2438);function Nt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Dt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Nt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Mt={components:{SectionHeader:Pt,HistoryItem:Object(w.a)(Rt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"history__item",class:{"edit-mask":t.isEditting,active__mask:!t.isEditting,active__item:t.isEditting},attrs:{role:t.isEditting?"button":"link"},on:{click:function(e){return e.stopPropagation(),function(e){return t.onTapItem(t.item,t.index,e)}.apply(null,arguments)}}},[i("svg-icon",{staticClass:"history__item__icon",attrs:{name:"clock"}}),i("span",{staticClass:"history__item__text",class:{delete:t.isEditting}},[t._v(t._s(t.item.hotword))]),t.isEditting?i("div",{staticClass:"history__item__delete",attrs:{"aria-hidden":"true"}},[i("i",{staticClass:"weui-icon-close-thin history__item__delete-icon"})]):t.item.hideArrow?t._e():i("arrow",{attrs:{direction:"right",size:12,gap:4,align:"flex"}})],1)}),[],!1,null,"338aefb4",null).exports,Arrow:jt},mixins:[h.n,h.l,j.a],props:["block","typePos"],data:function(){return{historys:[],showCount:6,isCompletd:!1,isEditHistory:!1,isFold:!0,isShowEmpty:!1,isHide:!1}},computed:Dt(Dt({},Object(S.c)({requestId:function(t){return t.teach.requestId}})),{},{historyItems:function(){return this.isFold&&!this.isEditHistory?this.historys.slice(0,this.showCountConfig):this.historys},isWhiteBgStyle:function(){return 1==this.block.style},showCountConfig:function(){return this.block.showCountConfig?this.block.showCountConfig:6},isBizUnionTop:function(){return h.b.scene==f.e.BIZ_UNION_TOP},isHideFeedbackIcon:function(){return h.b.scene==f.e.HOME_TOP_ENTRY},emptyText:function(){return h.b.scene==f.e.HOME_TOP_ENTRY?"没有搜索历史内容":"没有最近在搜内容"},histroySubscripttionsIsHideKey:function(){return"".concat(tt.a.teachPermanentKeyEnum.histroySubscripttionsIsHideKey,"_").concat(h.b.scene,"_").concat(h.b.type)}}),watch:{block:{handler:function(t){if(t){this.showCount=this.showCountConfig;var e=t.items||[];this.historys=e,this.isFold=e.length>this.showCountConfig,this.isEditHistory=!1,this.isShowEmpty=!1,this.isCompletd=!0}},immediate:!0}},created:function(){this.checkIsHide()},methods:{onTap:function(t,e,i){try{var n=this,o=t.hotword;t.opType=t.optype||t.opType||f.c.search,h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id,blockWord:this.block.title,blockExpand:this.block.expand,blockIndex:this.typePos,itemId:t.id,itemWord:t.hotword,itemExpand:t.expand,itemIndex:e+1}),h.f.teach.reportCommonNewClick({searchId:h.b.searchId,requestId:this.requestId,itemInfo:this.block.vueBlockId.replace(/^block:/,""),docInfo:t.vueItemId.replace(/^item:/,"")}),Object(T.b)(h.m.subscriptions.historyClick,{rate:1}),this.M_clickReportFor26897(t,e+1,{actionId:{1:3004,4:3002}[parseInt(t.opType)]});var r=n.M_composeParentSid({t:n.block.parenttype||f.p.TEACH_SUBSCRIPTIONS_HISTORY,s:n.$store.state.teach.recommendId,did:t.hotword,rid:n.requestId}),s=[{key:"parentSearchID",textValue:r}];if(t.mixerCommonContext&&s.push({key:"mixerCommonContext",textValue:t.mixerCommonContext}),t.finderCommentJumpReferer&&s.push({key:"historyFinderCommentJumpReferer",textValue:t.finderCommentJumpReferer}),n.block.jumpInfo){var a={};n.block.jumpInfo.forbidTeachData&&(a.extParams=Object.assign(a.extParams||{},{forbidTeachData:n.block.jumpInfo.forbidTeachData})),this.M_go({jumpInfo:Object.assign(a,Dt(Dt({},n.block.jumpInfo),{},{query:o,parentSearchID:r}))})}else 1==t.opType?n.M_checkSpecialSearchBeforeLaunchNewSearch({query:o,callback:function(){h.g.setSearchInputWord({query:o,isInputChange:!1}),P.a.$emit(P.b.GOTO,{page:f.f.RESULT,query:o,searchId:"",extReqParams:s})},extParams:{crossExtReqParams:s}}):4==t.opType&&n.M_startDetail({type:2,jumpUrl:t.jumpUrl})}catch(c){}},tapDelete:function(t,e,i){h.g.reportRealTime({scene:h.b.scene,recommendId:this.$store.state.teach.recommendId,businessType:h.b.type,docId:t.hotword,docPos:e,typePos:this.typePos,isHomePage:0,sceneActionType:h.b.sceneActionType}),this.reportFeatureClick(5),this.M_clickReportFor26897(t,e+1,{actionId:f.g.CLICK_DELETE}),this.$store.commit("teach/deleteData",{dataIdx:this.typePos-1,itemIdx:e}),this.checkIsEmptyForDel()},checkIsEmptyForDel:function(){h.b.isFinderSearch||(this.isShowEmpty=!this.historys.length)},tapClear:function(t){h.f.teach.reportCommonClick({isDelete:2,blockId:"删除所有历史",blockWord:this.block.deleteWord,blockExpand:this.block.expand,blockIndex:this.typePos}),this.reportFeatureClick(6),this.M_clickReportFor26897("",0,{actionId:f.g.CLICK_CLEAR}),this.$store.commit("teach/clearData",{isDelete:!1,dataIdx:this.typePos-1}),this.checkIsEmptyForDel()},onTapExpand:function(t){var e=this.isFold;this.reportFeatureClick(this.isFold?7:8),this.isFold=!this.isFold,this.M_clickReportFor26897("",0,{actionId:e?f.g.CLICK_UNFOLD:f.g.CLICK_FOLD})},onTapEditHistory:function(){this.isEditHistory=!0,this.showCount=this.historys.length,this.M_clickReportFor26897("",0,{actionId:f.g.CLICK_EDIT})},onTapFinish:function(){this.isEditHistory=!1,this.isFold&&this.historys.length>this.showCountConfig&&(this.showCount=this.showCountConfig),this.M_clickReportFor26897("",0,{actionId:f.g.CLICK_EDIT_FINISH})},checkIsHide:function(){var t=this;return c()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.b.isFinderSearch){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h.e.get({key:t.histroySubscripttionsIsHideKey});case 4:t.isHide=e.sent;case 5:case"end":return e.stop()}}),e)})))()},onTapHide:function(t){this.reportFeatureClick(9),this.isHide=!0,this.$refs.popOver.hide(),h.e.set({key:this.histroySubscripttionsIsHideKey,value:1}),this.M_clickReportFor26897("",0,{actionId:f.g.CONFIRM_CHANGE_CODE})},reportFeatureClick:function(t){h.f.teach.reportFeatureBtnClick({featureInfo:t,actionId:2,searchId:h.b.searchId,requestId:this.requestId,itemInfo:this.block.vueBlockId.replace(/^block:/,""),businessType:h.b.type})},handleShowPop:function(){this.M_clickReportFor26897("",0,{actionId:f.g.CLICK_SHOW_DIALOG}),this.reportFeatureClick(12)}}},Ht=(i(1504),Object(w.a)(Mt,(function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return e.isHide||!e.isShowEmpty&&!e.historys.length?e._e():n("div",{staticClass:"history-subscriptions-box",class:{"white-bg":e.isWhiteBgStyle,biz_union_top:e.isBizUnionTop},attrs:{"data-teach-report-id":"his-"+e.block.vueBlockId}},[n("section-header",{attrs:{config:{title:e.block.title}}},[e.historys.length?n("div",{staticClass:"history-header"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditHistory,expression:"!isEditHistory"}],staticClass:"history-header__action"},[e.historys.length>e.showCountConfig?[n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"fold-wrap active__mask",attrs:{role:"button","data-teach-report-id":"his-feature:"+(e.isFold?7:8)+"@"+e.block.vueBlockId},on:{click:function(t){return t.stopPropagation(),e.onTapExpand.apply(null,arguments)}}},[n("span",[e._v(e._s(e.isFold?"展开":"收起"))]),n("arrow",{attrs:{direction:e.isFold?"down":"up",size:16,align:"flex"}})],1),n("div",{staticClass:"split-line"})]:e._e(),n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"history-header__action__icon active__mask",attrs:{role:"button"},on:{click:function(t){return t.stopPropagation(),e.onTapEditHistory.apply(null,arguments)}}},[n("svg-icon",{staticClass:"delete-icon",attrs:{name:"trashcan"}})],1)],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditHistory,expression:"isEditHistory"}],staticClass:"history-header__action editing-mode"},[n("span",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"history-header__action__link active__link",attrs:{role:"button","data-teach-report-id":"his-feature:6@"+e.block.vueBlockId},on:{click:function(t){return t.stopPropagation(),e.tapClear.apply(null,arguments)}}},[e._v("清空")]),n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"history-header__action__button",class:(t={},t["style-"+e.block.editBtnStyle]=e.block.editBtnStyle,t),attrs:{role:"button"},on:{click:function(t){return t.stopPropagation(),e.onTapFinish.apply(null,arguments)}}},[e._v("完成")])])]):e.isShowEmpty&&!e.isHideFeedbackIcon?n("PopOver",{ref:"popOver",staticClass:"feedback-wrap history-subscriptions-feedback-wrap",attrs:{"class-name":"history-subscriptions-feedback-pop-over","dialog-style":{background:"transparent"},"spacing-h":16,"spacing-v":8},scopedSlots:e._u([{key:"trigger",fn:function(){return[n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"history-header__action__icon feedback active__mask",attrs:{"data-teach-report-id":"his-feature:12@"+e.block.vueBlockId},on:{click:e.handleShowPop}},[n("svg-icon",{staticClass:"negative-btn",attrs:{name:"negative-btn"}})],1)]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"pop-content",attrs:{"data-teach-report-id":"his-feature:9@"+e.block.vueBlockId},on:{click:function(t){return t.stopPropagation(),e.onTapHide.apply(null,arguments)},touchmove:function(t){t.preventDefault()}}},[e._v("\n          不再展示\n        ")])]},proxy:!0}],null,!1,3385759999)}):e._e()],1),e.historys.length?n("div",{staticClass:"history-list"},e._l(e.historyItems,(function(t,i){return n("history-item",{key:i,staticClass:"history-list-item",attrs:{"data-index":i,"data-new-teach-report-id":""+e.M_getItemReportId(t,i+1),"data-teach-report-id":e.isEditHistory?"his-feature:5@"+e.block.vueBlockId:"his-"+t.vueItemId+"@"+e.block.vueBlockId,"is-show-clock-icon":e.isBizUnionTop,"is-editting":e.isEditHistory,item:t,index:i},on:{"tap-search":e.onTap,"tap-delete":e.tapDelete}})})),1):n("div",{staticClass:"history-empty"},[n("p",[e._v(e._s(e.emptyText))])])],1)}),[],!1,null,null,null).exports),At={components:{Arrow:jt},props:{item:{type:Object,default:function(){return{}}},index:{type:Number,default:-1}},methods:{onTapItem:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.push(this.$el),this.$emit.apply(this,["tap-search"].concat(e))}}};i(1505);function Lt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function $t(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Lt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Bt={name:"RecommendBlock",components:{SectionHeader:Pt,RecommendItem:Object(w.a)(At,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"rmd__item active__mask",attrs:{role:"link"},on:{click:function(e){return e.stopPropagation(),t.onTapItem(t.item,t.index)}}},[t.item.showText?i("span",{staticClass:"rmd__item__text",domProps:{innerHTML:t._s(t.item.showText)}}):i("span",{staticClass:"rmd__item__text"},[t._v(t._s(t.item.hotword))]),t.item.tags&&t.item.tags.length?i("ui-tags",{staticClass:"rmd__item__tags",attrs:{tags:t.item.tags}}):t._e(),t.item.hideArrow?t._e():i("arrow",{attrs:{direction:"right",size:12,gap:4,align:"flex"}})],1)}),[],!1,null,"258240b3",null).exports},mixins:[h.n,h.l,j.a],props:["block","typePos"],data:function(){return{}},computed:$t($t({},Object(S.c)({requestId:function(t){return t.teach.requestId}})),{},{items:function(){return this.items||[]},isWhiteBgStyle:function(){return 1==this.block.style}}),watch:{},created:function(){var t=this;h.b.scene==f.e.BIZ_UNION_TOP&&P.a.$on(P.b.TEACH_NEW_EXPOSE,(function(e){var i=e.reportMap,n=void 0===i?{}:i;e.isCache||Object.keys(n).forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=e.split("|"),r=o()(i,3),s=(r[0],r[1]),a=void 0===s?"":s;r[2];if(a==tt.a.teachType.RECOMMEND_BOX){var c=(n[e]||[]).map((function(t){var e=t.split("|"),i=o()(e,3),n=(i[0],i[1],i[2]);return{hotword:decodeURIComponent(void 0===n?"":n),timestamp:Date.now(),type:"expose"}}));t.$store.commit("teach/updateHotwordActionsMap",c)}}))}))},methods:{buildReportItem:function(t){return $t($t({},t),{},{docPullType:t.source||""})},onTapSearch:function(t,e,i){if(this.M_clickReportFor26897(this.buildReportItem(t),e+1,{actionId:3004}),h.b.scene==f.e.BIZ_UNION_TOP){var n=this.M_getItemReportId(this.buildReportItem(t),e+1,{actionId:3004}).split("$$"),r=o()(n,2),s=(r[0],r[1]),a=null==s?void 0:s.split("|")[2];this.$store.commit("teach/updateHotwordActionsMap",[{hotword:decodeURIComponent(a),timestamp:Date.now(),type:"click"}])}var c=[{key:"parentSearchID",textValue:this.M_composeParentSid({t:this.block.parenttype||f.p.TEACH_SUBSCRIPTIONS_RECOMMEND,s:this.$store.state.teach.recommendId,did:t.id||t.hotword,rid:this.requestId,kv:{source:t.source}})}];t.mixerCommonContext&&c.push({key:"mixerCommonContext",textValue:t.mixerCommonContext}),h.i.setInputBar({query:t.hotword,isInputChange:!1}),!1===this.block.addToHistory&&h.b.setValue({forbidHistoryUtilChangeQuery:t.hotword}),P.a.$emit(P.b.GOTO,{page:f.f.RESULT,query:t.hotword,searchId:"",isForbidHistory:h.b.scene==f.e.BIZ_UNION_TOP,extReqParams:c}),Object(T.b)(h.m.subscriptions.recommendClick,{rate:1}),h.f.teach.reportCommonNewClick({searchId:h.b.searchId,requestId:this.requestId,itemInfo:this.block.vueBlockId.replace(/^block:/,""),docInfo:t.vueItemId.replace(/^item:/,"")})}}},Ft=(i(3298),Object(w.a)(Bt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.block&&t.block.items.length?i("div",{staticClass:"recommend-box",class:{"white-bg":t.isWhiteBgStyle},attrs:{"data-teach-report-id":"rmd-"+t.block.vueBlockId}},[t.block.title?i("section-header",{attrs:{config:{title:t.block.title}}}):t._e(),i("div",{staticClass:"recommend-list"},t._l(t.block.items,(function(e,n){return i("recommend-item",{key:e.id,staticClass:"recommend-list-item",attrs:{"data-teach-report-id":"rmd-"+e.vueItemId+"@"+t.block.vueBlockId,"data-new-teach-report-id":""+t.M_getItemReportId(t.buildReportItem(e),n+1),item:e,index:n},on:{"tap-search":t.onTapSearch}})})),1)],1):t._e()}),[],!1,null,"13acc718",null).exports);function Wt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var qt,Ut,Gt={components:{SectionHeader:Pt},mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{isDarkMode:h.g.isDarkMode()}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Wt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(S.c)({requestId:function(t){return t.teach.requestId}})),created:function(){var t=this;h.g.watchMatchMediaColor((function(e){t.isDarkMode=e}))},methods:{tap:function(t,e){if(h.f.teach.reportCommonNewClick({searchId:h.b.searchId,requestId:this.requestId,itemInfo:this.block.vueBlockId.replace(/^block:/,""),docInfo:t.vueItemId.replace(/^item:/,"")}),t.mixerCommonContext){this.M_clickReportFor26897(t,e+1,{actionId:3004});var i=[{key:"parentSearchID",textValue:this.M_composeParentSid({t:this.block.parenttype||f.p.FINDER_GUIDE_HOT_WORD,s:this.$store.state.teach.recommendId,did:t.id||t.hotword,rid:this.requestId})},{key:"mixerCommonContext",textValue:t.mixerCommonContext}];h.i.setInputBar({query:t.hotword,isInputChange:!1}),P.a.$emit(P.b.GOTO,{page:f.f.RESULT,query:t.hotword,searchId:"",extReqParams:i,isForbidHistory:!0})}else this.M_clickReportFor26897(t,e+1,{actionId:3009}),h.i.openFinderSearchView({allSearchWord:this.block.items.map((function(t){return{action_type:1,hotword_id:t.id,hotword_text:t.hotword,session_buffer:t.finderSessionBuffer}})),selectIndex:e,scene:"0",reportInfo:""});P.a.$emit(P.b.CLICK_FINDER_HOTLIST)}}},Vt=(i(3389),Object(w.a)(Gt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"finder-hot-list",class:{"fade-line":!!t.block.bgImage},attrs:{"data-teach-report-id":"finder-"+t.block.vueBlockId}},[t.block.bgImage&&!t.isDarkMode?i("div",{directives:[{name:"image",rawName:"v-image:raw",value:t.block.bgImage,expression:"block.bgImage",arg:"raw"}],staticClass:"bg"}):t.block.bgImageDark&&t.isDarkMode?i("div",{directives:[{name:"image",rawName:"v-image:raw",value:t.block.bgImageDark,expression:"block.bgImageDark",arg:"raw"}],staticClass:"bg"}):t._e(),t.block.title?i("section-header",{attrs:{config:{title:t.block.title}}}):t._e(),i("div",{staticClass:"hot-list"},t._l(t.block.items,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active"}],key:e.hotword,staticClass:"hot-item",attrs:{"data-expose-id":e.hotword,role:"button","data-teach-report-id":"finder-"+e.vueItemId+"@"+t.block.vueBlockId,"data-new-teach-report-id":""+t.M_getItemReportId(e,n+1)},on:{click:function(i){return t.tap(e,n)}}},[i("div",{staticClass:"hot-item__word"},[t._v("\n        "+t._s(e.hotword)+"\n      ")]),e.tags&&e.tags.length?i("ui-tags",{staticClass:"hot-item__tag",attrs:{tags:e.tags,flex:"","no-bg":""}}):t._e()],1)})),0)],1)}),[],!1,null,"6afdd69c",null).exports),Kt=i(652);function Yt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function zt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Yt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Xt=[(new Date).getFullYear(),-1,-1],Zt={mixins:[h.n,h.l,j.a],props:["block","typePos"],data:function(){return{datePicker:null,startYear:(new Date).getFullYear()-2,endYear:(new Date).getFullYear(),bizFilterisHideReadFilterKey:"BIZ_FILTER_IS_HIDE_READ_FILTER_KEY"}},computed:zt(zt({},Object(S.c)({requestId:function(t){return t.teach.requestId}})),{},{title:function(){return h.b.thirdExtParam&&h.b.thirdExtParam.bizNickName?"搜索「".concat(h.b.thirdExtParam.bizNickName,"」的内容"):"搜索内容"},items:function(){return 1===this.block.switchStatus?[{hotword:"指定发布时间",value:"dateFilter"}]:[{hotword:"最近读过",value:"readFilter"},{hotword:"指定发布时间",value:"dateFilter"}]}}),created:function(){qt=+new Date,A.b.onInputChange(this.hide),A.b.onInputConfirm(this.hide),P.a.$on(P.b.REAL_SWITCH_TAB,this.hide),P.a.$on(P.b.APP_VIEW_CHANGED,this.hide)},methods:{_reset:function(){this.$store.commit({type:"result/sift/updateFilter",filter:{}}),this.$store.commit({type:"clearFilterExt"})},onTap:function(t,e){switch(t.value){case"readFilter":this.handleSelectRead(t,e);break;case"dateFilter":this.handleSelectDate(t,e)}},handleSelectRead:function(t,e){this.M_clickReportFor26897(t,e,{actionId:3004}),this.M_openSearchWebView({actionType:3,page:f.f.RESULT,scene:h.b.scene,type:2,query:"",searchId:h.b.searchId,isShowCancel:!1,searchPlaceHolder:this.title,extParams:encodeURIComponent(JSON.stringify(u()({isHomePage:0,isMpEmtyQuery:!0,isMpVertical:!0,userName:h.b.userName,crossExtReqParams:[{key:"parentSearchID",textValue:this.M_composeParentSid({t:f.p.BIZ_FILER,s:"",did:"filter",rid:""})}],filterExtReqParams:[{key:"docSuperType",textValue:JSON.stringify(["3"])}]},"userName",h.b.userName)))})},handleSelectDate:function(t,e){this._showTimePicker(t,e)},hide:function(){Ut&&Ut.hide()},_showTimePicker:function(t,e){var i=this;i.M_clickReportFor26897(t,e,{actionId:3406}),Ut=Object(Kt.a)({id:qt,defaultValue:Xt,canNoLimit:[0,1,1],className:"biz-filters-picker",onClose:function(){i.M_clickReportFor26897(t,e,{actionId:3405})},onConfirm:function(n){var o;if(i.M_clickReportFor26897(t,e,{actionId:3404}),h.f.reportJumpType({subType:i.M_getBlockType(),pageType:f.o.TEACH,docId:encodeURIComponent(t.hotword),clickType:2,jumpType:4,newSearchType:f.t.DOC_SEARCH}),n&&-1!=n[0].value){var r,s,a=n[0].value,c=n[1].value,l=n[2].value;-1==c?(r=new Date(a,0).getTime()/1e3,s=(new Date(a+1,0).getTime()-1)/1e3):-1==l?(r=new Date(a,c).getTime()/1e3,s=(new Date(a,c+1).getTime()-1)/1e3):(r=new Date(a,c,l).getTime()/1e3,s=(new Date(a,c,l+1).getTime()-1)/1e3),o={from:r,to:s},i.M_openSearchWebView({actionType:3,page:f.f.RESULT,scene:h.b.scene,type:2,query:"",searchId:h.b.searchId,isShowCancel:!1,searchPlaceHolder:i.title,extParams:encodeURIComponent(JSON.stringify(u()({isMpEmtyQuery:!0,isMpVertical:!0,userName:h.b.userName,isHomePage:0,crossExtReqParams:[{key:"parentSearchID",textValue:i.M_composeParentSid({t:f.p.BIZ_FILER,s:"",did:"filter",rid:""})}],filterExtReqParams:[{key:"docPubTime",textValue:"".concat(o.from,",").concat(Number(o.to).toFixed(0))}]},"userName",h.b.userName)))})}else i.$store.commit({type:"updateFilterExt",extReqParams:[{key:"docPubTime",textValue:""}]}),i.M_openSearchWebView({actionType:3,page:f.f.RESULT,scene:h.b.scene,type:2,query:"",searchId:h.b.searchId,isShowCancel:!1,searchPlaceHolder:i.title,extParams:encodeURIComponent(JSON.stringify(u()({isHomePage:0,isMpEmtyQuery:!0,isMpVertical:!0,userName:h.b.userName,crossExtReqParams:[{key:"parentSearchID",textValue:i.M_composeParentSid({t:f.p.BIZ_FILER,s:"",did:"filter",rid:""})}]},"userName",h.b.userName)))})}});var n=document.querySelector(".biz-filters-picker");n&&n.addEventListener("touchmove",(function(t){t.stopPropagation(),t.preventDefault()}))}}},Qt=(i(3553),Object(w.a)(Zt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-filters"},[t.title?i("p",{staticClass:"teach__title"},[t._v("\n    "+t._s(t.title)+"\n  ")]):t._e(),i("ui-column",{attrs:{col:2,list:t.items},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,o=e.index;return[i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"biz-filters-wrapper active__link",attrs:{"data-hotword":n.hotword,"data-index":o,role:"button","data-new-teach-report-id":""+t.M_getItemReportId(n,o+1)},on:{click:function(e){return t.onTap(n,o+1)}}},[i("span",{staticClass:"biz-filter-item",domProps:{innerHTML:t._s(t.xss(n.hotword))}})])]}}])})],1)}),[],!1,null,"62d19423",null).exports);function Jt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function te(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Jt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ee={components:{HistoryClearItem:R.a,HistoryItem:E.a,Arrow:jt},mixins:[h.n,h.l,j.a],props:["block","typePos"],data:function(){return{historys:[],showCount:10,isFold:!0,hiddenItemIdx:0,isRender:!0}},computed:te(te({},Object(S.c)({requestId:function(t){return t.teach.requestId}})),{},{historyItems:function(){return this.isFold?this.historys.slice(0,this.showCountConfig):this.historys},isWhiteBgStyle:function(){return!0},showCountConfig:function(){return 1==this.expStyle?6:2==this.expStyle?1e3:this.block.showCountConfig?this.block.showCountConfig:10},expStyle:function(){return this.block.historyStyle}}),watch:{block:{handler:function(t){var e=this;if(t){this.showCount=this.showCountConfig;var i=t.items||[];this.historys=i,1===this.historys.length&&(this.isFold=!1),this.$nextTick((function(){e.autoFold()}))}},immediate:!0}},created:function(){this.historys.length&&Object(T.b)(h.m.subscriptions.historyExpose,{rate:1,isSessionOnly:!0})},mounted:function(){},methods:{autoFold:function(){var t=this;if(this.isFold){var e=this.$el.querySelector(".history-list-fold-wrap");if(e&&(this.hiddenItemIdx=0,this.isRender=!0,this.$nextTick((function(){t.hiddenItemIdx=function(t){var e=0,i=t.getBoundingClientRect().right,n=void 0===i?0:i,o=document.querySelectorAll(".history__item")||[];if(o.length)for(var r=0;r<o.length;r++){var s=o[r].getBoundingClientRect().right,a=void 0===s?0:s;if("right: ".concat(a,", wrapRight: ").concat(n),a+16>n){e=r;break}}return e}(e),t.isRender=!1}))),2==this.expStyle){var i=this.$el.querySelector(".exp-history-list-fold-wrap");i&&(this.hiddenItemIdx=0,this.$nextTick((function(){t.hiddenItemIdx=function(t){var e=0,i=t.getBoundingClientRect().right,n=void 0===i?0:i,o=document.querySelectorAll(".exp-history__item")||[];if(o.length){var r=document.querySelector(".history__item__fold"),a=(r&&r.getBoundingClientRect()||{}).width,c=void 0===a?0:a,l=-1,u=-1,d=s()(o).map((function(t,e){var i=t.getBoundingClientRect(),n=i.top,o=i.right;return l!=n&&(l=n,u+=1),{row:u,right:o,index:e}})).filter((function(t){return t.row<=1})).reverse().find((function(t){var e=t.right,i=t.row;return 0==i||1==i&&e+c+16<=n}));d&&(e=d.index)}return e}(i)})))}}},isEllipsis:function(t,e){return e>0&&t.length>2},buildHotWord:function(t,e){return t.length>7?"".concat(t.slice(0,6),"..."):t},buildReportItem:function(t){return te(te({},t),{},{docType:this.isFold?"fold_title":"title"})},onTap:function(t,e){try{var i=this,n=t.hotword;if(t.opType=t.optype||t.opType||f.c.search,Object(T.b)(h.m.subscriptions.historyClick,{rate:1}),this.M_clickReportFor26897(this.buildReportItem(t),e+1,{actionId:{1:3004,4:3002}[parseInt(t.opType)]}),1==t.opType){var o=i.M_composeParentSid({t:i.block.parenttype||f.p.TEACH_SUBSCRIPTIONS_HISTORY,s:i.$store.state.teach.recommendId,did:t.hotword,rid:i.requestId});i.M_checkSpecialSearchBeforeLaunchNewSearch({query:n,callback:function(){h.g.setSearchInputWord({query:n,isInputChange:!1}),P.a.$emit(P.b.GOTO,{page:f.f.RESULT,query:n,searchId:"",extReqParams:{key:"parentSearchID",textValue:o}})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:o}]}})}else 4==t.opType&&i.M_startDetail({type:2,jumpUrl:t.jumpUrl})}catch(r){}},tapDelete:function(t,e){h.g.reportRealTime({scene:h.b.scene,recommendId:this.$store.state.teach.recommendId,businessType:h.b.type,docId:t.hotword,docPos:e,typePos:this.typePos,isHomePage:0,sceneActionType:h.b.sceneActionType}),this.M_clickReportFor26897(this.buildReportItem(t),e+1,{actionId:f.g.CLICK_DELETE}),this.$store.commit("teach/deleteData",{dataIdx:this.typePos-1,itemIdx:e}),this.historyItems.length||this.$store.commit("teach/clearData",{isDelete:!0,dataIdx:this.typePos-1})},onTapExpand:function(t){var e=this,i=this.isFold;this.isFold=!this.isFold,this.$nextTick((function(){e.autoFold()})),this.M_clickReportFor26897("",0,{actionId:i?f.g.CLICK_UNFOLD:f.g.CLICK_FOLD})}}},ie=(i(3065),Object(w.a)(ee,(function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return e.historys.length?n("div",{staticClass:"mini-history-box",class:{"white-bg":e.isWhiteBgStyle}},[e.historys.length&&e.isFold?n("div",{staticClass:"history-list"},[n("div",{staticClass:"history-list-wrap"},[e.expStyle?n("div",{staticClass:"exp-history-list-fold-wrap",class:(t={},t["exp-history-list-fold-wrap_"+e.expStyle]=!0,t)},[e._l(e.historyItems,(function(t,i){var o;return n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:i,staticClass:"exp-history__item active__mask",class:(o={},o["exp-history__item_"+e.expStyle]=!0,o),style:{display:1==e.expStyle&&i>=5||2==e.expStyle&&e.hiddenItemIdx&&i>e.hiddenItemIdx?"none":""},attrs:{"data-new-teach-report-id":""+e.M_getItemReportId(e.buildReportItem(t),i+1),role:"link"},on:{click:function(n){return n.stopPropagation(),function(n){return e.onTap(t,i,n)}.apply(null,arguments)}}},[n("svg-icon",{staticClass:"exp-history__item__icon",attrs:{name:"clock"}}),n("span",{staticClass:"exp-history__item__text"},[e._v(e._s(1==e.expStyle?t.hotword:e.buildHotWord(t.hotword,i)))])],1)})),1==e.expStyle&&e.historys.length>1?n("span",{directives:[{name:"active",rawName:"v-active"}],staticClass:"history__item__fold active__mask",on:{click:e.onTapExpand}},[n("arrow",{staticClass:"history__item__fold-arrow",staticStyle:{"margin-right":"3px"},attrs:{direction:"down",size:20,gap:4}}),e._v("展开\n        ")],1):e._e(),2==e.expStyle&&e.historys.length>1?n("span",{directives:[{name:"active",rawName:"v-active"}],staticClass:"history__item__fold active__mask",on:{click:e.onTapExpand}},[n("arrow",{staticClass:"history__item__fold-arrow",attrs:{direction:"down",size:20,gap:4}}),e._v("展开\n        ")],1):e._e()],2):e._e(),e.expStyle?e._e():[n("div",{staticClass:"history-list-fold-wrap"},e._l(e.historyItems,(function(t,i){return n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:i,staticClass:"history__item active__mask",class:{},style:{display:e.hiddenItemIdx&&i>e.hiddenItemIdx-1?"none":"",opacity:e.isRender&&i>1?0:1},attrs:{"data-new-teach-report-id":""+e.M_getItemReportId(e.buildReportItem(t),i+1),role:"link"},on:{click:function(n){return n.stopPropagation(),function(n){return e.onTap(t,i,n)}.apply(null,arguments)}}},[n("svg-icon",{staticClass:"history__item__icon",attrs:{name:"clock"}}),n("span",{staticClass:"history__item__text"},[e._v(e._s(e.buildHotWord(t.hotword,i)))])],1)})),0),n("span",{directives:[{name:"active",rawName:"v-active"}],staticClass:"history__item__fold active__mask",on:{click:e.onTapExpand}},[e._v("展开\n          "),n("arrow",{staticClass:"history__item__fold-arrow",attrs:{direction:"down",size:20,gap:4}})],1)]],2)]):e._e(),e.historys.length&&!e.isFold?n("div",{staticClass:"history-box__bd"},[e._l(e.block.items,(function(t,i){return n("history-item",{key:i,staticClass:"history-box__item",attrs:{title:t.hotword,"has-delete":!!t.deletable,"data-index":i,"data-expose-id":t.id,"data-new-teach-report-id":""+e.M_getItemReportId(t,i+1)},on:{tap:function(n){return e.onTap(t,i)},"tap:delete":function(n){return e.tapDelete(t,i)}}})})),e.block.items.length>1?n("history-clear-item",{attrs:{"hide-clear-icon":"",title:"收起"},nativeOn:{click:function(t){return e.onTapExpand.apply(null,arguments)}}},[n("arrow",{attrs:{direction:"up",size:20,gap:4}})],1):e._e()],2):e._e()]):e._e()}),[],!1,null,"6f96ff7b",null).exports),ne=i(59);function oe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function re(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):oe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var se={created:function(){window.reportVueCreated("src/views/teach/components/popular-game/popular-game.vue")},mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0},displayPos:{type:Number,default:0}},data:function(){return{gEnum:f.h}},computed:Object(S.c)({data:function(t){return t.teach.teachData}}),methods:{onTap:function(t,e){h.f.teach.reportCommonClick({blockType:this.block.type,blockId:this.block.id||"",blockWord:this.block.title,blockExpand:this.block.expand||"",blockIndex:this.displayPos,itemId:t.id,itemWord:t.appname,itemExpand:t.expand||"",itemIndex:e+1}),this.M_clickReportFor26897(re(re({},t),{},{jumpType:f.h.jumpType.WE_APP}),e+1),this.M_go({jumpInfo:{startWeAppScene:t.game_flag?1233:null,userName:t.userName||t.username||"",jumpType:2,gameFlag:t.game_flag}})}}},ae=(i(1512),Object(w.a)(se,(function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return e.block.games&&e.block.games.length?n("div",{staticClass:"popular-game teach__box_outer",class:(t={},t["popular-game-with-style-"+e.block.showType]=e.block.showType>=0,t)},[n("p",{staticClass:"teach__title"},[e._v(e._s(e.block.title))]),n("div",{staticClass:"popular-game-list teach__main"},e._l(e.block.games,(function(t,i){var o;return n("div",{directives:[{name:"active",rawName:"v-active"}],key:i,staticClass:"active__mask popular-game-list__item",class:(o={},o["game_item_with_style_"+(t.showType||e.block.showType)]=t.showType||e.block.showType,o),attrs:{"data-expose-id":t.appname||t.id||i,"data-new-teach-report-id":""+e.M_getItemReportId(Object.assign({},t,{jumpType:e.gEnum.jumpType.WE_APP}),i+1),role:"button"},on:{click:function(n){return e.onTap(t,i)}}},[t.icon_url?n("span",{staticClass:"thumb",style:{backgroundImage:"url("+t.icon_url+")"}}):e._e(),n("div",{staticClass:"info"},[t.appname?n("div",{staticClass:"info_name"},[e._v(e._s(t.appname))]):e._e(),t.label?n("div",{staticClass:"info_label"},[n("ui-tags",{attrs:{flex:"","align-vertical":"",tags:[t.label]}})],1):e._e()])])})),0)]):e._e()}),[],!1,null,"792b5f8b",null).exports);function ce(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function le(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ce(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ue={mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0},displayPos:{type:Number,default:0}},methods:{onTap:function(){var t=this;return c()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.block.pop&&P.a.$emit(P.b.TEACH_SHOW_HALF_SCREEN,{pop:le(le({},t.block.pop),{},{type:1,header:{close:!0,title:t.block.pop.title}}),extInfo:{block:t.block,typePos:t.displayPos}}),t.M_clickReportFor26897({},0,{actionId:f.g.CLICK_SHOW_DIALOG});case 2:case"end":return e.stop()}}),e)})))()}}},de=(i(3087),Object(w.a)(ue,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.block.title&&t.block.pop&&t.block.pop.items&&t.block.pop.items.length?i("div",{staticClass:"page-setting",attrs:{id:"js-page-setting","data-new-teach-report-id":""+t.M_getBlockReportId(void 0,t.block.type)}},[i("div",{staticClass:"page-setting-title active__link",on:{click:t.onTap}},[t._v(t._s(t.block.title))])]):t._e()}),[],!1,null,"91f9af8a",null).exports),pe=i(92),he=i.n(pe);function fe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function me(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var _e={mixins:[j.a],props:{pop:{type:Object,default:function(){return{}}},block:Object,typePos:Number},data:function(){return{sPop:{}}},created:function(){var t=this;this.pop.items.length&&(this.sPop=me(me({},this.pop),{},{items:(this.pop.items||[]).map((function(e){return me(me({},e||{}),{},{ariaLabel:t.getAriaLabel(e),id:e.type,word:e.title,isDisplay:e.checked?1:0})}))}),this.M_exposeReportFor26897(this.sPop.items.map((function(e,i){return t.M_getItemReportId(e,i+1)}))))},methods:{onSwitch:function(t,e){var i=this;t&&t.type&&(t.checked=!t.checked,t.switchLabel=t.checked?"打开":"关闭",t.ariaLabel=this.getAriaLabel(t),t.onChecked&&t.onChecked(t),this.sPop.items[e]=t,this.M_clickReportFor26897(t,e+1,{actionId:t.checked?f.g.CONFIRM_CHANGE_CODE:f.g.CANCEL_CHANGE_CODE}),setTimeout((function(){t.switchLabel="",t.ariaLabel=i.getAriaLabel(t)}),500))},getAriaLabel:function(t){return t.switchLabel||"".concat(t.title,"，切换按钮，").concat(t.checked?"打开":"关闭","，轻点两下来切换设置")}}},be=(i(2056),Object(w.a)(_e,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagesetting-dialog-wrap"},[t.sPop.desc?i("div",{staticClass:"desc"},[t._v(t._s(t.sPop.desc))]):t._e(),t.sPop.items&&t.sPop.items.length?i("div",{staticClass:"switch-list"},t._l(t.sPop.items,(function(e,n){return i("div",{key:e.type,staticClass:"cell",attrs:{role:"option",tabindex:"-1","aria-label":e.ariaLabel}},[i("span",{staticClass:"cell__title"},[t._v(t._s(e.title))]),i("div",{staticClass:"cell__switch",class:{active:e.checked},on:{click:function(i){return i.stopPropagation(),t.onSwitch(e,n,i)}}})])})),0):t._e()])}),[],!1,null,"ca05d3f2",null).exports),ye={created:function(){window.reportVueCreated("src/views/teach/components/teach-half-screen/components/box-management-dialog/components/text-box/text-box.vue")},props:{data:{type:Object,default:function(){return{}}}}},ve=(i(2331),Object(w.a)(ye,(function(){var t=this.$createElement,e=this._self._c||t;return this.data&&this.data.title?e("div",{staticClass:"text-box"},[this._v(this._s(this.data.title))]):this._e()}),[],!1,null,"6961efea",null).exports),ge={created:function(){window.reportVueCreated("src/views/teach/components/teach-half-screen/components/box-management-dialog/components/switch-box/switch-box.vue")},props:{data:{type:Object,default:function(){return{}}},index:Number},methods:{onSwitch:function(){this.$emit("switch",{data:this.data,index:this.index})}}},we=(i(2345),Object(w.a)(ge,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data?i("div",{staticClass:"switch-item"},[t.data.icon?i("online-image",{staticClass:"switch-item-icon",attrs:{url:t.data.icon,mode:"avatar"}}):t._e(),t.data.title?i("div",{staticClass:"switch-item-title"},[t._v(t._s(t.data.title))]):t._e(),i("div",{staticClass:"switch-item-switch",class:{active:1==t.data.auth_switch},on:{click:function(e){return e.stopPropagation(),t.onSwitch()}}})],1):t._e()}),[],!1,null,"902a1a78",null).exports);function Ie(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Oe(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ie(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Ce={created:function(){window.reportVueCreated("src/views/teach/components/teach-half-screen/components/box-management-dialog/components/entry-box/entry-box.vue")},components:{Arrow:jt},props:{data:{type:Object,default:function(){return{}}}},methods:{onTap:function(){this.$emit("switch",{data:Oe(Oe({},this.data),{},{first_setting:Oe(Oe({},this.data.first_setting),{},{header:{close:!0,title:this.data.first_setting.title}})})})}}},xe=(i(2382),Object(w.a)(Ce,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"entry-box active__item",on:{click:t.onTap}},[t.data.title?i("div",{staticClass:"entry-box-title"},[t._v(t._s(t.data.title))]):t._e(),i("arrow",{attrs:{direction:"right",size:24,align:"flex"}})],1):t._e()}),[],!1,null,"5dc226a7",null).exports),ke=i(10);function Ee(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Te(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ee(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Pe=new ke.a({BOX_SHOW_SWITCH:11,DETAIL_LOCATION:12,FUZZY_LOCATION:13,TEXT_BOX:14}),Se={name:"BoxManagementDialog",components:{Scroll:Y.a,textBox:ve,switchBox:we,entryBox:xe},mixins:[j.a],props:{pop:{type:Object,default:function(){return{}}},block:Object,typePos:Number},data:function(){var t;return{itemCompMap:(t={},u()(t,Pe.BOX_SHOW_SWITCH,"switch-box"),u()(t,Pe.DETAIL_LOCATION,"entry-box"),u()(t,Pe.FUZZY_LOCATION,"switch-box"),u()(t,Pe.TEXT_BOX,"text-box"),t),sPop:{}}},watch:{pop:{handler:function(){var t,e;null!==(t=this.pop)&&void 0!==t&&null!==(e=t.second_setting_list)&&void 0!==e&&e.length&&(this.sPop=Te(Te({},this.pop),{},{second_setting_list:this.pop.second_setting_list.map(this.wrapReportInfo)}))},immediate:!0,deep:!0}},created:function(){window.reportVueCreated("src/views/teach/components/teach-half-screen/components/box-management-dialog/box-management-dialog.vue"),P.a.$on(P.b.WEFUNC_UPDATE_AUTH,this.updateWefuncAuth)},mounted:function(){var t=this;setTimeout((function(){t.$refs.scroll&&t.$refs.scroll._analysis()}),200)},methods:{onSwitch:function(t,e,i){var n,o=t.data,r=t.index;return o.auth_window?1==o.auth_switch?(this.directReject(o),void this.clickReport(e,i,f.g.CANCEL_CHANGE_CODE,o.auth_switch)):(this.$emit("openNewPop",{pop:o.auth_window||o.first_setting,itemInfo:e,itemPos:i,exposeBySelf:!0}),void this.clickReport(e,i,f.g.CLICK_SHOW_DIALOG)):o.first_setting?(this.$emit("openNewPop",{pop:o.first_setting}),void this.clickReport(e,i,f.g.CLICK_SHOW_DIALOG)):o.box_type?(o.checked=!o.checked,o.auth_switch=o.checked?1:0,o.onChecked&&o.onChecked(o),void(null!==(n=this.sPop.second_setting_list)&&void 0!==n&&n[r]&&(this.$set(this.sPop.second_setting_list,r,Te(Te({},this.sPop.second_setting_list[r]),{},{show_box:o})),this.$emit("change"),this.clickReport(e,i,f.g.CANCEL_CHANGE_CODE,!o.checked)))):void 0},directReject:function(t){var e=this;P.a.$emit(P.b.showToast,{action:1});var i={auth_switch:0,auth_type:t.auth_type,appuin:null==t?void 0:t.appuin};h.i.getCommonCgiData({cgiName:"UpdateWeFuncAuth",data:{update_auth:i},version:h.b.version}).then((function(t){if(t.errCode)throw new Error;P.a.$emit(P.b.showToast,{text:"已关闭"}),P.a.$emit(P.b.WEFUNC_UPDATE_AUTH,i),e.$emit("change")})).catch((function(t){P.a.$emit(P.b.showToast,{action:3,text:"请求失败，请稍后再试"})}))},updateWefuncAuth:function(t){var e=t.auth_type,i=t.appuin,n=t.auth_switch,o=this.sPop.second_setting_list.findIndex((function(t){var n,o,r,s;return(null==t||null===(n=t.wefunc_auth)||void 0===n||null===(o=n.auth_window)||void 0===o?void 0:o.appuin)==i&&(null==t||null===(r=t.wefunc_auth)||void 0===r||null===(s=r.auth_window)||void 0===s?void 0:s.auth_type)==e}));if(o>=0&&this.sPop.second_setting_list[o]){var r=this.sPop.second_setting_list[o].wefunc_auth;r.auth_switch=n,this.$set(this.sPop.second_setting_list,o,Te(Te({},this.sPop.second_setting_list[o]),{},{wefunc_auth:r}))}},wrapReportInfo:function(t){var e={};return t.show_box?e={id:t.type,docType:"setting",word:t.show_box.title,isDisplay:t.show_box.auth_switch}:t.wefunc_auth?e={id:t.type,docType:"auth_setting",word:t.wefunc_auth.title,appuin:t.wefunc_auth.appuin,isDisplay:t.wefunc_auth.auth_switch}:t.new_first&&(e={id:t.type,docType:"button",word:t.new_first.title}),Te(Te({},t),{},{reportInfo:Te(Te({},e),t)})},clickReport:function(t,e,i,n){this.M_clickReportFor26897(Te(Te({},t),{},{isDisplay:void 0!==n?~~n:t.isDisplay||""}),e,i)}}},je=(i(1903),Object(w.a)(Se,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroll",{ref:"scroll",staticClass:"box-management-dialog",attrs:{attr:"data-new-teach-report-id",expose:t.M_exposeReportFor26897,"expose-option":{isBindScrollAtContainer:!0}},nativeOn:{touchmove:function(t){t.stopPropagation()}}},t._l(t.sPop.second_setting_list,(function(e,n){return i("div",{key:n,staticClass:"item"},[e.type?i(t.itemCompMap[e.type],t._b({tag:"component",attrs:{"data-new-teach-report-id":e.desc_text?"":t.M_getItemReportId(e.reportInfo,n+1)},on:{switch:function(i){return t.onSwitch(i,e.reportInfo,n+1)},change:function(e){return t.$emit("change")}}},"component",{data:e.desc_text||e.show_box||e.wefunc_auth||e.new_first,index:n},!1)):t._e()],1)})),0)}),[],!1,null,"1bb1ac39",null).exports);function Re(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var Ne={created:function(){window.reportVueCreated("src/views/teach/components/teach-half-screen/components/auth-dialog/auth-dialog.vue")},mixins:[j.a],props:{pop:{type:Object,default:function(){return{}}},block:Object,typePos:Number,itemInfo:Object,itemPos:Number,exposeBySelf:Boolean},mounted:function(){this.exposeBySelf&&this.M_exposeReportFor26897([this.M_getItemReportId(this.itemInfo,this.itemPos)])},methods:{updateAuth:function(t){var e,i=this;P.a.$emit(P.b.showToast,{action:1});var n={auth_switch:t,auth_type:this.pop.auth_type,appuin:null===(e=this.pop)||void 0===e?void 0:e.appuin};h.i.getCommonCgiData({cgiName:"UpdateWeFuncAuth",data:{update_auth:n},version:h.b.version}).then((function(e){if(e.errCode)throw new Error;P.a.$emit(P.b.showToast,{text:"已".concat(t?"允许":"关闭")}),P.a.$emit(P.b.WEFUNC_UPDATE_AUTH,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Re(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},n)),i.$emit("change"),setTimeout((function(){i.$emit("hide")}),300)})).catch((function(t){P.a.$emit(P.b.showToast,{action:3,text:"请求失败，请稍后再试"})})),this.M_clickReportFor26897(this.itemInfo,this.itemPos,{actionId:t?f.g.CONFIRM_CHANGE_CODE:f.g.CANCEL_CHANGE_CODE})}}},De=(i(2479),Object(w.a)(Ne,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.pop?i("div",{staticClass:"auth-dialog"},[t.pop.icon?i("div",{staticClass:"auth-dialog-icon"},[i("ui-image",{staticClass:"icon",attrs:{type:"icon",url:t.pop.icon,size:56}})],1):t._e(),t.pop.title?i("div",{staticClass:"auth-dialog-title"},[t._v(t._s(t.pop.title))]):t._e(),t.pop.desc?i("div",{staticClass:"auth-dialog-desc"},[t._v(t._s(t.pop.desc))]):t._e(),i("div",{staticClass:"auth-dialog-btns"},[i("div",{staticClass:"auth-dialog-btns__item",attrs:{role:"button"},on:{click:function(e){return t.updateAuth(0)}}},[t._v("拒绝")]),i("div",{staticClass:"auth-dialog-btns__item primary",attrs:{role:"button"},on:{click:function(e){return t.updateAuth(1)}}},[t._v("允许")])])]):t._e()}),[],!1,null,"17e42c46",null).exports),Me={props:{source:{type:Object,default:function(){return{}}}}},He=(i(1533),Object(w.a)(Me,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.source?i("div",{staticClass:"wefunc_source"},[i("div",{staticClass:"wefunc_source_info"},[t.source.appicon?i("online-image",{staticClass:"wefunc_source_info_thumb",attrs:{url:t.source.appicon,mode:"avatar"}}):t._e(),t.source.appname?i("div",{staticClass:"wefunc_source_info_title"},[t._v(t._s(t.source.appname))]):t._e()],1),i("div",{staticClass:"wefunc_source_operation"},[t._t("default")],2)]):t._e()}),[],!1,null,"2d184e86",null).exports),Ae={props:{wefunc:{type:Object,default:function(){return{}}}}},Le=(i(1534),Object(w.a)(Ae,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"add-operation",class:{center:!t.wefunc.func_icon_list||!t.wefunc.func_icon_list.length}},[t.wefunc.add_icon?i("ui-image",{staticClass:"icon",attrs:{url:t.wefunc.add_icon}}):t._e(),t.wefunc.add_text?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.add_text))]):t._e(),t.wefunc.func_icon_list&&t.wefunc.func_icon_list.length?i("div",{staticClass:"list"},t._l(t.wefunc.func_icon_list,(function(t,e){return i("ui-image",{key:e,attrs:{url:t,mode:"avatar"}})})),1):t._e(),t.wefunc.desc_text||t.wefunc.func_text?i("div",{staticClass:"desc"},[t.wefunc.func_text?i("div",{staticClass:"desc_name"},[t._v(t._s(t.wefunc.func_text))]):t._e(),t.wefunc.desc_text?i("div",{staticClass:"desc_count"},[t._v(t._s(t.wefunc.desc_text))]):t._e()]):t._e()],1):t._e()}),[],!1,null,"053602c7",null).exports),$e={props:{wefunc:{type:Object,default:function(){return{}}}}},Be=(i(1535),Object(w.a)($e,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"pure-text"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),t.wefunc.abstract?i("div",{staticClass:"abstract",class:{"has-desc":t.wefunc.desc}},[t._v(t._s(t.wefunc.abstract))]):t._e(),t.wefunc.desc?i("div",{staticClass:"desc"},[t._v(t._s(t.wefunc.desc))]):t._e()]):t._e()}),[],!1,null,"0ca8142f",null).exports),Fe={props:{wefunc:{type:Object,default:function(){return{}}}}},We=(i(1536),Object(w.a)(Fe,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"pure-text-with-icon"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),i("div",{staticClass:"info"},[t.wefunc.icon?i("ui-image",{staticClass:"info_icon",attrs:{url:t.wefunc.icon,mode:"plain",type:"img"}}):t._e(),t.wefunc.subtitle?i("div",{staticClass:"info_subtitle"},[t._v(t._s(t.wefunc.subtitle))]):t._e()],1),t.wefunc.desc?i("div",{staticClass:"desc"},[t._v(t._s(t.wefunc.desc))]):t._e()]):t._e()}),[],!1,null,"01aa446f",null).exports),qe={props:["button"]},Ue=(i(1540),Object(w.a)(qe,(function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return e.button&&e.button.type?n("div",{staticClass:"wefunc-button",class:(t={},t["button_with_style_"+e.button.type]=e.button.type,t)},[n("div",{staticClass:"wefunc-button_title"},[e._v(e._s(e.button.title))])]):e._e()}),[],!1,null,"53fdc49b",null).exports),Ge={created:function(){window.reportVueCreated("src/views/teach/components/wefunc/funcs/icon-title-with-action/icon-title-with-action.vue")},components:{wefuncButton:Ue},props:{wefunc:{type:Object,default:function(){return{}}}}},Ve=(i(1554),Object(w.a)(Ge,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"icon-title-with-action"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),i("div",{staticClass:"info"},[t.wefunc.icon?i("ui-image",{staticClass:"info_icon",attrs:{url:t.wefunc.icon,type:"img"}}):t._e(),t.wefunc.subtitle?i("div",{staticClass:"info_subtitle"},[t._v(t._s(t.wefunc.subtitle))]):t._e()],1),i("wefunc-button",{staticClass:"action",attrs:{button:t.wefunc.button}})],1):t._e()}),[],!1,null,"a7580ff6",null).exports),Ke={created:function(){window.reportVueCreated("src/views/teach/components/wefunc/funcs/text-with-micro-title/text-with-micro-title.vue")},props:{wefunc:{type:Object,default:function(){return{}}}}},Ye=(i(1655),Object(w.a)(Ke,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"text-with-micro-title"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),i("div",{staticClass:"info"},[t.wefunc.icon?i("ui-image",{staticClass:"info_icon",attrs:{url:t.wefunc.icon,mode:"plain",type:"img"}}):t._e(),t.wefunc.subtitle?i("div",{staticClass:"info_subtitle"},[t._v(t._s(t.wefunc.subtitle))]):t._e()],1),t.wefunc.desc?i("div",{staticClass:"desc"},[t._v(t._s(t.wefunc.desc))]):t._e()]):t._e()}),[],!1,null,"e7608ab8",null).exports),ze={props:{colorfulText:{type:Object,default:function(){return{}}},fontSize:{type:Number,default:20},isBold:{type:Boolean,default:!1}},computed:{textStyle:function(){var t,e="var(--FG-0)";switch((null===(t=this.colorfulText)||void 0===t?void 0:t.type)||0){case 1:e="var(--RED)";break;case 2:e="var(--ORANGE)";break;case 3:e="var(--INDIGO)";break;case 4:e="var(--YELLOW)";break;case 5:e="var(--TEXTGREEN)"}return"font-size: ".concat(this.fontSize,"px; color: ").concat(e,";")}}},Xe=(i(1520),Object(w.a)(ze,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.colorfulText&&null!=(t.colorfulText.title||t.colorfulText.value)?i("div",{staticClass:"wefunc-colorful-text",class:{bold:t.isBold},style:t.textStyle},[i("span",[t._v(t._s(t.colorfulText.title||t.colorfulText.value))]),t.colorfulText.withIcon?i("div",{staticClass:"wefunc-colorful-text__icon"},[t.colorfulText.descIcon?i("ui-image",{staticClass:"icon",attrs:{url:t.wefunc.descIcon,type:"img"}}):1==t.colorfulText.type?i("ui-image",{staticClass:"icon up",attrs:{url:"https://res.wx.qq.com/t/fed_upload/2544d6da-72a5-423b-bb54-d2de976d57f6/up.svg",type:"icon"}}):5==t.colorfulText.type?i("ui-image",{staticClass:"icon down",attrs:{url:"https://res.wx.qq.com/t/fed_upload/2e001c64-9344-43a1-ae27-7546138079d1/down.svg",type:"icon"}}):t._e()],1):t._e()]):t._e()}),[],!1,null,"a4dd0db0",null).exports),Ze={created:function(){window.reportVueCreated("src/views/teach/components/wefunc/funcs/text-with-columns/text-with-columns.vue")},components:{colorfulText:Xe},props:{wefunc:{type:Object,default:function(){return{}}}},computed:{columnItemStyle:function(){var t;return null!==(t=this.wefunc.items)&&void 0!==t&&t.length?"width: calc(100% / ".concat(this.wefunc.items.length,");"):""}}},Qe=(i(1658),Object(w.a)(Ze,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"text-with-columns"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),t.wefunc.items&&t.wefunc.items.length?i("div",{staticClass:"columns"},t._l(t.wefunc.items,(function(e,n){return i("div",{key:n,staticClass:"columns-item",style:t.columnItemStyle},[i("colorful-text",{attrs:{"colorful-text":e,"is-bold":!0}}),e.desc?i("div",{staticClass:"columns-item-desc"},[t._v(t._s(e.desc))]):t._e()],1)})),0):t._e(),t.wefunc.desc?i("div",{staticClass:"desc"},[t._v(t._s(t.wefunc.desc))]):t._e()]):t._e()}),[],!1,null,"3e899c31",null).exports),Je={created:function(){window.reportVueCreated("src/views/teach/components/wefunc/funcs/grey-title-with-action/grey-title-with-action.vue")},components:{wefuncButton:Ue},props:{wefunc:{type:Object,default:function(){return{}}}}},ti=(i(1756),Object(w.a)(Je,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"grey-title-with-action"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),i("div",{staticClass:"info"},[t.wefunc.subtitle?i("div",{staticClass:"info_subtitle"},[t._v(t._s(t.wefunc.subtitle))]):t._e()]),t.wefunc.desc?i("div",{staticClass:"desc"},[t._v(t._s(t.wefunc.desc))]):t._e(),i("wefunc-button",{staticClass:"action",attrs:{button:t.wefunc.button}})],1):t._e()}),[],!1,null,"76e51316",null).exports),ei={props:{wefunc:{type:Object,default:function(){return{}}}}},ii=(i(1769),Object(w.a)(ei,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"title-with-big-icon"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),t.wefunc.icon?i("div",{staticClass:"info"},[i("div",{staticClass:"info_inner"},[i("div",{staticClass:"info_inner_icon"},[i("ui-image",{attrs:{url:t.wefunc.icon,type:"img"}})],1)])]):t._e()]):t._e()}),[],!1,null,"1b659782",null).exports),ni={created:function(){window.reportVueCreated("src/views/teach/components/wefunc/funcs/title-with-icon-line/title-with-icon-line.vue")},props:{wefunc:{type:Object,default:function(){return{}}}}},oi=(i(1806),Object(w.a)(ni,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"title-with-icon-line"},[t.wefunc.subtitle?i("div",{staticClass:"subtitle"},[t._v(t._s(t.wefunc.subtitle))]):t._e(),t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),t.wefunc.items&&t.wefunc.items.length?i("div",{staticClass:"info"},t._l(t.wefunc.items,(function(e,n){return i("div",{key:n,staticClass:"info_item"},[e.icon?i("ui-image",{attrs:{url:e.icon,type:"img"}}):t._e(),e.title?i("div",{staticClass:"info_item_title"},[t._v(t._s(e.title))]):t._e()],1)})),0):t._e()]):t._e()}),[],!1,null,"72e64ef2",null).exports),ri={created:function(){window.reportVueCreated("src/views/teach/components/wefunc/funcs/icon-desc-list/icon-desc-list.vue")},props:{wefunc:{type:Object,default:function(){return{}}}}},si=(i(1837),Object(w.a)(ri,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"icon-desc-list"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),t.wefunc.items&&t.wefunc.items.length?i("div",{staticClass:"info"},t._l(t.wefunc.items,(function(e,n){return i("div",{key:n,staticClass:"info_item"},[e.withIndex?i("div",{staticClass:"info_item_index"},[t._v(t._s(n+1))]):t._e(),e.icon?i("ui-image",{attrs:{url:e.icon,type:"icon"}}):t._e(),e.title?i("div",{staticClass:"info_item_title"},[t._v(t._s(e.title))]):t._e(),e.value?i("div",{staticClass:"info_item_desc"},[t._v(t._s(e.value))]):t._e()],1)})),0):t._e()]):t._e()}),[],!1,null,"0f9503e4",null).exports),ai={components:{wefuncButton:Ue,colorfulText:Xe},props:{wefunc:{type:Object,default:function(){return{}}}}},ci=(i(1928),Object(w.a)(ai,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"icon-title-with-action"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),t.wefunc.items&&t.wefunc.items.length?i("div",{staticClass:"info"},t._l(t.wefunc.items,(function(t,e){return i("div",{key:e,staticClass:"info_item"},[i("colorful-text",{attrs:{"colorful-text":t,"font-size":17,"is-bold":!0}})],1)})),0):t._e(),i("wefunc-button",{staticClass:"action",attrs:{button:t.wefunc.button}})],1):t._e()}),[],!1,null,"5ec2dec9",null).exports),li={components:{colorfulText:Xe,wefuncButton:Ue},props:{wefunc:{type:Object,default:function(){return{}}},isEdit:Boolean},data:function(){return{isSingle:!1,styleReady:!1}},watch:{wefunc:{handler:function(t,e){this.setStyle()},deep:!0,immediate:!0},isEdit:{handler:function(t,e){this.setStyle()},deep:!0,immediate:!0}},mounted:function(){this.setStyle()},methods:{setStyle:function(){var t,e=window.screen.width||0,i=document.querySelectorAll(".list_item_info");if(1==this.wefunc.items.length&&this.wefunc.button)return this.isSingle=!1,void(this.styleReady=!0);if((null===(t=this.wefunc.items)||void 0===t?void 0:t.length)<=1||e<360)return this.isSingle=!0,void(this.styleReady=!0);if(i&&i.length)for(var n=0;n<i.length;n++){var o,r,s,a=i[n],c=(null===(o=a.getBoundingClientRect())||void 0===o?void 0:o.width)||0,l=a.querySelector(".list_item_info_value"),u=(null==l||null===(r=l.getBoundingClientRect())||void 0===r?void 0:r.width)||0,d=a.querySelector(".list_item_info_desc"),p=(null==d||null===(s=d.getBoundingClientRect())||void 0===s?void 0:s.width)||0;this.isSingle=u+p>c}this.styleReady=!0}}},ui=(i(1974),Object(w.a)(li,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"number-ratio-index-list",class:{show:t.styleReady}},[t.wefunc.items&&t.wefunc.items.length?i("div",{staticClass:"list"},[t._l(t.wefunc.items,(function(e,n){return[!t.isSingle||t.isSingle&&0==n?i("div",{key:n,staticClass:"list_item",class:{single:t.isSingle}},[e.title?i("div",{staticClass:"list_item_title"},[t._v(t._s(e.title))]):t._e(),null!=e.number?i("div",{staticClass:"list_item_info"},[i("colorful-text",{staticClass:"list_item_info_value",attrs:{"colorful-text":e.number,"is-bold":!0,"font-size":t.isSingle?20:17}}),i("colorful-text",{staticClass:"list_item_info_desc",attrs:{"colorful-text":e.desc,"is-bold":!0,"font-size":14}})],1):t._e()]):t._e()]}))],2):t._e(),i("wefunc-button",{staticClass:"action",attrs:{button:t.wefunc.button}})],1):t._e()}),[],!1,null,"40c7f17c",null).exports),di={props:{wefunc:{type:Object,default:function(){return{}}}}},pi=(i(1998),Object(w.a)(di,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wefunc?i("div",{staticClass:"double-column-info"},[t.wefunc.title?i("div",{staticClass:"title"},[t._v(t._s(t.wefunc.title))]):t._e(),t.wefunc.items&&t.wefunc.items.length?i("div",{staticClass:"list"},t._l(t.wefunc.items,(function(e,n){return i("div",{key:n,staticClass:"list_item",class:{more:t.wefunc.items.length>2}},[e.title?i("div",{staticClass:"list_item_title"},[t._v(t._s(e.title))]):t._e(),e.value?i("div",{staticClass:"list_item_value"},[t._v(t._s(e.value))]):t._e()])})),0):t._e()]):t._e()}),[],!1,null,"01cd9a05",null).exports);function hi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function fi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?hi(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):hi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var mi=new ke.a({NOTHING:0,REFRESH:1,ERROR:2}),_i=new ke.a({ADD_OPERATION:0,PURE_TEXT:1,PURE_TEXT_WITH_ICON:2,ICON_TITLE_WITH_ACTION:3,TEXT_WITH_MICRO_TITLE:4,TEXT_WITH_COLUMNS:5,GREY_TITLE_WITH_ACTION:6,TITLE_WITH_BIG_ICON:7,NUMBER_RATIO_INDEX_LIST:8,ICON_DESC_LIST:9,DOUBLE_COLUMN_INFO:10,TITLE_WITH_ICON_LINE:11,COLOR_LIST_WITH_ACTION:12}),bi={components:{wefuncSource:He,addOperation:Le,pureText:Be,pureTextWithIcon:We,iconTitleWithAction:Ve,textWithMicroTitle:Ye,textWithColumns:Qe,greyTitleWithAction:ti,titleWithBigIcon:ii,titleWithIconLine:oi,iconDescList:si,colorListWithAction:ci,numberRatioIndexList:ui,doubleColumnInfo:pi},mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},isEdit:Boolean,typePos:String,wefuncCandidateList:Array},data:function(){var t;return{wefuncMap:(t={},u()(t,_i.PURE_TEXT,"pure-text"),u()(t,_i.PURE_TEXT_WITH_ICON,"pure-text-with-icon"),u()(t,_i.ICON_TITLE_WITH_ACTION,"icon-title-with-action"),u()(t,_i.TEXT_WITH_MICRO_TITLE,"text-with-micro-title"),u()(t,_i.TEXT_WITH_COLUMNS,"text-with-columns"),u()(t,_i.GREY_TITLE_WITH_ACTION,"grey-title-with-action"),u()(t,_i.ADD_OPERATION,"add-operation"),u()(t,_i.TITLE_WITH_BIG_ICON,"title-with-big-icon"),u()(t,_i.TITLE_WITH_ICON_LINE,"title-with-icon-line"),u()(t,_i.ICON_DESC_LIST,"icon-desc-list"),u()(t,_i.COLOR_LIST_WITH_ACTION,"color-list-with-action"),u()(t,_i.NUMBER_RATIO_INDEX_LIST,"number-ratio-index-list"),u()(t,_i.DOUBLE_COLUMN_INFO,"double-column-info"),t),teachType:tt.a.teachType,wefuncHandlerType:mi,refreshInterval:null,scaleStyle:"",lastRefreshTime:0,refreshErrorCount:0,darkMode:h.g.isDarkMode()}},computed:{showInfo:function(){try{var t;return fi(fi({},this.block.base),JSON.parse(null===(t=this.block.show)||void 0===t?void 0:t.show_json))}catch(e){return null}},isAddOperation:function(){return this.block.type==tt.a.teachType.WEFUNC_ADD_OPERATION},isCandidate:function(){return this.block.type==tt.a.teachType.WEFUNC_UNADD}},watch:{block:{handler:function(t,e){var i,n,o,r;if((null===(i=this.block)||void 0===i||null===(n=i.wefunc_handler)||void 0===n?void 0:n.type)!=mi.NOTHING&&null!==(o=this.block)&&void 0!==o&&null!==(r=o.wefunc_handler)&&void 0!==r&&r.refresh_time&&t!=e&&Date.now()-this.lastRefreshTime>1e3*this.block.wefunc_handler.refresh_time){var s,a;if((null===(s=this.block)||void 0===s||null===(a=s.wefunc_handler)||void 0===a?void 0:a.type)==mi.ERROR){if(this.refreshErrorCount>5)return;this.refreshErrorCount=this.refreshErrorCount+1}this.$emit("refresh:item",this.block),this.lastRefreshTime=Date.now(),this.resetFontSize()}},deep:!0,immediate:!0},isEdit:function(){this.resetFontSize()}},created:function(){var t=this;H.b.onWebviewResume((function(){t.openAuthWindow()}))},beforeDestroy:function(){clearTimeout(this.refreshInterval),this.refreshInterval=null},mounted:function(){this.resetFontSize()},methods:{onClickWefunc:function(){if(this.block.type==tt.a.teachType.WEFUNC_ADD_OPERATION)P.a.$emit(P.b.TEACH_SHOW_HALF_SCREEN,{pop:{type:2,canScroll:!0,wefuncCandidateList:this.wefuncCandidateList,className:"grey-teach-halfscreen",header:{close:!0,title:"可添加的小功能"}}}),this.M_clickReportFor26897(this.showInfo,1,{actionId:f.g.CLICK_SHOW_DIALOG});else if(this.block.type==tt.a.teachType.WEFUNC_UNADD)this.$emit("add",this.block),this.M_clickReportFor26897(this.showInfo,1,{actionId:f.g.CLICK_ADD});else if(!this.isEdit){var t,e,i;null!==(t=this.showInfo)&&void 0!==t&&t.jumpInfo?(this.M_go(fi(fi({},this.showInfo),{},{jumpInfo:fi(fi({},this.showInfo.jumpInfo),{},{startWeAppScene:1252})})),this.M_clickReportFor26897(this.showInfo,1),this.checkAuth()):null!==(e=this.block)&&void 0!==e&&null!==(i=e.base)&&void 0!==i&&i.jumpInfo&&(this.M_go(fi(fi({},this.block.base),{},{jumpInfo:fi(fi({},this.block.base),{},{startWeAppScene:1252})})),this.M_clickReportFor26897(fi(fi({},this.showInfo),{},{jumpInfo:this.block.base.jumpInfo}),1))}},resetFontSize:function(){var t=document.body.clientWidth,e=document.createElement("div");e.style="font-size:15px;",document.body.appendChild(e);var i=parseInt(window.getComputedStyle(e,null).getPropertyValue("font-size"));document.body.removeChild(e);var n=Global.os.android?15/i:1,o=(t-(this.isEdit||this.isCandidate?48:24))/2/195;!Global.os.android&&o>=.95||(this.scaleStyle=["width: calc(195px / ".concat(n,");"),"height: calc(195px / ".concat(n,");"),"transform: scale(".concat(n*o,");"),"transform-origin: left top;"].join(""))},checkAuth:function(){var t,e,i;(null===(t=this.block)||void 0===t||null===(e=t.base)||void 0===e||null===(i=e.auth_list)||void 0===i?void 0:i.length)>=1&&(this.__goWeappFlag=!0)},openAuthWindow:function(){if(this.__goWeappFlag){this.__goWeappFlag=!1;var t=this.block.base.auth_list[0];P.a.$emit(P.b.TEACH_SHOW_HALF_SCREEN,{pop:t,extInfo:{block:this.block,typePos:this.typePos,itemInfo:this.showInfo,itemPos:1,exposeBySelf:!0}})}},onDelete:function(){this.$emit("delete:item",this.block),this.M_clickReportFor26897(this.showInfo,1,{actionId:f.g.CLICK_DELETE})}}},yi=(i(1214),Object(w.a)(bi,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"basic-wefunc",style:t.scaleStyle,attrs:{"data-new-teach-report-id":""+t.M_getItemReportId(t.showInfo,1),"data-expose-ratio":.5},on:{click:t.onClickWefunc}},[t.block.base&&t.block.base.appuin?i("wefunc-source",t._b({},"wefunc-source",{source:t.block.base},!1),[t._t("source")],2):t._e(),t.block.wefunc_handler&&t.block.wefunc_handler.type==t.wefuncHandlerType.ERROR?[i("div",{staticClass:"basic-wefunc-error"},[i("div",{staticClass:"basic-wefunc-error__title"},[t._v(t._s(t.block.wefunc_handler&&t.block.wefunc_handler.err_title||"暂未获取到数据"))]),i("div",{staticClass:"basic-wefunc-error__desc"},[t._v(t._s(t.block.wefunc_handler&&t.block.wefunc_handler.err_desc||"请稍后再试"))])])]:[t.showInfo?i("div",{staticClass:"basic-wefunc-main"},[t.showInfo.type>=0?i(t.wefuncMap[t.showInfo.type],t._b({tag:"component"},"component",Object.assign({},t.$props,{wefunc:t.showInfo}),!1)):t._e()],1):t._e()],t.isEdit&&t.block.type!=t.teachType.WEFUNC_ADD_OPERATION?i("div",{staticClass:"basic-wefunc-delete expand-hotspot__after",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onDelete.apply(null,arguments)}}},[i("ui-image",{attrs:{type:"img",url:t.darkMode?"https://res.wx.qq.com/t/fed_upload/fb2bc256-1f06-414a-96eb-1d33353f7e1e/wefunc-edit-dark.svg":"https://res.wx.qq.com/t/fed_upload/8e15ebe0-905b-4c2f-b2c7-332512ddc1ea/wefunc-edit-light.svg"}})],1):t._e()],2)}),[],!1,null,"0e8b797c",null).exports);function vi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function gi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vi(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var wi=new ke.a({NOTHING:0,REFRESH:1,ERROR:2}),Ii={components:{scroll:Y.a,basicWefunc:yi},mixins:[j.a],props:{pop:{type:Object,default:function(){return{}}},extInfo:{type:Object,default:function(){return{}}}},data:function(){return{wefuncCandidateList:[],refreshItemQueue:[],refreshInterval:null,wefuncDataReady:!1,exposeOption:null}},watch:{refreshItemQueue:{deep:!0,handler:function(){var t=this;this.refreshItemQueue.length&&!this.refreshInterval&&(this.refreshInterval=setInterval((function(){t.refreshList(),clearInterval(t.refreshInterval),t.refreshInterval=null,t.refreshItemQueue=[]}),1e3))}},"pop.wefuncCandidateList":function(){this.wefuncCandidateList=this.pop.wefuncCandidateList||[]}},created:function(){var t=this;return c()(p.a.mark((function e(){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wefuncCandidateList=(null===(i=t.pop)||void 0===i?void 0:i.wefuncCandidateList)||[],t.wefuncDataReady=!0,t.wefuncCandidateList.length){e.next=8;break}return t.showToast(1),e.next=6,t.reqList();case 6:P.a.$emit(P.b.hideToast),t.wefuncDataReady=!0;case 8:case"end":return e.stop()}}),e)})))()},mounted:function(){this.exposeOption={container:this.$root.$el.querySelector(".ui-content-wrapper"),isBindScrollAtContainer:!0}},beforeDestroy:function(){clearInterval(this.refreshInterval),this.refreshInterval=null,this.refreshItemQueue=[]},methods:{reqList:function(){var t=this;return c()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.i.getCommonCgiData({cgiName:"GetWeFuncList",data:{sessionid:h.b.sessionId||"",req_type:1,offset:0},version:h.b.version}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.wefuncCandidateList=e.wefunc_list||[],P.a.$emit(P.b.WEFUNC_UPDATE_CANDIDATE_LIST,t.wefuncCandidateList)}));case 2:case"end":return e.stop()}}),e)})))()},onAddWefunc:function(t){var e;t&&null!=t&&null!==(e=t.base)&&void 0!==e&&e.wefunc_id&&P.a.$emit(P.b.WEFUNC_ADD,t)},showToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;P.a.$emit(P.b.showToast,gi({action:t},3==t?{text:"请求失败，请稍后再试"}:{}))},onRefreshItem:function(t){var e,i;if(null!=t&&null!==(e=t.base)&&void 0!==e&&e.appuin&&null!=t&&null!==(i=t.base)&&void 0!==i&&i.wefunc_id){var n="".concat(t.base.appuin,"||").concat(t.base.wefunc_id);this.refreshItemQueue.includes(n)||this.refreshItemQueue.push(n)}},refreshList:function(){var t=this;if(this.refreshItemQueue.length){var e=this.refreshItemQueue.slice();h.i.getCommonCgiData({cgiName:"BatchGetWeFunc",data:{sessionid:h.b.sessionId||"",box_type:tt.a.teachType.WEFUNC_UNADD,get_list:e.map((function(t){var e,i;return{appuin:parseInt((null==t||null===(e=t.split("||"))||void 0===e?void 0:e[0])||0),wefunc_id:parseInt((null==t||null===(i=t.split("||"))||void 0===i?void 0:i[1])||0)}}))},version:h.b.version}).then((function(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=i&&null!==(e=i.wefunc_list)&&void 0!==e&&e.length&&t.wefuncCandidateList.length&&(i.wefunc_list.forEach((function(e){var i,n,o,r=t.wefuncCandidateList.findIndex((function(t){var i,n,o,r;return(null==t||null===(i=t.base)||void 0===i?void 0:i.appuin)==(null==e||null===(n=e.base)||void 0===n?void 0:n.appuin)&&(null==t||null===(o=t.base)||void 0===o?void 0:o.wefunc_id)==(null==e||null===(r=e.base)||void 0===r?void 0:r.wefunc_id)}));null!==(i=e.show)&&void 0!==i&&i.show_json&&"{}"!=(null===(n=e.show)||void 0===n?void 0:n.show_json)&&(null===(o=e.wefunc_handler)||void 0===o?void 0:o.type)!=wi.ERROR&&(t.wefuncCandidateList[r].show=e.show),t.wefuncCandidateList[r].wefunc_handler=e.wefunc_handler})),P.a.$emit(P.b.WEFUNC_UPDATE_CANDIDATE_LIST,t.wefuncCandidateList))})).catch((function(e){t.refreshItemQueue}))}},getMixPos:function(t){var e=parseInt(t/2)+1,i=parseInt(t%2)+1;return"1#".concat(e,"-").concat(i)},getWefuncAppname:function(t){var e;return(null==t||null===(e=t.base)||void 0===e?void 0:e.appname)||""}}},Oi=(i(2515),Object(w.a)(Ii,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wefunc-dialog-wrap"},[i("div",{staticClass:"wefunc-desc"},[t._v("来自使用过的小程序，轻触即可添加")]),t.exposeOption?i("scroll",{attrs:{attr:"data-new-teach-report-id",expose:t.M_exposeReportFor26897,"expose-option":t.exposeOption}},[t.wefuncCandidateList&&t.wefuncCandidateList.length?i("div",{staticClass:"wefunc-list"},t._l(t.wefuncCandidateList,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:n,staticClass:"wefunc-list-item active__absolute"},[i("basic-wefunc",t._b({staticClass:"wefunc-list-item__inner",on:{add:t.onAddWefunc,"refresh:item":t.onRefreshItem}},"basic-wefunc",{block:Object.assign({},e,{title:t.getWefuncAppname(e)}),typePos:t.getMixPos(n)},!1))],1)})),0):t.wefuncDataReady?i("div",{staticClass:"empty"},[t._v("\n      暂无可添加的小功能\n    ")]):t._e()]):t._e()],1)}),[],!1,null,"14d84dfa",null).exports),Ci=["header","type","canScroll"];function xi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var ki=new ke.a({PAGE_SETTING:1,WEFUNC_COLLECTION:2,AUTH_DIALOG:3,BOX_MANAGEMENT_DIALOG:4}),Ei={components:{pageSettingDialog:be,wefuncDialog:Oi,boxManagementDialog:je,authDialog:De},mixins:[j.a],data:function(){var t;return{pop:null,extInfo:null,itemInfo:null,itemPos:null,secPop:null,showSecPop:!1,secExposeBySelf:!1,thirdPop:null,showThirdPop:!1,thirdExposeBySelf:!1,halfScreenContentMap:(t={},u()(t,ki.PAGE_SETTING,"page-setting-dialog"),u()(t,ki.WEFUNC_COLLECTION,"wefunc-dialog"),u()(t,ki.AUTH_DIALOG,"auth-dialog"),u()(t,ki.BOX_MANAGEMENT_DIALOG,"box-management-dialog"),t)}},created:function(){P.a.$on(P.b.TEACH_SHOW_HALF_SCREEN,this.show),P.a.$on(P.b.TEACH_HIDE_HALF_SCREEN,this.hide)},beforeDestroy:function(){P.a.$off(P.b.TEACH_SHOW_HALF_SCREEN,this.show),P.a.$off(P.b.TEACH_HIDE_HALF_SCREEN,this.hide)},methods:{show:function(t){var e=t.pop,i=void 0===e?{}:e,n=t.extInfo,o=void 0===n?{}:n;this.pop=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?xi(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({type:0,canScroll:!1},i),this.extInfo=o,this.$refs.teachHalfScreen&&this.$refs.teachHalfScreen.show()},hide:function(){this.$refs.teachHalfScreen&&this.$refs.teachHalfScreen.hide()},onTapClose:function(){var t;this.M_clickReportFor26897("",null===(t=this.extInfo)||void 0===t?void 0:t.typePos,{actionId:f.g.CLICK_CLOSE_DIALOG},this.extInfo)},openNewPop:function(t){var e=t.pop,i=t.itemInfo,n=t.itemPos,o=t.exposeBySelf;this.showSecPop?(this.thirdPop=e,this.itemInfo=i,this.itemPos=n,this.showThirdPop=!0,this.thirdExposeBySelf=o):(this.thirdPop=null,this.showThirdPop=!1,this.secPop=e,this.itemInfo=i,this.itemPos=n,this.secExposeBySelf=o,this.showSecPop=!0)},onHideThirdPop:function(){this.$emit("cancel"),this.thirdPop=null,this.showThirdPop=!1,this.M_clickReportFor26897(this.itemInfo,this.itemPos,{actionId:f.g.CLICK_CLOSE_DIALOG},this.extInfo)},onHideSecPop:function(){this.$emit("cancel"),this.secPop=null,this.showSecPop=!1,this.thirdPop=null,this.showThirdPop=!1,this.M_clickReportFor26897(this.itemInfo||{},this.itemPos,{actionId:f.g.CLICK_CLOSE_DIALOG},this.extInfo)},onChange:function(){var t=this.pop,e=(t.header,t.type,t.canScroll,he()(t,Ci));P.a.$emit(P.b.WEFUNC_UPDATE_BOX_STORAGE,e)}}},Ti=(i(3141),Object(w.a)(Ei,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-half-screen",{ref:"teachHalfScreen",attrs:{header:t.pop&&t.pop.header,"can-scroll":t.pop&&t.pop.canScroll,"class-name":t.pop&&t.pop.className?t.pop.className:"teach-halfscreen"},on:{"tap:close":t.onTapClose,"tap:mask":t.onTapClose}},[t.pop&&t.pop.type?i("div",{staticClass:"teach-halfscreen-wrap"},[i(t.halfScreenContentMap[t.pop.type],t._b({tag:"component",on:{openNewPop:t.openNewPop,change:t.onChange,hide:t.hide}},"component",Object.assign({},t.extInfo,{pop:t.pop}),!1))],1):t._e(),i("half-screen",{staticClass:"secPop",attrs:{show:t.secPop&&t.showSecPop||!1,header:t.secPop&&t.secPop.header,"forbid-click-mask":!1},on:{cancel:t.onHideSecPop}},[t.secPop?i("div",{staticClass:"teach-halfscreen-wrap",attrs:{slot:"body"},slot:"body"},[i(t.halfScreenContentMap[t.secPop.type],t._b({tag:"component",on:{hide:t.onHideSecPop,openNewPop:t.openNewPop,change:t.onChange}},"component",Object.assign({},t.extInfo,{itemInfo:t.itemInfo,pop:t.secPop,itemPos:t.itemPos,exposeBySelf:t.secExposeBySelf}),!1))],1):t._e()]),i("half-screen",{staticClass:"thirdPop",attrs:{show:t.thirdPop&&t.showThirdPop||!1,header:t.thirdPop&&t.thirdPop.header,"forbid-click-mask":!1},on:{cancel:t.onHideThirdPop}},[t.thirdPop?i("div",{staticClass:"teach-halfscreen-wrap",attrs:{slot:"body"},slot:"body"},[i(t.halfScreenContentMap[t.thirdPop.type],t._b({tag:"component",on:{hide:t.onHideThirdPop,change:t.onChange}},"component",Object.assign({},t.extInfo,{itemInfo:t.itemInfo,pop:t.thirdPop,itemPos:t.itemPos,exposeBySelf:t.thirdExposeBySelf}),!1))],1):t._e()])],1)}),[],!1,null,"0b71102c",null).exports);function Pi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Si(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Pi(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Pi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ji=new ke.a({BOX_SHOW_SWITCH:11,DETAIL_LOCATION:12,FUZZY_LOCATION:13,TEXT_BOX:14}),Ri={mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0},displayPos:{type:Number,default:0}},data:function(){return{firstSetting:null}},watch:{block:{handler:function(){this.firstSetting=Object.assign({},this.block.first_setting||{})},immediate:!0,deep:!0}},created:function(){P.a.$on(P.b.WEFUNC_UPDATE_BOX_MANAGE,this.updateBoxManage),P.a.$on(P.b.WEFUNC_UPDATE_BOX_STORAGE,this.updateBoxManageStorage)},beforeDestroy:function(){P.a.$off(P.b.WEFUNC_UPDATE_BOX_MANAGE,this.updateBoxManage),P.a.$off(P.b.WEFUNC_UPDATE_BOX_STORAGE,this.updateBoxManageStorage)},methods:{updateBoxManage:function(){var t=this;h.i.getCommonCgiData({cgiName:"GetWeFuncAuth",data:{sessionid:h.b.sessionId||"",need_format_data:1},version:h.b.version}).then((function(){var e,i,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.firstSetting;if(null!=n&&null!==(e=n.format_data)&&void 0!==e&&null!==(i=e.second_setting_list)&&void 0!==i&&i.length){var r=n.format_data.second_setting_list[0],s=o.second_setting_list.findIndex((function(t){var e,i;return t.type==ji.TEXT_BOX&&(null==r||null===(e=r.desc_text)||void 0===e?void 0:e.title)==(null==t||null===(i=t.desc_text)||void 0===i?void 0:i.title)}));s>=0&&(o.second_setting_list=o.second_setting_list.slice(0,s).concat(n.format_data.second_setting_list),t.updateBoxManageStorage(o)),t.firstSetting=o}}))},updateBoxManageStorage:function(t){var e="HOME_TOP_ENTRY_PERMANENT_KEY_V3_".concat(h.b.type,"_").concat(h.b.scene);h.e.get({key:e}).then((function(i){if(i&&i.data){var n=i.data.findIndex((function(t){return t.type===tt.b.BOX_MANAGEMENT}));n>=0&&(i.data[n].first_setting=t,h.e.set({key:e,value:i}))}}))},onTap:function(){var t=this;return c()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.firstSetting&&P.a.$emit(P.b.TEACH_SHOW_HALF_SCREEN,{pop:Si(Si({},t.firstSetting),{},{header:{close:!0,title:t.firstSetting.title}}),extInfo:{block:t.block,typePos:t.displayPos}}),t.M_clickReportFor26897({},0,{actionId:f.g.CLICK_SHOW_DIALOG});case 2:case"end":return e.stop()}}),e)})))()}}},Ni=(i(2577),Object(w.a)(Ri,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.block.title?i("div",{staticClass:"box-management",attrs:{id:"js-box-management","data-new-teach-report-id":""+t.M_getBlockReportId(void 0,t.block.type)}},[i("div",{staticClass:"box-management-title active__link",on:{click:t.onTap}},[t._v(t._s(t.block.title))])]):t._e()}),[],!1,null,"2cfb4910",null).exports);function Di(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Mi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Di(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Di(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Hi={name:"ServiceCommentMsg",components:{goodThingCard:i(1126).a},mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0},displayPos:{type:Number,default:0}},methods:{onTap:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.M_go(Mi(Mi({},t),e.recordToRecentUsedWeApp?{}:{scene:202,startWeAppScene:1163})),this.M_clickReportFor26897(Mi(Mi({},t),{},{itemReportId:e.teachReportId}),t.itemPos,{actionId:f.g.WE_APP})}}},Ai=(i(2517),Object(w.a)(Hi,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.block.items&&t.block.items[0]?i("good-thing-card",{attrs:{type:t.type,"type-pos":t.typePos,"real-type":t.block.realType,items:t.block.items,"teach-report-func":t.M_getItemReportId},on:{tap:t.onTap}}):t._e()}),[],!1,null,"88f0a690",null).exports),Li=i(809);function $i(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Bi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$i(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$i(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Fi={filters:{formatNumUnit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t<1e4?"".concat(t):"".concat(~~(t/1e3)/10,"万")}},mixins:[h.l,h.n,j.a],props:{item:{type:Object,default:function(){return{}}},itemIndex:{type:Number,default:0}},computed:{comment:function(){var t;return null===(t=this.item.serviceComment)||void 0===t?void 0:t.comment},commentReportId:function(){var t=this.$attrs["data-new-teach-report-id"].split("$$"),e=o()(t,2),i=e[0],n=e[1].split("|").map((function(t,e){return 8===e?"commentscore":t})).join("|");return"".concat(i,"$$").concat(n)}},methods:{onTapItem:function(){this.item.jumpInfo&&this.$emit("tap-item",{item:Bi(Bi({},this.item),{},{itemReportId:this.$attrs["data-new-teach-report-id"]}),itemIndex:this.itemIndex})},onTapComment:function(){this.comment.jumpInfo&&this.$emit("tap-comment",{comment:Bi(Bi({},this.comment),{},{itemReportId:this.commentReportId})})}}},Wi=(i(3292),Object(w.a)(Fi,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"active",rawName:"v-active.stop",value:!!t.item.jumpInfo,expression:"!!item.jumpInfo",modifiers:{stop:!0}}],staticClass:"weapp active__item",attrs:{role:"option"},on:{click:function(e){return e.stopPropagation(),t.onTapItem.apply(null,arguments)}}},[t.item.iconUrl?i("div",{directives:[{name:"image",rawName:"v-image:raw",value:t.item.iconUrl,expression:"item.iconUrl",arg:"raw"}],staticClass:"weapp__icon"}):t._e(),i("div",{staticClass:"weapp__main"},[i("span",{staticClass:"weapp__title",domProps:{innerHTML:t._s(t.xss(t.item.title))}}),t.item.desc?i("div",{staticClass:"weapp__desc"},[i("ui-tags",{staticClass:"weapp__desc__tags",attrs:{tags:t.item.tags,"align-vertical":""}}),i("span",{domProps:{innerHTML:t._s(t.xss(t.item.desc))}})],1):t._e(),t.comment&&+t.comment.score?i("div",{directives:[{name:"active",rawName:"v-active.stop",value:!!t.comment.jumpInfo,expression:"!!comment.jumpInfo",modifiers:{stop:!0}}],staticClass:"weapp__comment active__mask",attrs:{role:"option","data-new-teach-report-id":t.commentReportId},on:{click:function(e){return e.stopPropagation(),t.onTapComment.apply(null,arguments)}}},[t.comment.score?i("span",{staticClass:"weapp__comment__score"},[t._v(t._s(t.comment.score)+"分")]):t._e(),+t.comment.score_times?i("span",{staticClass:"weapp__comment__times"},[t._v("("+t._s(t._f("formatNumUnit")(t.comment.score_times))+"人)")]):t._e(),t.comment.jumpInfo?i("ui-arrow",{attrs:{size:"small",align:"flex",gap:""}}):t._e()],1):t._e()])])}),[],!1,null,"0588e2ec",null).exports);function qi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Ui(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qi(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Gi=new Set([]),Vi={name:"SelectedWeapp",components:{UiScroll:Li.a,selectedItem:Wi},mixins:[h.l,h.n,j.a],props:{block:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0}},mounted:function(){this.saveExposeList(0)},methods:{getItemWidth:function(){return this.$refs.box.$el.scrollWidth+8},genBlockCtx:function(t){var e=t.box,i=t.boxIndex;return{block:this.block,displayPos:"".concat(this.typePos,"#").concat(i+1),name:e.title}},onScrollEnd:function(t){var e=t.map((function(t,e){return Ui(Ui({},t),{},{index:e})})).filter((function(t){return t.include&&t.visible})),i=(e&&e[0]||{}).index;this.saveExposeList(i),setTimeout((function(){P.a.$emit(h.k.exposeAnalysis)}),500)},saveExposeList:function(t){var e;if(void 0!==t){var i=null===(e=this.block.boxList)||void 0===e?void 0:e[t];if(!Gi.has(i.boxId)){Gi.add(i.boxId);var n={group_id:this.block.groupId,box_id:s()(Gi),time_stamp:parseInt(+new Date/1e3)};h.e.set({key:tt.a.teachPermanentKeyEnum.SELECTED_WEAPP_PERMANENT_KEY,value:n})}}},onTapItem:function(t){var e=t.item,i=t.itemIndex;this.M_clickReportFor26897(e,i+1),this.M_go(e)},onTapComment:function(t){var e=t.comment;this.M_clickReportFor26897(e),this.M_go(e)}}},Ki=(i(3291),Object(w.a)(Vi,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.block.boxList&&t.block.boxList.length?i("div",{staticClass:"selected-weapp"},[i("p",{staticClass:"teach__title"},[t._v(t._s(t.block.title))]),i("ui-scroll",{directives:[{name:"arrow-scroll",rawName:"v-arrow-scroll",value:{step:t.getItemWidth},expression:"{ step: getItemWidth }"}],staticClass:"box-list",attrs:{snap:"","use-capture":"",padding:8,items:t.block.boxList,wait:50,role:"listbox","decay-factor":1},on:{scrollEnd:t.onScrollEnd},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,o=e.index;return[i("div",{ref:"box",staticClass:"box-list__item"},[i("div",{staticClass:"box-list__item__title"},[t._v(t._s(n.title))]),t._l(n.weappList,(function(e,r){return i("selected-item",t._b({key:e.docId,attrs:{"data-new-teach-report-id":""+t.M_getItemReportId(e,r+1,{block:t.block,displayPos:t.typePos+"#"+(o+1),name:n.title}),box:n,"box-index":o,item:e,"item-index":r},on:{"tap-item":t.onTapItem,"tap-comment":t.onTapComment}},"selected-item",t.$props,!1))}))],2)]}}],null,!1,397013822)})],1):t._e()}),[],!1,null,"2230d28f",null).exports);function Yi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function zi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Yi(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Yi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Xi={name:"MusicList",components:{SectionHeader:Pt},mixins:[h.n,h.l,j.a],props:["block","typePos"],data:function(){return{}},computed:zi(zi({},Object(S.c)({requestId:function(t){return t.teach.requestId},isLoading:function(t){return t.teach.isLoading}})),{},{items:function(){return this.items||[]},isWhiteBgStyle:function(){return 1==this.block.style},refreshBtn:function(){var t=this.block.refreshBtnText||"换一批";return{hotword:t,docType:"change_button",typePos:"".concat(this.typePos),block:{title:this.block.title,type:tt.a.teachType.MUSIC_LIST},exposeInfo:{actionId:f.g.EXPOSE_ITEM}}}}),watch:{},created:function(){},methods:{buildReportItem:function(t){return zi(zi({},t),{},{docPullType:t.source||""})},onTapSearch:function(t,e){this.M_clickReportFor26897(this.buildReportItem(t),e+1,{actionId:3004});var i=[{key:"parentSearchID",textValue:this.M_composeParentSid({t:this.block.parenttype||f.p.TEACH_SUBSCRIPTIONS_RECOMMEND,s:this.$store.state.teach.recommendId,did:t.id||t.hotword,rid:this.requestId,kv:{source:t.source}})}];t.mixerCommonContext&&i.push({key:"mixerCommonContext",textValue:t.mixerCommonContext}),h.i.setInputBar({query:t.hotword,isInputChange:!1}),!1===this.block.addToHistory&&h.b.setValue({forbidHistoryUtilChangeQuery:t.hotword}),P.a.$emit(P.b.GOTO,{page:f.f.RESULT,query:t.hotword,searchId:"",isForbidHistory:h.b.scene==f.e.BIZ_UNION_TOP,extReqParams:i}),h.f.teach.reportCommonNewClick({searchId:h.b.searchId,requestId:this.requestId,itemInfo:this.block.vueBlockId.replace(/^block:/,""),docInfo:t.vueItemId.replace(/^item:/,"")})},onTapRefresh:function(){this.isLoading,this.isLoading||(this.M_clickReportFor26897(this.refreshBtn,1,{actionId:f.g.CLICK_SEARCH_REFRESH},this.refreshBtn),P.a.$emit(P.b.TEACH_DATA_REFRESH,{ctx:this.block.ctx}))}}},Zi=(i(3623),Object(w.a)(Xi,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.block&&t.block.items.length?i("div",{staticClass:"music-list-box 'white-bg",attrs:{"data-teach-report-id":"rmd-"+t.block.vueBlockId}},[t.block.title?i("section-header",{attrs:{config:{title:t.block.title}}},[i("div",{staticClass:"music-list-header"},[t.block.isShowRefreshBtn?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"music-list-header__action active__mask",attrs:{"data-new-teach-report-id":t.M_getItemReportId(t.refreshBtn,1,t.refreshBtn,t.refreshBtn.exposeInfo)},on:{click:t.onTapRefresh}},[t._v("\n        "+t._s(t.refreshBtn.hotword)+"\n        "),i("svg-icon",{staticClass:"music-list-header__action__icon refresh",attrs:{name:"refresh"}})],1):t._e()])]):t._e(),i("div",{staticClass:"music-list"},t._l(t.block.items,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:e.id,staticClass:"music-list-item active__item",attrs:{"data-new-teach-report-id":""+t.M_getItemReportId(t.buildReportItem(e),n+1)},on:{click:function(i){return i.stopPropagation(),t.onTapSearch(e,n)}}},[i("div",{staticClass:"music-list-item-text"},[t._v(t._s(e.hotword))]),e.desc?i("div",{staticClass:"music-list-item-desc"},[e.headUrl?i("span",{directives:[{name:"image",rawName:"v-image:avatar",value:e.headUrl||"",expression:"item.headUrl || ''",arg:"avatar"}],staticClass:"music-list-item-head-icon"}):t._e(),t._v("\n        "+t._s(e.desc)+"\n      ")]):t._e()])})),0)],1):t._e()}),[],!1,null,"057eb4fa",null).exports),Qi={name:"DropShowLogo"},Ji=(i(1538),Object(w.a)(Qi,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"drop-show-logo"},[e("ui-image",{attrs:{url:"https://res.wx.qq.com/t/fed_upload/0f3c9bc4-ea5d-47a7-8879-5d958f1cbd65/search.svg",type:"svg",color:"var(--ALPHA-10)",size:40}})],1)}),[],!1,null,"4fd37ad0",null).exports),tn=i(54),en=(i(15),i(3033));function nn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function on(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(i),!0).forEach((function(e){u()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):nn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var rn=i(50),sn={data:function(){var t,e=tt.a.teachType;return{ComponentMap:(t={},u()(t,e.HOTWORD,"rows"),u()(t,e.GUIDEWORD,"history"),u()(t,e.HISTORY,"history"),u()(t,e.FAVORITE_BIZ,"official"),u()(t,e.CHANNEL,"recommend-channel"),u()(t,e.WORLD_CUP,"recommend-channel"),u()(t,e.NAVIGATION,"recommend-category"),u()(t,e.BIZ,"big-avatar-biz"),u()(t,e.SIMILAR_EMOTICON,"similar-button"),u()(t,e.WX_INDEX,"wx-index"),u()(t,e.STRONG_SHOW_GRID,"strong-show-grid"),u()(t,e.WRAP_BOX_GRID,"wrap-box-grid"),u()(t,e.OPTION_LIST,"option-list"),u()(t,e.EMOTICON_GRID,"emoticon-grid"),u()(t,e.HOTWORD_CROSS_LINE,"hotwordCrossLine"),u()(t,e.HISTORY_SUBSCRIPTIONS,"history-subscriptions"),u()(t,e.RECOMMEND_BOX,"recommend-box"),u()(t,e.BIZ_FILTERS,"biz-filters"),u()(t,e.POPULAR_GAME,"popular-game"),u()(t,e.FINDER_HOT_LIST,"finder-hot-list"),u()(t,e.PAGE_SETTING,"page-setting"),u()(t,e.MINI_HISTORY,"mini-history"),u()(t,e.BOX_MANAGEMENT,"box-management"),u()(t,e.SERVICE_COMMENT_ENTRY,"service-comment-entry"),u()(t,e.SELECTED_WEAPP,"selected-weapp"),u()(t,e.MUSIC_LIST,"music-list"),t),teachType:e,isGlobalTabBizScene:h.b.isGlobalTabBizScene,bottomStyle:{},isSceneRecommend:h.b.scene===f.e.RECOMMEND,teachPart3data:null,BIZ_UNION_TOP_PERMANENT_KEY:"BIZ_UNION_TOP_PERMANENT_KEY",FINDER_INNER_SEARCH_PERMANENT_KEY:"FINDER_INNER_SEARCH_PERMANENT_KEY",FINDER_REC_QUERY_PERMANENT_KEY:"FINDER_REC_QUERY_PERMANENT_KEY",HOME_TOP_ENTRY_PERMANENT_KEY_PREFIX:"HOME_TOP_ENTRY_PERMANENT_KEY_V3",GRID_VERTIAL_SEARCH_PERMANENT_KEY_PREFIX:"GRID_VERTIAL_SEARCH_PERMANENT_KEY",homeTopEntryCacheData:null,canTeachReport:!1,isHideKeyboard:!1,forbidBlockCache:[],halfScreenTips:"请输入搜索词"}},mixins:[h.n,j.a,en.a],components:{bigAvatarBiz:k,official:ut,rows:ot,history:M,recommendChannel:I,recommendCategory:C,similarButton:W,similarList:J,wxIndex:ht,strongShowGrid:mt,wrapBoxGrid:gt,optionList:Ot,emoticonGrid:xt,hotwordCrossLine:Et,dropShowLogo:Ji,historySubscriptions:Ht,recommendBox:Ft,finderHotList:Vt,exposureBlock:tn.a,BizFilters:Qt,popularGame:ae,pageSetting:de,teachHalfScreen:Ti,miniHistory:ie,boxManagement:Ni,serviceCommentEntry:Ai,selectedWeapp:Ki,musicList:Zi},computed:Object(S.c)({teachObjList:function(t){if(t.teach.teachData)return this.commonExpose(),t.teach.teachData.data},isServiceSearch:function(t){return t.teach.teachData&&t.teach.teachData.businessType===at.b.YIQING_SERVICE},requestId:function(t){return t.teach.requestId},hasPageSetting:function(t){var e,i,n,o,r=null===(e=t.teach.teachData)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.find((function(t){return t.type==tt.a.teachType.PAGE_SETTING}));return r&&(null==r?void 0:r.title)&&(null==r||null===(n=r.pop)||void 0===n||null===(o=n.items)||void 0===o?void 0:o.length)},hasBoxManagement:function(t){var e,i,n,o,r=null===(e=t.teach.teachData)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.find((function(t){return t.type==tt.a.teachType.BOX_MANAGEMENT}));return r&&(null==r?void 0:r.title)&&(null==r||null===(n=r.first_setting)||void 0===n||null===(o=n.second_setting_list)||void 0===o?void 0:o.length)}}),watch:{teachObjList:function(t){h.b.isFinderSearch&&h.e.set({key:this.FINDER_INNER_SEARCH_PERMANENT_KEY,value:t.map((function(t){return t.type==tt.a.teachType.HISTORY_SUBSCRIPTIONS?on(on({},t),{},{items:[]}):t}))})},$route:function(t,e){t.name===f.f.TEACH?(this.reset(),this.tryGetData()):t.name===f.f.INDEX&&this.reset(),h.b.isFinderSearch&&t.name!=f.f.TEACH&&window.didSetRecommendSearchQuery&&ne.a.configNavBar({recommendSearchQuery:""})}},methods:{getHomeTopEntryCacheKey:function(){return"".concat(this.HOME_TOP_ENTRY_PERMANENT_KEY_PREFIX,"_").concat(h.b.type,"_").concat(h.b.scene)},componentScroll:h.g.throttle((function(){this.expose.analysis()}),100),reset:function(){this.$store.dispatch("teach/updateData",{data:{data:[]}})},handleFromUrlData:function(){var t=this.$router.currentRoute.params.option||{};t.mpData&&(this.teachPart3data=t.mpData)},isFromHalfScreen:function(){return h.b.scene===f.e.SCENE_FINDERLIVE_HALF_SCREEN},tryGetData:function(){var t=this;return c()(p.a.mark((function e(){var i,n,o,r,s,a,c,l,u,d,m,_,b,y,v,g,w,I,O,C,x,k,E,T,P,S,j,R,N;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t,!t.isFromHalfScreen()){e.next=3;break}return e.abrupt("return");case 3:if(!(n=i.teachPart3data)){e.next=24;break}if(t.M_pullReportFor26897(),!n.data||!n.data.length){e.next=21;break}if((o=n.data.find((function(t){return t.type==tt.a.teachType.HOTWORD})))&&(h.b.thirdExtParam&&h.b.thirdExtParam.bizNickName&&(o.title="「".concat(h.b.thirdExtParam.bizNickName,"」推荐搜索")),o.showType=2,o.items=(o.items||[]).map((function(t){return on(on({},t),{},{hotword:t.hotword.replace(/&nbsp;/g," ")})}))),-1===n.data.findIndex((function(t){return t.type==tt.a.teachType.HISTORY_SUBSCRIPTIONS}))&&n.data.push({title:"最近在搜",type:tt.a.teachType.HISTORY_SUBSCRIPTIONS,style:1,items:[]}),r=n.data.findIndex((function(t){return t.type==tt.a.teachType.BIZ_FILTERS})),![f.e.BIZ_SPECIFIC,f.e.MP_INNER_TOP_RIGHT_SEARCH].includes(h.b.scene)||-1!==r){e.next=21;break}return e.next=15,h.i.getCommonCgiData({cgiName:H.a.getUserSwitch,data:{switch_type:1}});case 15:s=e.sent,a=s.ret,void 0===a?-1:a,c=s.switch_status,l=void 0===c?0:c,n.data.unshift({title:"搜索文章",type:tt.a.teachType.BIZ_FILTERS,switchStatus:l,items:[]});case 21:i.$store.dispatch("teach/updateData",{data:{data:n.data,searchID:n.id}}),e.next=112;break;case 24:if(h.b.scene!=f.e.BIZ_SPECIFIC&&h.b.scene!=f.e.MP_INNER_TOP_RIGHT_SEARCH&&(h.b.scene!=f.e.VERTICAL||"7"!=h.b.queryString.type)){e.next=40;break}if(t.M_pullReportFor26897(),u=[{title:"最近在搜",type:tt.a.teachType.HISTORY_SUBSCRIPTIONS,style:1,items:[]}],h.b.scene!=f.e.BIZ_SPECIFIC&&h.b.scene!=f.e.MP_INNER_TOP_RIGHT_SEARCH){e.next=36;break}return e.next=30,h.i.getCommonCgiData({cgiName:H.a.getUserSwitch,data:{switch_type:1}});case 30:d=e.sent,m=d.ret,void 0===m?-1:m,_=d.switch_status,b=void 0===_?0:_,u.unshift({title:"搜索文章",type:tt.a.teachType.BIZ_FILTERS,switchStatus:b,items:[]});case 36:i.$store.dispatch("teach/updateData",{data:{data:u,searchID:"bizProfile"}}),t.canTeachReport=!0,e.next=112;break;case 40:if(![f.e.EXTLINK_TOP_RIGHT_SEARCH_ENTER].includes(h.b.scene)){e.next=44;break}i.$store.dispatch("teach/updateData",{data:{data:[{deleteWord:"清除历史",title:"搜索历史",type:tt.a.teachType.HISTORY_SUBSCRIPTIONS,style:1,items:[]}],searchID:"bizProfile"}}),e.next=112;break;case 44:if(h.b.scene!=f.e.BIZ_UNION_TOP){e.next=64;break}return e.next=47,h.e.get({key:t.BIZ_UNION_TOP_PERMANENT_KEY});case 47:if(e.t0=e.sent,e.t0){e.next=50;break}e.t0={};case 50:y=e.t0,v=y.data,g=void 0===v?[]:v,w=y.searchID,I=void 0===w?"bizSearch":w,O=[tt.a.teachType.MINI_HISTORY,tt.a.teachType.HISTORY_SUBSCRIPTIONS],C=g.filter((function(t){return O.includes(t.type)})),(x=C.find((function(t){return t.type===tt.a.teachType.RECOMMEND_BOX})))&&(x.items=x.items.filter((function(t){return 1!=t.source||Date.now()<t.expiredTimestamp}))),t.canTeachReport=!1,i.$store.dispatch("teach/updateData",{data:{data:C,searchID:I,isCache:!0}}),i.getTeachSearchData(),e.next=112;break;case 64:if(![f.e.HOME_TOP_ENTRY,f.e.VERTICAL,f.e.S1S_VERTICAL].includes(h.b.scene)||h.b.type!=at.b.MINI_PRGM){e.next=85;break}return e.next=67,h.e.get({key:t.getHomeTopEntryCacheKey()});case 67:if(e.t1=e.sent,e.t1){e.next=70;break}e.t1=null;case 70:if(P=e.t1,t.homeTopEntryCacheData=P,null==P||null===(k=P.data)||void 0===k||!k.length||h.b.queryString.forbidTeachData||null!==(E=h.b.extParams)&&void 0!==E&&E.forbidTeachData||h.b.type==at.b.MINI_PRGM&&3==h.b.subType){e.next=82;break}return P.data=P.data.filter((function(t){var e;return(null==t||null===(e=t.box_handler)||void 0===e?void 0:e.cache_time)&&(null==t?void 0:t.data_time)&&Date.now()/1e3<t.data_time+t.box_handler.cache_time})),e.next=76,t.forbidBlock(P.data);case 76:return P.data=e.sent,e.next=79,t.newForbidBlock(P.data);case 79:P.data=e.sent,P.data.length&&i.$store.dispatch("teach/updateData",{data:on(on({},P),{},{searchID:"homeEntryCacheSearchID",isCache:!0})}),h.b.setValue({goHistoryInTeach:P.isShowHistory||!1});case 82:h.b.type==at.b.MINI_PRGM&&3==h.b.subType||h.b.queryString.forbidTeachData||null!==(T=h.b.extParams)&&void 0!==T&&T.forbidTeachData||i.getTeachSearchData(),e.next=112;break;case 85:if(![f.e.VERTICAL,f.e.S1S_VERTICAL,f.e.FINDER_MUSIC_LIVE].includes(h.b.scene)||[at.b.MINI_PRGM,at.b.STICKERS_ALL].includes(h.b.type)){e.next=96;break}return e.next=88,h.e.get({key:"".concat(t.GRID_VERTIAL_SEARCH_PERMANENT_KEY_PREFIX,"_").concat(h.b.type,"_").concat(h.b.scene)});case 88:if(e.t2=e.sent,e.t2){e.next=91;break}e.t2=null;case 91:(S=e.t2)&&Date.now()<S.expiredTimestamp&&(t.canTeachReport=!1,i.$store.dispatch("teach/updateData",{data:on(on({},S),{},{isCache:!0})})),i.getTeachSearchData(),e.next=112;break;case 96:if(!h.b.isFinderSearch){e.next=111;break}return e.next=99,h.e.get({key:t.FINDER_INNER_SEARCH_PERMANENT_KEY});case 99:if(e.t3=e.sent,e.t3){e.next=102;break}e.t3=[];case 102:j=e.t3,R=[tt.a.teachType.HISTORY_SUBSCRIPTIONS,tt.a.teachType.MINI_HISTORY],h.b.scene==f.e.FINDER_INNER_SEARCH&&14==h.b.type?(R.push(tt.a.teachType.FINDER_HOT_LIST),t.didGetTeachData&&R.push(tt.a.teachType.RECOMMEND_BOX)):h.b.scene!=f.e.FINDER_INNER_SEARCH&&R.push(tt.a.teachType.FINDER_HOT_LIST),N=j.filter((function(t){return R.includes(t.type)})),t.canTeachReport=!1,i.$store.dispatch("teach/updateData",{data:{data:N.map((function(t){return t.type==tt.a.teachType.FINDER_HOT_LIST&&t.items.find((function(t){return t.session_buffer}))?{type:t.type,title:t.title,itemtype:t.itemtype,items:t.items.map((function(t){return{id:t.id,hotword:t.hotword,tags:t.tags,finderSessionBuffer:t.session_buffer}}))}:t})),searchID:"finderInnerSearch",isCache:!0}}),i.getTeachSearchData(),e.next=112;break;case 111:i.getTeachSearchData();case 112:setTimeout((function(){window.scrollTo(0,0)}),50);case 113:case"end":return e.stop()}}),e)})))()},_getBizService:function(t){var e=this;if(t){var i={deleteWord:"清除历史",title:"搜索历史",type:tt.a.teachType.HISTORY,items:[]},n=t.data;if("blocks:".concat(n.length),n&&n.length){var o=(n.find((function(t){return t.type==tt.a.teachType.FAVORITE_BIZ})).items||[]).map((function(t){return t.userName}));h.f.reportEventTrack({requestId:e.requestId,actionType:203}),h.i.getTeach(on(on({},h.b.getBase()),{},{requestId:e.requestId,ignoreCache:!0,type:h.b.guideType||h.b.type||h.b.getBase().type,guideInfo:JSON.stringify(o)}),{requestId:e.requestId}).then((function(n){if(h.f.reportEventTrack({requestId:e.requestId,actionType:208}),null!=n&&n.privacySwitch)return h.i.log({key:"[获取公众号服务数据]",msg:"关闭了个性化推荐"}),t.data=[],i.title="",t.data.push(i),void e.teachSearchDataReadyCallback(t);n&&n.data&&n.data.length?(n.data.some((function(t){return t.type===tt.a.teachType.HISTORY}))||n.data.push(i),e.teachSearchDataReadyCallback(n)):(h.i.log({key:"[获取公众号服务数据]",msg:"没有本地数据"}),console.warn("[获取公众号服务数据] 没有本地数据"),t.data.push(i),e.teachSearchDataReadyCallback(t))}))}}else setTimeout((function(){h.f.reportEventTrack({requestId:e.requestId,actionType:209,query:"local"})}),0)},getTeachSearchData:function(t){var e=this;return c()(p.a.mark((function i(){var n,o,r,s,a,c,l,u,d,m,_;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((n=e).$store.commit({type:"teach/updateState",isLoading:!0}),o=h.b.scene==f.e.VERTICAL||h.b.scene==f.e.S1S_VERTICAL,r=o&&1==h.b.type,e.$store.commit("teach/getSearchRid"),s=Object.assign(on(on({},h.b.getBase()),{},{type:h.b.guideType||h.b.type||h.b.getBase().type,ignoreCache:!0,guideInfo:""}),t),!h.b.isFinderSearch){i.next=30;break}if(a={dark_mode:h.g.isDarkMode()?1:0,need_placeholder:!window.didSetRecommendSearchQuery},h.b.scene==f.e.FINDER_INNER_SEARCH&&Object.assign(a,{video_play_history:h.b.thirdExtParamFinderInfo,referrer_feed_id:h.b.thirdExtParamReferrerFeedId}),h.b.referer&&Object.assign(a,{comment_referrer:h.b.referer}),!h.b.isInsideFinder){i.next=28;break}return i.prev=11,i.next=14,h.e.get({key:"history14"});case 14:return(c=i.sent)&&c.length&&Object.assign(a,{search_history:c.map((function(t){return{query:t.hotword,req_business_type:t.businesstype,timestamp:t.timestamp}}))}),i.next=18,h.e.get({key:e.FINDER_REC_QUERY_PERMANENT_KEY});case 18:if(i.t0=i.sent,i.t0){i.next=21;break}i.t0=[];case 21:l=i.t0,Object.assign(a,{last_exposure_history:l.map((function(t){return{query:t.query,timestamp:t.timestamp}}))}),i.next=28;break;case 25:i.prev=25,i.t1=i.catch(11),i.t1;case 28:s.ctx&&Object.assign(a,{ctx:t.ctx}),s.guideInfo=JSON.stringify(a);case 30:if([f.e.MP_INNER_TOP_RIGHT_SEARCH].includes(h.b.scene)?s.guideInfo=JSON.stringify({doc_list:[{username:h.b.userName||""}]}):[f.e.MP_TOP_RIGHT_SEARCH_ENTER,f.e.EXTLINK_TOP_RIGHT_SEARCH_ENTER].includes(h.b.scene)&&(s.guideInfo=JSON.stringify({doc_list:[{url:(null===(u=h.b.thirdExtParam)||void 0===u?void 0:u.pageUrl)||h.b.fromUrl||""}]})),h.b.scene==f.e.BIZ_UNION_TOP&&(d=e.$store.state.teach.hotwordActionsMap,(m=Object.values(d)).length&&(s.guideInfo=JSON.stringify({hotwordActions:m}))),![f.e.HOME_TOP_ENTRY].includes(h.b.scene)||h.b.type!=at.b.MINI_PRGM){i.next=40;break}return i.next=35,h.e.get({key:tt.a.teachPermanentKeyEnum.SELECTED_WEAPP_PERMANENT_KEY});case 35:if(i.t2=i.sent,i.t2){i.next=38;break}i.t2={};case 38:_=i.t2,s.guideInfo=JSON.stringify({featured_weapp_his:_});case 40:r?(h.f.reportEventTrack({requestId:n.requestId,actionType:203,query:"local"}),h.i.getTeach(Object.assign(s,{requestType:tt.a.requestType.local})).then((function(t){h.f.reportEventTrack({requestId:n.requestId,actionType:208,query:"local"}),n._getBizService(t)}))):(h.f.reportEventTrack({requestId:n.requestId,actionType:203}),h.i.getTeach(Object.assign(s,{requestType:tt.a.requestType.net,requestId:n.requestId}),{requestId:n.requestId}).then((function(t){h.f.reportEventTrack({requestId:n.requestId,searchId:t&&t.searchID,actionType:208}),n.teachSearchDataReadyCallback(t)}))),Object(T.i)(h.m.overview.general.getData,{rate:.01}),Object(T.i)(h.m.overview.teach.getData,{rate:.01});case 43:case"end":return i.stop()}}),i,null,[[11,25]])})))()},hideKeyBoard:function(t){Global.os.ios&&h.b.clientVersion<806e4||!t&&Global.os.android?h.i.openView({actionType:1,opType:2,userName:"",nickName:""}):Global.os.ios&&ne.a.configNavBar({ftsNeedHideKeyBoard:2})},teachSearchDataReadyCallback:spy(function(){var t=c()(p.a.mark((function t(e){var i,n,o,r,a,c,l,u,d,m,_,b,y,v,g,w,I,O,C,x=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=this).$store.commit({type:"teach/updateState",isLoading:!1}),setTimeout((function(){h.f.reportEventTrack({requestId:i.requestId,actionType:209})}),0),h.i.log({msg:"".concat(n),level:"info",key:"teachCallback"}),n=e||{},this.isHideKeyboard||(this.isHideKeyboard=n.isHideKeyboard,n.isHideKeyboard&&this.hideKeyBoard()),h.b.setValue({goHistoryInTeach:n.isShowHistory||!1}),void 0!==n.preSearchSwitch&&h.b.setValue({preSearchSwitch:n.preSearchSwitch}),void 0!==n.searchID&&h.b.setValue({searchId:n.searchID}),n.placeholder&&n.placeholder!=window.didSetRecommendSearchQuery&&(ne.a.configNavBar({recommendSearchQuery:n.placeholder}),h.b.setValue({forbidPlaceholderSearch:!1===n.placeholderCanSearch}),n.placeholderMixerCommonContext&&(this.$store.state.teach.placeholderMixerCommonContext[n.placeholder]=n.placeholderMixerCommonContext),this.$nextTick((function(){window.didSetRecommendSearchQuery=n.placeholder,h.f.teach.reportCommonNewExpose({searchId:h.b.searchId,requestId:x.requestId,itemInfo:"0|11|".concat(encodeURIComponent("底纹词")),docInfo:"0|0|".concat(encodeURIComponent(n.placeholder),"|").concat(encodeURIComponent(n.placeholder),"|1|")}),h.f.teach.commonTeachReport({searchId:h.b.searchId,itemInfo:"0|".concat(tt.a.teachType.FINDER_PLACEHOLDER,"|").concat(encodeURIComponent("底纹词")),docInfo:"1|1|".concat(encodeURIComponent(n.placeholder),"||1||||placeholder|"),pageType:tt.a.pageType.TEACH,actionId:f.g.EXPOSE_DOC,isCache:!1}),Object(T.b)(h.m.subscriptions.placeholderExpose,{rate:1})}))),0!=n.businessType||[f.e.MP_TOP_RIGHT_SEARCH_ENTER,f.e.EXTLINK_TOP_RIGHT_SEARCH_ENTER].includes(h.b.scene)){t.next=13;break}return t.abrupt("return");case 13:if(o=[],r="",this.canTeachReport=!0,this.didGetTeachData=!0,n.data&&n.data.length){t.next=19;break}return t.abrupt("return");case 19:if(JSON.stringify(n),h.b.scene!=f.e.BIZ_UNION_TOP){t.next=28;break}return t.next=23,h.e.get({key:tt.a.teachPermanentKeyEnum.histroySubscripttionsIsHideKey});case 23:a=t.sent,c=[tt.a.teachType.RECOMMEND_BOX,tt.a.teachType.HISTORY_SUBSCRIPTIONS,tt.a.teachType.MINI_HISTORY],l=s()(n.data).filter((function(t){return c.includes(t.type)})).map((function(t){var e=Object.assign({},t);return t.type===tt.a.teachType.RECOMMEND_BOX&&e.items.forEach((function(t){1==t.source&&(t.expiredTimestamp=Date.now()+6e5)})),e})),h.e.set({key:this.BIZ_UNION_TOP_PERMANENT_KEY,value:{data:l,searchID:n.searchID}}),a&&(n.data=n.data.filter((function(t){return t.type!==tt.a.teachType.HISTORY_SUBSCRIPTIONS})));case 28:if(![f.e.HOME_TOP_ENTRY,f.e.VERTICAL,f.e.S1S_VERTICAL].includes(h.b.scene)||h.b.type!=at.b.MINI_PRGM){t.next=39;break}if((null==n||null===(u=n.data)||void 0===u?void 0:u.length)&&n.data.forEach((function(t){return t.data_time=n.timestamp})),null!=n&&null!==(d=n.data)&&void 0!==d&&d.length&&null!==(m=this.homeTopEntryCacheData)&&void 0!==m&&null!==(_=m.data)&&void 0!==_&&_.length&&n.data.forEach((function(t,e){var i;if((null==t||null===(i=t.box_handler)||void 0===i?void 0:i.type)==tt.a.boxHandlerType.BOX_HANDLER_TYPE_ERROR){var o,r=x.homeTopEntryCacheData.data.find((function(e){return e.type==t.type&&e.title==t.title}));r&&r.data_time&&null!==(o=r.box_handler)&&void 0!==o&&o.cache_time&&Date.now()/1e3<r.data_time+r.box_handler.cache_time&&(n.data[e]=r)}})),![f.e.HOME_TOP_ENTRY,f.e.VERTICAL,f.e.S1S_VERTICAL].includes(h.b.scene)){t.next=38;break}return t.next=34,this.forbidBlock(n.data);case 34:return n.data=t.sent,t.next=37,this.newForbidBlock(n.data);case 37:n.data=t.sent;case 38:h.e.set({key:this.getHomeTopEntryCacheKey(),value:on({},n)});case 39:[f.e.HOME_TOP_ENTRY,f.e.VERTICAL,f.e.S1S_VERTICAL,f.e.FINDER_MUSIC_LIVE].includes(h.b.scene)&&h.b.type!=at.b.MINI_PRGM&&h.e.set({key:"".concat(this.GRID_VERTIAL_SEARCH_PERMANENT_KEY_PREFIX,"_").concat(h.b.type,"_").concat(h.b.scene),value:on(on({},n),{},{expiredTimestamp:Date.now()+1296e6})}),h.b.scene==f.e.FINDER_INNER_SEARCH&&(b=n.data.find((function(t){return t.type==tt.a.teachType.RECOMMEND_BOX})),h.e.set({key:this.FINDER_REC_QUERY_PERMANENT_KEY,value:b&&b.items.map((function(t){return{query:t.hotword,timestamp:Math.floor(Date.now()/1e3)}}))||[]})),i.$store.dispatch("teach/updateData",{data:n}),y=0,v=n.data.length;case 43:if(!(y<v)){t.next=53;break}if(g=n.data[y].type||0,o.push(g),r+=y>0?";":"",n.data[y].items){t.next=49;break}return t.abrupt("continue",50);case 49:for(w=0,I=n.data[y].items.length;w<I;w++)O=n.data[y].items[w],C="".concat(O.userName||O.id||O.hotword||""),r+=(w>0?"|":"")+C.replace(/,/g,"_").replace(/\|/g,"#");case 50:y++,t.next=43;break;case 53:setTimeout((function(){i.$refs.exposureBlock&&i.$refs.exposureBlock.length&&i.$refs.exposureBlock.forEach((function(t){t&&t.analysisExpose()}))}),10),setTimeout((function(){i.$refs.newExposureBlock&&i.$refs.newExposureBlock.length&&i.$refs.newExposureBlock.forEach((function(t){t&&([f.e.MP_TOP_RIGHT_SEARCH_ENTER].includes(h.b.scene)||t.resetExposeId(),t.analysisExpose())}))}),10),h.g.reportShowTeachKV({logId:12098,scene:h.b.scene,version:h.b.version,isCacheData:e.isCacheData,searchId:n.searchID,businessType:h.b.type,guideType:o.join(";"),result:r});case 56:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()),tapFeedback:function(){var t="https://support.weixin.qq.com/cgi-bin/mmsupport-bin/readtemplate?t=feedback/index&",e=h.b.queryString,i={deviceName:e.deviceName||"",imei:e.imei||"",deviceBrand:e.deviceBrand||"",deviceModel:e.deviceModel||"",from:"看一看小助手",uin:h.b.sessionId&&h.b.sessionId.split("_")[1],version:e.wechatVersion||"",lang:e.lang||"zh_CN",ostype:e.ostype||"",scene:h.b.scene,timeZone:-(new Date).getTimezoneOffset()/60};t+="".concat(h.g.object2params(i),"#/list/4155"),this.M_startDetail({type:2,jumpUrl:t})},addFormatDataToReportObj:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t["".concat(e,"Ids")]&&t["".concat(e,"Ids")].push(i.id||""),t["".concat(e,"Words")]&&t["".concat(e,"Words")].push(i.word||""),t["".concat(e,"Indexs")]&&t["".concat(e,"Indexs")].push(i.index||""),t["".concat(e,"Expands")]&&t["".concat(e,"Expands")].push(i.expand||"")},commonExpose:function(){var t=this;this.expose||(this.expose=new rn.Expose((function(e){if(e.length){var i={};t.teachObjList.forEach((function(t,n){t.items&&t.items.length&&t.items.forEach((function(o,r){if(e.indexOf(o.id)>-1){var s=t.id?"id":"type";i[t[s]]||(i[t[s]]={id:t[s],type:t.type,word:t.title||t.header&&t.header.title||"",index:n+1,expand:t.expand||"",items:{}});var a=i[t[s]].items;a[o.id]||(a[o.id]={id:o.id,word:o.title||o.hotword||o.nickName||"",index:r+1,expand:o.expand||"",listItems:{}});var c=a[o.id].listItems,l=o.list||o.listItems||o.service;l&&l.length&&l.forEach((function(t,e){c[t.id]={id:t.id,word:t.title||t.name||"",index:e+1,expand:t.expand||""}}))}}))})),Object.keys(i).forEach((function(e){var n={oldBlockTypes:[],oldBlockIndexs:[],oldItemIds:[],oldItemWords:[],oldItemIndexs:[],newBlockIds:[],newBlockWords:[],newBlockIndexs:[],newBlockExpands:[],newItemIds:[],newItemWords:[],newItemIndexs:[],newItemExpands:[],newListItemIds:[],newListItemWords:[],newListItemIndexs:[],newListItemExpands:[]},o=i[e],r=[],s=[],a=[];Object.keys(o.items).forEach((function(e){var i=o.items[e];r.push(i.id),s.push(i.word),a.push(i.index),Object.keys(i.listItems).length?Object.keys(i.listItems).forEach((function(e){t.addFormatDataToReportObj(n,"newBlock",o),t.addFormatDataToReportObj(n,"newItem",i),t.addFormatDataToReportObj(n,"newListItem",i.listItems[e])})):(t.addFormatDataToReportObj(n,"newBlock",o),t.addFormatDataToReportObj(n,"newItem",i),t.addFormatDataToReportObj(n,"newListItem",{}))})),n.oldBlockTypes.push(o.type),n.oldBlockIndexs.push(o.index),n.oldItemIds.push(r.join("_")),n.oldItemWords.push(s.join("_")),n.oldItemIndexs.push(a.join("_")),h.f.teach.reportCommonExpose(n)}))}}),{container:document.querySelector(".teach__box")})),t.$nextTick((function(){this.expose.analysis()}))},onNewTeachExpose:function(t){this.M_exposeReportFor26897(t)},onTeachExpose:function(t){var e=this;try{var i=t.filter((function(t){return t.includes("26897_report_")}));if(i.length&&this.M_exposeReportFor26897(i),t=t.filter((function(t){return!t.includes("26897_report_")})),!this.canTeachReport)return void(this.$refs.exposureBlock&&this.$refs.exposureBlock.length&&this.$refs.exposureBlock.forEach((function(t){t&&t.resetExposeId()})));var n={},r={requestId:"",itemInfo:"",featureInfos:[]},s=function(t,e){n[t]||(n[t]={itemInfo:t,docInfos:[]}),e&&n[t].docInfos.push(e)},a=function(t,e){t.forEach((function(t){try{if(/^block:/.test(t)){var e=t.split("@"),i=o()(e,1)[0];s(i.match(/^block:(.*)/)[1])}else if(/^item:/.test(t)){var n=t.split("@"),a=o()(n,2),c=a[0],l=a[1];s(l.match(/^block:(.*)/)[1],c.match(/^item:(.*)/)[1])}else if(/^feature:/.test(t)){var u=t.split("@"),d=o()(u,2),p=d[0],h=d[1];r.itemInfo=h.match(/^block:(.*)/)[1],r.featureInfos.push(p.match(/^feature:(.*)/)[1])}}catch(f){}}))},c=t.filter((function(t){return/^his-/.test(t)})).map((function(t){return t.replace(/^his-/,"")})),l=t.filter((function(t){return/^rmd-/.test(t)})).map((function(t){return t.replace(/^rmd-/,"")})),u=t.filter((function(t){return/^finder-/.test(t)})).map((function(t){return t.replace(/^finder-/,"")}));c.length&&(a(c),Object(T.b)(h.m.subscriptions.historyExpose,{rate:1,isSessionOnly:!0})),l.length&&(a(l),Object(T.b)(h.m.subscriptions.recommendExpose,{rate:1,isSessionOnly:!0})),u.length&&a(u),r.itemInfo&&h.f.teach.reportFeatureBtnClick({actionId:1,searchId:h.b.searchId,requestId:this.requestId,itemInfo:r.itemInfo,featureInfo:r.featureInfos.join("#"),businessType:h.b.type}),Object.keys(n).forEach((function(t){var i=n[t];h.f.teach.reportCommonNewExpose({searchId:h.b.searchId,requestId:e.requestId,itemInfo:i.itemInfo,docInfo:i.docInfos.join("#")})})),n={}}catch(d){}},onInputChange:function(t){if(h.b.scene==f.e.HOME_TOP_ENTRY&&h.b.goHistoryInTeach&&!this.__goOtherPage&&!t.query){if(!t.isCancelButtonClick&&!this.__cancelButtonClick){if(h.o.isSupportCtrlKeyboardWhenOpenView){if(Global.os.android)h.i.isSupportFeature({feature:"clearSearchBarFocus",version:0,scene:h.b.scene})&&h.i.clearSearchBarFocus();this.M_openSearchWebView(on(on({},h.b.getBase()),{},{actionType:f.j.OpenSearchFromSearch,extParams:encodeURIComponent(JSON.stringify({toViewType:f.f.HISTORY,goHistoryInTeach:!0})),businessType:h.b.type,ftsNeedHideKeyBoard:1}))}else this.data=on(on({},this.data||{}),{},{type:h.b.type}),P.a.$emit(P.b.GOTO,{page:f.f.HISTORY});this.__goOtherPage=!0}this.__cancelButtonClick=t.isCancelButtonClick}},getForbidBlockCacheKey:function(){return"".concat(tt.a.teachPermanentKeyEnum.TEACH_BLOCK_SWITCH_PERMANENT_KEY,"_").concat(h.b.scene,"_").concat(h.b.type)},forbidBlock:function(){var t=arguments,e=this;return c()(p.a.mark((function i(){var n,o,r,s,a,c;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:[],!((s=r.findIndex((function(t){return t.type==tt.a.teachType.PAGE_SETTING})))<0)&&r.length){i.next=4;break}return i.abrupt("return",r);case 4:if(e.forbidBlockCache.length){i.next=11;break}return i.next=7,h.e.get({key:e.getForbidBlockCacheKey()});case 7:if(i.t0=i.sent,i.t0){i.next=10;break}i.t0=[];case 10:e.forbidBlockCache=i.t0;case 11:return e.forbidBlockCache.length&&e.forbidBlockCache.forEach((function(t){var e=r.findIndex((function(e){return e.type==t.type}));t&&!1===t.checked&&e>=0&&(r[e].forbid=!0)})),a=function(t){var i;null!=t&&null!==(i=t.pop)&&void 0!==i&&i.items&&(e.forbidBlockCache=t.pop.items,h.e.set({key:e.getForbidBlockCacheKey(),value:e.forbidBlockCache}))},(c=Object.assign(r[s],{})).pop=on(on({},c.pop||{}),{},{items:null!==(n=c.pop)&&void 0!==n&&null!==(o=n.items)&&void 0!==o&&o.length?c.pop.items:e.forbidBlockCache}),c.pop.items.forEach((function(t){var i=e.forbidBlockCache.find((function(e){return e.type==t.type}));t.checked=!i||i.checked,t.onChecked=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.$store.state.teach.teachData.data,n=i.findIndex((function(e){return e.type==t.type}));i[n]=on(on({},i[n]),{},{forbid:!t.checked}),c.pop.items.forEach((function(e){e.type==t.type&&(e.checked=t.checked)})),i[s]=c,a(c),e.$store.dispatch("teach/updateData",{data:{data:i}}),h.e.set({key:e.getHomeTopEntryCacheKey(),value:e.$store.state.teach.teachData})}})),r[s]=c,a(c),i.abrupt("return",r);case 19:case"end":return i.stop()}}),i)})))()},newForbidBlock:function(){var t=arguments,e=this;return c()(p.a.mark((function i(){var n,o,r,s,a,c,l;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:[],r=o.findIndex((function(t){return t.type==tt.a.teachType.BOX_MANAGEMENT})),s=Object.assign((null==o?void 0:o[r])||{},{}),a=(null==s||null===(n=s.first_setting)||void 0===n?void 0:n.second_setting_list)||[],c=a.filter((function(t){return 11==t.type&&t.show_box})),!(r<0)&&o.length&&a.length&&c.length){i.next=7;break}return i.abrupt("return",o);case 7:if(e.forbidBlockCache.length){i.next=14;break}return i.next=10,h.e.get({key:e.getForbidBlockCacheKey()});case 10:if(i.t0=i.sent,i.t0){i.next=13;break}i.t0=[];case 13:e.forbidBlockCache=i.t0;case 14:return e.forbidBlockCache.length&&e.forbidBlockCache.forEach((function(t){if(t){var e=o.findIndex((function(e){return e.type==t.type}));t&&!1===t.checked&&e>=0&&(o[e].forbid=!0)}})),l=function(t){t&&t.length&&(e.forbidBlockCache=t.filter((function(t){return 11==t.type&&t.show_box})).map((function(t){return{type:t.show_box.box_type,title:t.show_box.title,checked:0!=t.show_box.auth_switch}})),h.e.set({key:e.getForbidBlockCacheKey(),value:e.forbidBlockCache}))},a.forEach((function(t){if(t&&11==t.type&&t.show_box){var i=e.forbidBlockCache.find((function(e){var i;return(null==e?void 0:e.type)==(null===(i=t.show_box)||void 0===i?void 0:i.box_type)}));t.show_box.checked=!i||i.checked,t.show_box.auth_switch=t.show_box.checked?1:0,t.show_box.onChecked=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.$store.state.teach.teachData.data,n=i.findIndex((function(e){return e.type==t.box_type}));i[n]=on(on({},i[n]),{},{forbid:!t.checked});var o=a.findIndex((function(e){var i;return 11==(null==e?void 0:e.type)&&(null==e||null===(i=e.show_box)||void 0===i?void 0:i.box_type)==t.box_type}));o>=0&&(a[o]=on(on({},a[o]),{},{show_box:on(on({},a[o].show_box),{},{checked:t.checked,auth_switch:t.checked?1:0})})),s.first_setting.second_setting_list=a,i[r]=s,l(a),e.$store.dispatch("teach/updateData",{data:{data:i}}),h.e.set({key:e.getHomeTopEntryCacheKey(),value:e.$store.state.teach.teachData})}}})),s.first_setting.second_setting_list=a,o[r]=s,l(a),i.abrupt("return",o);case 21:case"end":return i.stop()}}),i)})))()},getDisplayPos:function(t){var e=(this.teachObjList||[]).filter((function(t){var e,i=t.games||t.wefunc_list||t.items||[],n=null===(e=t.box_handler)||void 0===e?void 0:e.type;return!(t.forbid||n==tt.a.boxHandlerType.BOX_HANDLER_TYPE_ERROR&&!i.length)})).findIndex((function(e){return e.type==t.type}));return e>=0?e+1:0},initHotwordActionsMap:function(){var t=this;return c()(p.a.mark((function e(){var i,n,o,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=100,e.next=4,h.e.get({key:tt.a.teachPermanentKeyEnum.HOTWORD_ACTION_MAP_PERMANENT_KEY});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:n=e.t0,o=Object.values(n).filter((function(t){t.word;var e=t.exposeTime;t.clickTime;return Date.now()/1e3-e<4320})).sort((function(t,e){return e.exposeTime-t.exposeTime})),r=o.slice(0,i).reduce((function(t,e){return t[e.word]=on({},e),t}),{}),console.warn("init hotwordActionsMap",r),t.$store.commit("teach/initHotwordActionsMap",r),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),e.t1;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()}},created:function(){var t=this;return c()(p.a.mark((function e(){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t,t.expose=null,i.$store.getters.getExtReqParams,H.b.onWebviewResume((function(){t.__goOtherPage=!1,t.isHideKeyboard&&t.hideKeyBoard(!0)})),H.b.onInputChange((function(t){i.onInputChange(t),P.a.$emit(P.b.TEACH_HIDE_HALF_SCREEN)})),P.a.$on(P.b.RESET_QUERY_STRING,(function(){this.isGlobalTabBizScene=h.b.isGlobalTabBizScene})),P.a.$on(P.b.HIS_MODIFIED,(function(){i.$store.commit("teach/historyModified")})),P.a.$on(P.b.TEACH_EXPOSE,(function(){t.expose.analysis()})),P.a.$on(P.b.TEACH_DATA_REFRESH,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.getTeachSearchData(e)})),P.a.$on(P.b.TEACH_PLACEHOLDER_SEARCH,(function(e){h.f.teach.reportCommonNewClick({searchId:h.b.searchId,requestId:t.requestId,itemInfo:"0|11|".concat(encodeURIComponent("底纹词")),docInfo:"0|0|".concat(encodeURIComponent(e.query),"|").concat(encodeURIComponent(e.query),"|1|")}),h.f.teach.commonTeachReport({itemInfo:"0|".concat(tt.a.teachType.FINDER_PLACEHOLDER,"|").concat(encodeURIComponent("底纹词")),docInfo:"0|0|".concat(encodeURIComponent(e.query),"|").concat(encodeURIComponent(e.query),"|1|"),pageType:tt.a.pageType.TEACH,actionId:f.g.VERTICAL,isCache:!1}),Object(T.b)(h.m.subscriptions.placeholderClick,{rate:1})})),P.a.$on(P.b.CLICK_FINDER_HOTLIST,(function(){window.didSetRecommendSearchQuery&&ne.a.configNavBar({recommendSearchQuery:""})})),i.handleFromUrlData(),H.b.onCommonCgiReady((function(t){t.cgiName===H.a.delWxIndex&&t.json&&0===t.json.retcode&&t.json.gid&&i.$store.commit("teach/deleteWxIndex",{gid:t.json.gid})})),h.b.scene!=f.e.BIZ_UNION_TOP){e.next=17;break}return i.$store.commit("teach/initHotwordActionsMap"),e.next=17,i.initHotwordActionsMap();case 17:i.tryGetData(),Object(T.i)(h.m.overview.general.visitTeach,{rate:.05});case 19:case"end":return e.stop()}}),e)})))()}},an=(i(1539),Object(w.a)(sn,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isFromHalfScreen()?i("div",{staticClass:"teach__half-tip"},[t._v(t._s(t.halfScreenTips))]):i("div",{staticClass:"teach__box",class:{"teach_service-search":t.isServiceSearch,"fix-page":t.hasPageSetting||t.hasBoxManagement},attrs:{id:"js_teach_page"}},[i("drop-show-logo"),t._l(t.teachObjList,(function(e,n){return i("div",{key:n,class:[t.isSceneRecommend?"teach__recommend":"teach__wrap","teach-"+t.ComponentMap[e.type],e.showType>=0?"teach-style-with-"+e.showType:""]},[i("exposureBlock",{ref:"newExposureBlock",refInFor:!0,attrs:{attr:"data-new-teach-report-id"},on:{expose:t.onNewTeachExpose}},[i("exposureBlock",{ref:"exposureBlock",refInFor:!0,attrs:{attr:"data-teach-report-id"},on:{expose:t.onTeachExpose}},[!e.forbid&&t.M_getComponetFailReport(t.ComponentMap[e.type],e.type,"teach.vue")?i(t.ComponentMap[e.type],{tag:"components",attrs:{"type-pos":n+1,"display-pos":t.getDisplayPos(e),"block-list":t.teachObjList,block:e},on:{update:t.getTeachSearchData,scroll:t.componentScroll}}):t._e()],1)],1)],1)})),i("similar-list"),i("teach-half-screen")],2)])}),[],!1,null,null,null));e.default=an.exports},2331:function(t,e,i){"use strict";i(603)},2345:function(t,e,i){"use strict";i(604)},2382:function(t,e,i){"use strict";i(605)},2425:function(t,e,i){"use strict";i(568)},2438:function(t,e,i){"use strict";i(570)},244:function(t,e,i){},2479:function(t,e,i){"use strict";i(607)},2515:function(t,e,i){"use strict";i(658)},2517:function(t,e,i){"use strict";i(663)},2577:function(t,e,i){"use strict";i(662)},263:function(t,e,i){(function(e){var i=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,l=a||c||Function("return this")(),u=Object.prototype.toString,d=Math.max,p=Math.min,h=function(){return l.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(f(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var a=o.test(t);return a||r.test(t)?s(t.slice(2),a?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,i){var n,o,r,s,a,c,l=0,u=!1,_=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var i=n,r=o;return n=o=void 0,l=e,s=t.apply(r,i)}function v(t){return l=t,a=setTimeout(w,e),u?y(t):s}function g(t){var i=t-c;return void 0===c||i>=e||i<0||_&&t-l>=r}function w(){var t=h();if(g(t))return I(t);a=setTimeout(w,function(t){var i=e-(t-c);return _?p(i,r-(t-l)):i}(t))}function I(t){return a=void 0,b&&n?y(t):(n=o=void 0,s)}function O(){var t=h(),i=g(t);if(n=arguments,o=this,c=t,i){if(void 0===a)return v(c);if(_)return a=setTimeout(w,e),y(c)}return void 0===a&&(a=setTimeout(w,e)),s}return e=m(e)||0,f(i)&&(u=!!i.leading,r=(_="maxWait"in i)?d(m(i.maxWait)||0,e):r,b="trailing"in i?!!i.trailing:b),O.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=c=o=a=void 0},O.flush=function(){return void 0===a?s:I(h())},O}}).call(this,i(53))},3033:function(t,e,i){"use strict";var n=i(22),o=i.n(n);e.a={methods:{M_getComponetFailReport:function(t,e,i){return void 0===t&&(console.warn("测试 M_getComponetFailReport"),o.a.info("".concat(i," [get componentFail], ").concat(e))),t}}}},3065:function(t,e,i){"use strict";i(579)},3087:function(t,e,i){"use strict";i(591)},3141:function(t,e,i){"use strict";i(659)},3289:function(t,e,i){"use strict";i(244)},3291:function(t,e,i){"use strict";i(665)},3292:function(t,e,i){"use strict";i(664)},3298:function(t,e,i){"use strict";i(574)},3389:function(t,e,i){"use strict";i(575)},3423:function(t,e,i){"use strict";i(361)},3487:function(t,e,i){"use strict";i(543)},3553:function(t,e,i){"use strict";i(577)},361:function(t,e,i){},362:function(t,e,i){},3623:function(t,e,i){"use strict";i(666)},475:function(t,e,i){},494:function(t,e,i){},501:function(t,e,i){},503:function(t,e,i){},508:function(t,e,i){},509:function(t,e,i){},523:function(t,e,i){},543:function(t,e,i){},551:function(t,e,i){},553:function(t,e,i){},554:function(t,e,i){},555:function(t,e,i){},556:function(t,e,i){},557:function(t,e,i){},558:function(t,e,i){},559:function(t,e,i){},568:function(t,e,i){},569:function(t,e,i){},570:function(t,e,i){},571:function(t,e,i){},573:function(t,e,i){},574:function(t,e,i){},575:function(t,e,i){},577:function(t,e,i){},579:function(t,e,i){},582:function(t,e,i){},591:function(t,e,i){},602:function(t,e,i){},603:function(t,e,i){},604:function(t,e,i){},605:function(t,e,i){},606:function(t,e,i){},607:function(t,e,i){},608:function(t,e,i){},609:function(t,e,i){},610:function(t,e,i){},611:function(t,e,i){},621:function(t,e,i){},626:function(t,e,i){},627:function(t,e,i){},637:function(t,e,i){},646:function(t,e,i){},647:function(t,e,i){},649:function(t,e,i){},650:function(t,e,i){},651:function(t,e,i){},652:function(t,e,i){"use strict";var n=i(24),o=i.n(n),r=i(0),s=i(46),a=i.n(s);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.canNoLimit,i=void 0===e?[1,1,1]:e,n=t.startYear,s=void 0===n?2012:n,c=(t.pickerRef,o()(i,3)),l=c[0],u=c[1],d=c[2],p=function(t){var e=t.year,i=t.month,n=void 0===i?12:i,o=[{label:r.g.L("不限"),value:-1,children:[{label:r.g.L("不限"),value:-1}]}];u||(o=[]);for(var s=n;s>0;s--)o.push({label:r.g.L("".concat(s,"月")),value:s-1,children:h({year:e,month:s})});return o},h=function(t){var e=t.year,i=t.month,n=new Date(e,i,0).getDate();e===(new Date).getFullYear()&&i===(new Date).getMonth()+1&&(n=(new Date).getDate());var o=[{label:r.g.L("不限"),value:-1}];d||(o=[]);for(var s=n;s>0;s--)o.push({label:r.g.L("".concat(s,"日")),value:s});return o},f=function(){var t=[{label:r.g.L("不限"),value:-1,children:[{label:r.g.L("不限"),value:-1,children:[{label:r.g.L("不限"),value:-1}]}]}];l||(t=[]);var e=(new Date).getFullYear();t.push({label:e+r.g.L("年","","picker"),value:e,children:p({year:e,month:(new Date).getMonth()+1})});for(var i=e-1;i>=s;i--)t.push({label:i+r.g.L("年","","picker"),value:i,children:p({year:i})});return t}(),m=a.a.picker(f,Object.assign({title:"请选择发布时间",closeText:"取消",container:"body"},!1,t));return m}},653:function(t,e,i){},654:function(t,e,i){},656:function(t,e,i){},657:function(t,e,i){},658:function(t,e,i){},659:function(t,e,i){},662:function(t,e,i){},663:function(t,e,i){},664:function(t,e,i){},665:function(t,e,i){},666:function(t,e,i){},671:function(t,e,i){},672:function(t,e,i){},718:function(t,e,i){"use strict";var n={props:{title:{type:String,default:""},tags:{type:Array,default:function(){return[]}},desc:{type:String,default:""},hasArrow:{type:Boolean,default:!1},hasDelete:{type:Boolean,default:!0},deleteIconProps:{type:Object,default:function(){return{}}}}},o=(i(3423),i(4)),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"active",rawName:"v-active.instant",modifiers:{instant:!0}}],staticClass:"weui-cell history-item active__item",on:{click:function(e){return e.stopPropagation(),t.$emit("tap",e)}}},[i("div",{staticClass:"weui-cell__hd",attrs:{"aria-hidden":"true"}},[i("svg-icon",{staticClass:"history__icon",attrs:{name:"clock"}})],1),i("div",{staticClass:"weui-cell__bd",attrs:{role:"button"}},[i("div",{staticClass:"history__title"},[i("span",{staticClass:"ellipsis_1",attrs:{"aria-label":t.title}},[t._v(t._s(t.title))]),t.tags.length?i("ui-tags",{staticClass:"history__tags",attrs:{tags:t.tags,flex:""}}):t._e()],1),t.desc?i("div",{staticClass:"history__desc"},[t._v(t._s(t.desc))]):t._e()]),t.hasArrow||t.hasDelete?i("div",{staticClass:"weui-cell__ft"},[t.hasArrow?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"active__opacity",attrs:{role:"button","aria-label":"添加到搜索栏"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("tap:arrow",e)}}},[i("svg-icon",{staticClass:"history__icon",attrs:{name:"arrow.up.left"}})],1):t._e(),t.hasDelete?i("div",t._b({directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"active__opacity",attrs:{role:"button","aria-label":"删除"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("tap:delete",e)}}},"div",t.deleteIconProps,!1),[i("svg-icon",{staticClass:"history__icon",attrs:{name:"cross"}})],1):t._e()]):t._e()])}),[],!1,null,"dd9e46e6",null);e.a=r.exports},719:function(t,e,i){"use strict";var n=i(0),o={name:"HistoryClearItem",props:{wrapper:{type:String,default:"div"},title:{type:String,default:n.g.L("清除历史")},hideClearIcon:{type:Boolean,default:!1}}},r=(i(744),i(4)),s=Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.wrapper,{directives:[{name:"active",rawName:"v-active.instant",modifiers:{instant:!0}}],tag:"component",staticClass:"weui-cell history-action active__item",attrs:{role:"button","aria-label":t.title}},[t.hideClearIcon?t._e():i("svg-icon",{staticClass:"history-action__icon",attrs:{name:"trashcan","aria-hidden":"true"}}),t._v("\n  "+t._s(t.title)+"\n  "),t._t("default")],2)}),[],!1,null,"cc615e62",null);e.a=s.exports},744:function(t,e,i){"use strict";i(362)},809:function(t,e,i){"use strict";var n=i(1),o=i.n(n),r=i(33),s=i.n(r),a=i(23),c=i.n(a),l=i(263),u=i.n(l),d=i(34),p=i.n(d),h=i(35),f=i.n(h);function m(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var b=function(){function t(e){p()(this,t);var i=Object.assign({container:".swiper",item:".item",activeClass:"active",threshold:50,duration:300,padding:0,decayFactor:1,useCapture:!1},e);this.$el=i.el||document,this.$container=this.$el.querySelector(i.container),this.itemSelector=i.item,this._start={},this._move={},this._end={},this._ignore=!1,this._offset=0,this._eventHandlers={},this._options=i,this._current=0,this._padding=this._options.padding,this.$container.style.marginLeft="".concat(this._padding,"px"),this._bind()}return f()(t,[{key:"on",value:function(t,e){if(this._eventHandlers[t])throw new Error("event ".concat(t," is already register"));if("function"!=typeof e)throw new Error("parameter callback must be a function");return this._eventHandlers[t]=e,this}},{key:"_getContainerWidth",value:function(){return this._getItemElements().reduce((function(t,e){return t+e.rect.width}),0)}},{key:"_getItemElements",value:function(){return[].map.call(this.$container.querySelectorAll(this.itemSelector),(function(t){return{el:t,rect:t.getBoundingClientRect()}}))}},{key:"_getItemElementsCount",value:function(){return this.$container.querySelectorAll(this.itemSelector).length}},{key:"_getItemElement",value:function(t){var e=this.$container.querySelector("".concat(this.itemSelector,":nth-child(").concat(t+1,")"));return e?{el:e,rect:e.getBoundingClientRect()}:null}},{key:"_bind",value:function(){var t=this._options.useCapture;this._startEventListener=this._startEventListener.bind(this),this._moveEventListener=this._moveEventListener.bind(this),this._endEventListener=this._endEventListener.bind(this),this.$el.addEventListener("touchstart",this._startEventListener,t),this.$el.addEventListener("touchmove",this._moveEventListener,t),this.$el.addEventListener("touchend",this._endEventListener,t)}},{key:"_startEventListener",value:function(t){this._start.x=t.changedTouches[0].pageX,this._start.y=t.changedTouches[0].pageY,this._ignore=!1,this.$container.style["-webkit-transition"]="none",this.$container.style.transition="none"}},{key:"_moveEventListener",value:function(t){if(this._move.x=t.changedTouches[0].pageX,this._move.y=t.changedTouches[0].pageY,this._ignore||Math.abs(this._start.x-this._move.x)/1<Math.abs(this._start.y-this._move.y))this._ignore=!0;else{var e=(this._move.x-this._start.x)*this._options.decayFactor,i=+(e-this._offset);i=e>=0?Math.min(e-this._offset,.6*this._getItemElement(0).rect.width):Math.max(e-this._offset,.6*-this._getItemElement(this._getItemElementsCount()-1).rect.width+Math.min(0,this.$el.offsetWidth-this._getContainerWidth()-2*this._padding));var n="translate3d(".concat(i,"px, 0, 0)");this.$container.style["-webkit-transform"]=n,this.$container.style.transform=n,this._eventHandlers.scroll&&this._eventHandlers.scroll.apply(this,t),t.preventDefault()}}},{key:"_endEventListener",value:function(t){if(this._ignore?(this._end.x=this._start.x,this._end.y=this._start.y):(this._end.x=t.changedTouches[0].pageX,this._end.y=t.changedTouches[0].pageY),this._getContainerWidth()<=this.$el.offsetWidth)return this._current=0,this._show(this._current),void(Math.abs(this._start.x-this._end.x)+Math.abs(this._start.y-this._end.y)>1&&t.preventDefault());var e=(this._end.x-this._start.x)*this._options.decayFactor;this._prev=this._current;var i=this._offset-e;this._current=this._getCurrentByOffset(i,{round:!0}),this._prev===this._current&&(e>this._options.threshold&&this._current>0?this._current-=1:e<-this._options.threshold&&this._current<this._getItemElementsCount()-1&&(this._current+=1)),this._show(this._current)}},{key:"_getCurrentByOffset",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.items||this._getItemElements(),o=i.round||!1,r=0,s=t,a=m(n);try{for(a.s();!(e=a.n()).done;){var c=e.value,l=c.rect.width;if(o){if((s-=l)<-l/2)break;if(r+=1,s<l/2)break}else if(r+=1,(s-=l)<0)break}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"_show",value:function(t){var e=this,i=this._getItemElements();this._offset=i.slice(0,t).reduce((function(t,e){return t+e.rect.width}),0);var n=Math.max(this._getContainerWidth()-this.$el.offsetWidth+2*this._padding,0);this._offset>n&&(this._offset=n,this._current=this._getCurrentByOffset(n,{items:i}));var o="translate3d(-".concat(this._offset,"px, 0, 0)"),r="".concat(this._options.duration,"ms");this.$container.style["-webkit-transition"]=r,this.$container.style.transition=r,this.$container.style["-webkit-transform"]=o,this.$container.style.transform=o,clearTimeout(this._timeout),this._timeout=setTimeout((function(){(e._current!=e._prev||null!==e._timeout||e._goto>-1)&&(e._eventHandlers.swiped&&e._eventHandlers.swiped.apply(e,[e._prev,e._current]),e._goto=-1,e._timeout=null)}),this._options.duration)}},{key:"go",value:function(t){if(!(t<0||t>this._getItemElementsCount()-1||t===this._current))return 0===t?(this._current=0,this._prev=0):(this._current=t,this._prev=t-1),this._goto=t,this._show(this._current),this}},{key:"refresh",value:function(){this._current=this._getCurrentByOffset(this._offset,{round:!0}),this._show(this._current)}}]),t}();function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var v={name:"UiScroll",props:{items:{type:Array,default:function(){return[]}},snap:{type:Boolean,default:!1},start:{type:Number,default:0},scrollToCenter:{type:Boolean,default:!1},wait:{type:Number,default:300},padding:{type:Number,default:16},decayFactor:{type:Number,default:1},useCapture:{type:Boolean,default:!1}},watch:{start:function(t){this._isMounted&&this.scrollTo(t)},items:function(){this.snap&&this.scrollTo(0)}},created:function(){this.onScrollEnd=u()(this.onScrollEnd.bind(this),this.wait)},mounted:function(){var t=this;return s()(c.a.mark((function e(){var i,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t,t.$refs.scroll&&t.snap&&(n=t.$el.querySelector(".ui-scroll__wrapper"))&&(n.style.marginLeft="".concat(t.padding-4,"px")),t.$refs.scroll){e.next=4;break}return e.abrupt("return");case 4:if(!t.snap){e.next=13;break}return e.next=7,t.$nextTick();case 7:t.$refs.scroll.querySelector(".ui-scroll__item"),(o=new b({el:t.$refs.scroll,container:".ui-scroll__wrapper",item:".ui-scroll__item",padding:t.padding-4,decayFactor:t.decayFactor,useCapture:t.useCapture})).on("scroll",(function(e){return t.$emit("scroll",e)})),o.on("swiped",(function(t,e){i.onScrollEnd()})),t.swiper=o,t.scrollTo(t.start);case 13:t.scrollToCenter&&t.scrollTo(t.start);case 14:case"end":return e.stop()}}),e)})))()},methods:{refresh:function(){this.swiper&&this.swiper.refresh()},onScroll:function(t){this.$emit("scroll",t),this.onScrollEnd()},calcVisibility:function(){var t=this;if(!this.$refs.scroll||!this.$refs.items)return[];var e=this.$refs.scroll;return this.parentRect=e.getBoundingClientRect(),this.$refs.items.map((function(e){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){o()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({el:e},t.getVisibility(e))}))},onScrollEnd:function(){this.$emit("scrollEnd",this.calcVisibility())},getVisibility:function(t){if(!t)return{visible:!1,include:!1};var e=t.getBoundingClientRect(),i=this.parentRect,n=function(t,e){return parseFloat(t)<=parseFloat(e)+1},o=Boolean(n(i.left,e.left)&&n(e.right,i.right)&&n(i.top,e.top)&&n(e.bottom,i.bottom));return{visible:Boolean((n(i.left,e.right)&&n(e.right,i.right)||n(i.left,e.left)&&n(e.left,i.right))&&(n(i.top,e.bottom)&&n(e.bottom,i.bottom)||n(i.top,e.bottom)&&n(e.bottom,i.bottom))),include:o}},scrollTo:function(t){if(t=Math.max(Math.min(t,this.items.length-1),0),this.snap)this.swiper.go(t);else{var e=this.$refs.items[t].getBoundingClientRect(),i=e.left,n=e.width,o=this.$refs.scroll.getBoundingClientRect(),r=o.left,s=o.width,a=this.$refs.scroll.scrollLeft,c=i-r;this.$refs.scroll.scrollTo({left:this.scrollToCenter?c+a-(s-n)/2:c+a,top:0,behavior:"smooth"})}}}},g=(i(3289),i(4)),w=Object(g.a)(v,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.snap?i("div",{ref:"scroll",staticClass:"ui-scroll ui-scroll-snap"},[i("div",{staticClass:"ui-scroll__wrapper"},t._l(t.items,(function(e,n){return i("div",{key:e.id||e.docId||e.docID||n+ +new Date,ref:"items",refInFor:!0,staticClass:"ui-scroll__item",attrs:{"data-scroll-item-index":n}},[t._t("default",null,{item:e,index:n})],2)})),0)]):i("div",{ref:"scroll",staticClass:"ui-scroll ui-scroll-smooth",on:{scroll:function(e){return e.stopPropagation(),e.preventDefault(),t.onScroll.apply(null,arguments)}}},[i("div",{staticClass:"ui-scroll__wrapper"},t._l(t.items,(function(e,n){return i("div",{key:e.id||e.docId||e.docID||n+ +new Date,ref:"items",refInFor:!0,staticClass:"ui-scroll__item",attrs:{"data-scroll-item-index":n}},[t._t("default",null,{item:e,index:n})],2)})),0)])}),[],!1,null,"f8361092",null).exports;w.install=function(t){t.component(w.name,w)};e.a=w}}]);