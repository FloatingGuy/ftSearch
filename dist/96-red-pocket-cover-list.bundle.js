(window.webpackJsonp=window.webpackJsonp||[]).push([[295],{1196:function(t,e,r){"use strict";var i={name:"RedPocketCover",props:{imageUrl:{type:String},widgetImageUrl:{type:String},showOpen:{type:Boolean,default:!1}}},n=(r(951),r(4)),s=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"red-pocket-cover"},[e("div",{directives:[{name:"image",rawName:"v-image",value:this.imageUrl,expression:"imageUrl"}],staticClass:"red-pocket-cover__rec-image"}),this.widgetImageUrl?e("div",{directives:[{name:"image",rawName:"v-image:plain",value:this.widgetImageUrl,expression:"widgetImageUrl",arg:"plain"}],staticClass:"red-pocket-cover__rec-widget-image"}):this._e(),this.showOpen?e("div",{directives:[{name:"image",rawName:"v-image:plain",value:"https://bs.qpic.cn/mmux/wprMnqDUJH441RYW7CgMHUQ1W0tH1iaB8ibzY0oQZ95MxCuWxgzxXMFCia5XEVmBHPugroMleseHxQ/",expression:"'https://bs.qpic.cn/mmux/wprMnqDUJH441RYW7CgMHUQ1W0tH1iaB8ibzY0oQZ95MxCuWxgzxXMFCia5XEVmBHPugroMleseHxQ/'",arg:"plain"}],staticClass:"red-pocket-cover__open"}):this._e()])}),[],!1,null,"349f9202",null);e.a=s.exports},1201:function(t,e,r){},1270:function(t,e,r){"use strict";var i=r(32),n=r.n(i),s=r(0),o=function(t){return 0===t?"00":t<10?"0".concat(t):t},a={name:"RedPocketCoverTags",props:{tags:{type:Array},startTime:{type:Number},template:{type:String,default:"%s"},block:{type:Boolean,default:!1},single:{type:Boolean,default:!1}},data:function(){return{previewTags:[{type:3,title:"",noBg:!0}]}},computed:{renderTags:function(){var t,e,r=[];return null!==(t=this.previewTags[0])&&void 0!==t&&t.title&&r.push(this.previewTags[0]),null!==(e=this.tags)&&void 0!==e&&e.length&&r.push.apply(r,n()(this.tags)),this.single?r.slice(0,1):r}},created:function(){window.reportVueCreated("src/components/global/red-pocket-cover/red-pocket-cover-tags.vue"),this.check()},mounted:function(){var t=this;this._timer=setInterval((function(){t.check()}),1e3)},beforeDestroy:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},methods:{check:function(){var t=1e3*this.startTime,e=s.g.getSvrTimeMs();if(!t||e>=t)this.previewTags[0].title="";else{var r=new Date(t),i=new Date(e),n=new Date(i).setHours(0,0,0,0)+864e5===new Date(r).setHours(0,0,0,0),a=new Date(i).setHours(0,0,0,0)===new Date(r).setHours(0,0,0,0),c="",l=r.getMonth()+1,u=r.getDate(),h=o(r.getHours()),f=o(r.getMinutes());c=n?"明天".concat(h,":").concat(f):a?"今天".concat(h,":").concat(f):"".concat(l,"月").concat(u,"日").concat(h,":").concat(f),this.previewTags[0].title=this.template.replace("%s",c)}}}},c=(r(961),r(4)),l=Object(c.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.block?r("div",{staticClass:"red-pocket-cover-tags red-pocket-cover-tags--block"},t._l(t.renderTags,(function(e,i){return r("ui-tag",t._b({key:i},"ui-tag",e,!1))})),1):r("ui-tags",{staticClass:"red-pocket-cover-tags",attrs:{tags:t.renderTags,flex:""}})}),[],!1,null,"5633270b",null);e.a=l.exports},244:function(t,e,r){},263:function(t,e,r){(function(e){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,a="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,l=a||c||Function("return this")(),u=Object.prototype.toString,h=Math.max,f=Math.min,p=function(){return l.Date.now()};function d(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(d(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=d(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var a=n.test(t);return a||s.test(t)?o(t.slice(2),a?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,r){var i,n,s,o,a,c,l=0,u=!1,v=!1,_=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var r=i,s=n;return i=n=void 0,l=e,o=t.apply(s,r)}function y(t){return l=t,a=setTimeout(w,e),u?g(t):o}function b(t){var r=t-c;return void 0===c||r>=e||r<0||v&&t-l>=s}function w(){var t=p();if(b(t))return k(t);a=setTimeout(w,function(t){var r=e-(t-c);return v?f(r,s-(t-l)):r}(t))}function k(t){return a=void 0,_&&i?g(t):(i=n=void 0,o)}function C(){var t=p(),r=b(t);if(i=arguments,n=this,c=t,r){if(void 0===a)return y(c);if(v)return a=setTimeout(w,e),g(c)}return void 0===a&&(a=setTimeout(w,e)),o}return e=m(e)||0,d(r)&&(u=!!r.leading,s=(v="maxWait"in r)?h(m(r.maxWait)||0,e):s,_="trailing"in r?!!r.trailing:_),C.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=c=n=a=void 0},C.flush=function(){return void 0===a?o:k(p())},C}}).call(this,r(53))},2673:function(t,e,r){"use strict";r(1201)},3289:function(t,e,r){"use strict";r(244)},344:function(t,e,r){"use strict";r.r(e);var i=r(1),n=r.n(i),s=r(0),o=r(1196),a=r(1270),c=r(809),l=r(2),u=r(5);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){n()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p={created:function(){window.reportVueCreated("src/components/general/red-pocket-cover-list/red-pocket-cover-list.vue")},name:"RedPocketCoverList",components:{RedPocketCoverTags:a.a,RedPocketCover:o.a,UiScroll:c.a},mixins:[s.l,s.n],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},source:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},computed:{list:function(){var t,e=this.source.list||[];return null!==(t=this.source.moreObj)&&void 0!==t&&t.title?e.concat([{moreObj:this.source.moreObj}]):e},listClass:function(){var t;return{"red-pocket-cover-list--horizontal":this.list.length<=2,"red-pocket-cover-list--single":1===this.list.length,"red-pocket-cover-list--double":2===this.list.length,"red-pocket-cover-list--tripple":3===this.list.length&&3===this.maxCount,"red-pocket-cover-list--scrollable":this.list.length>=3&&this.maxCount>4,"red-pocket-cover-list--has-more":!(null===(t=this.source.moreObj)||void 0===t||!t.title)}},maxCount:function(){var t=this,e=0;return this.data.items.forEach((function(r){var i=t.M_getItemInfo(r)||{};i.type===u.b.redPocketCoverList&&(e=Math.max(e,(i.list||[]).length))})),e}},methods:{onTapItem:function(t){var e=t.startTime>s.g.getSvrTimeSecs()&&t.previewPop?f(f({},t),{},{pop:t.previewPop,jumpInfo:null}):t;this.M_serviceSearchGo(e),this.M_clickReport({clickContent:e.title||""},e)},onTapMore:function(){var t,e;this.M_serviceSearchGo(this.source.header),this.M_clickReport({clickContent:(null===(t=this.source.moreObj)||void 0===t?void 0:t.title)||"",reportId:null===(e=this.source.moreObj)||void 0===e?void 0:e.reportId},this.source.header)},onScroll:function(){var t=this;this.scrollTimer&&(clearTimeout(this.scrollTimer),this.scrollTimer=0),this.scrollTimer=setTimeout((function(){var e;s.a.$emit(s.k.resultExposeAnalysis),t.M_clickReport({ban12721Report:!0,banAdReport:!0,actionType:l.g.HOR_TOUCHMOVE,clickContent:(null===(e=t.source.header)||void 0===e?void 0:e.title)||""})}),300)}}},d=(r(2673),r(4)),m=Object(d.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ui-scroll",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"red-pocket-cover-list",class:t.listClass,attrs:{items:t.list},on:{scroll:t.onScroll},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,n=e.index;return[i.moreObj?r("div",{staticClass:"red-pocket-cover-list__more"},[r("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"red-pocket-cover-list__more-inner active__mask",attrs:{"data-report-id":t.M_itemReportId(i.moreObj,n+1)},on:{click:function(e){return e.stopPropagation(),t.onTapMore.apply(null,arguments)}}},[r("div",{staticClass:"arrow-circle"},[r("ui-arrow")],1),r("div",{staticClass:"title"},[t._v(t._s(i.moreObj.title))])])]):r("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"red-pocket-cover-list__item active__mask",attrs:{"data-report-id":t.M_itemReportId(i,n+1)},on:{click:function(e){return e.stopPropagation(),t.onTapItem(i)}}},[r("div",{staticClass:"image"},[r("red-pocket-cover",{attrs:{"image-url":i.imageUrl,"widget-image-url":i.widgetImageUrl,"show-open":""}})],1),r("div",{staticClass:"content"},[r("div",{staticClass:"content__title"},[t._v(t._s(i.title))]),r("red-pocket-cover-tags",{attrs:{tags:i.recommendTag,"start-time":i.startTime,template:"%s抢",block:!0,single:t.list.length>2}})],1)])]}}])})}),[],!1,null,"04e416b2",null);e.default=m.exports},375:function(t,e,r){},378:function(t,e,r){},809:function(t,e,r){"use strict";var i=r(1),n=r.n(i),s=r(33),o=r.n(s),a=r(23),c=r.n(a),l=r(263),u=r.n(l),h=r(34),f=r.n(h),p=r(35),d=r.n(p);function m(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var _=function(){function t(e){f()(this,t);var r=Object.assign({container:".swiper",item:".item",activeClass:"active",threshold:50,duration:300,padding:0,decayFactor:1,useCapture:!1},e);this.$el=r.el||document,this.$container=this.$el.querySelector(r.container),this.itemSelector=r.item,this._start={},this._move={},this._end={},this._ignore=!1,this._offset=0,this._eventHandlers={},this._options=r,this._current=0,this._padding=this._options.padding,this.$container.style.marginLeft="".concat(this._padding,"px"),this._bind()}return d()(t,[{key:"on",value:function(t,e){if(this._eventHandlers[t])throw new Error("event ".concat(t," is already register"));if("function"!=typeof e)throw new Error("parameter callback must be a function");return this._eventHandlers[t]=e,this}},{key:"_getContainerWidth",value:function(){return this._getItemElements().reduce((function(t,e){return t+e.rect.width}),0)}},{key:"_getItemElements",value:function(){return[].map.call(this.$container.querySelectorAll(this.itemSelector),(function(t){return{el:t,rect:t.getBoundingClientRect()}}))}},{key:"_getItemElementsCount",value:function(){return this.$container.querySelectorAll(this.itemSelector).length}},{key:"_getItemElement",value:function(t){var e=this.$container.querySelector("".concat(this.itemSelector,":nth-child(").concat(t+1,")"));return e?{el:e,rect:e.getBoundingClientRect()}:null}},{key:"_bind",value:function(){var t=this._options.useCapture;this._startEventListener=this._startEventListener.bind(this),this._moveEventListener=this._moveEventListener.bind(this),this._endEventListener=this._endEventListener.bind(this),this.$el.addEventListener("touchstart",this._startEventListener,t),this.$el.addEventListener("touchmove",this._moveEventListener,t),this.$el.addEventListener("touchend",this._endEventListener,t)}},{key:"_startEventListener",value:function(t){this._start.x=t.changedTouches[0].pageX,this._start.y=t.changedTouches[0].pageY,this._ignore=!1,this.$container.style["-webkit-transition"]="none",this.$container.style.transition="none"}},{key:"_moveEventListener",value:function(t){if(this._move.x=t.changedTouches[0].pageX,this._move.y=t.changedTouches[0].pageY,this._ignore||Math.abs(this._start.x-this._move.x)/1<Math.abs(this._start.y-this._move.y))this._ignore=!0;else{var e=(this._move.x-this._start.x)*this._options.decayFactor,r=+(e-this._offset);r=e>=0?Math.min(e-this._offset,.6*this._getItemElement(0).rect.width):Math.max(e-this._offset,.6*-this._getItemElement(this._getItemElementsCount()-1).rect.width+Math.min(0,this.$el.offsetWidth-this._getContainerWidth()-2*this._padding));var i="translate3d(".concat(r,"px, 0, 0)");this.$container.style["-webkit-transform"]=i,this.$container.style.transform=i,this._eventHandlers.scroll&&this._eventHandlers.scroll.apply(this,t),t.preventDefault()}}},{key:"_endEventListener",value:function(t){if(this._ignore?(this._end.x=this._start.x,this._end.y=this._start.y):(this._end.x=t.changedTouches[0].pageX,this._end.y=t.changedTouches[0].pageY),this._getContainerWidth()<=this.$el.offsetWidth)return this._current=0,this._show(this._current),void(Math.abs(this._start.x-this._end.x)+Math.abs(this._start.y-this._end.y)>1&&t.preventDefault());var e=(this._end.x-this._start.x)*this._options.decayFactor;this._prev=this._current;var r=this._offset-e;this._current=this._getCurrentByOffset(r,{round:!0}),this._prev===this._current&&(e>this._options.threshold&&this._current>0?this._current-=1:e<-this._options.threshold&&this._current<this._getItemElementsCount()-1&&(this._current+=1)),this._show(this._current)}},{key:"_getCurrentByOffset",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.items||this._getItemElements(),n=r.round||!1,s=0,o=t,a=m(i);try{for(a.s();!(e=a.n()).done;){var c=e.value,l=c.rect.width;if(n){if((o-=l)<-l/2)break;if(s+=1,o<l/2)break}else if(s+=1,(o-=l)<0)break}}catch(u){a.e(u)}finally{a.f()}return s}},{key:"_show",value:function(t){var e=this,r=this._getItemElements();this._offset=r.slice(0,t).reduce((function(t,e){return t+e.rect.width}),0);var i=Math.max(this._getContainerWidth()-this.$el.offsetWidth+2*this._padding,0);this._offset>i&&(this._offset=i,this._current=this._getCurrentByOffset(i,{items:r}));var n="translate3d(-".concat(this._offset,"px, 0, 0)"),s="".concat(this._options.duration,"ms");this.$container.style["-webkit-transition"]=s,this.$container.style.transition=s,this.$container.style["-webkit-transform"]=n,this.$container.style.transform=n,clearTimeout(this._timeout),this._timeout=setTimeout((function(){(e._current!=e._prev||null!==e._timeout||e._goto>-1)&&(e._eventHandlers.swiped&&e._eventHandlers.swiped.apply(e,[e._prev,e._current]),e._goto=-1,e._timeout=null)}),this._options.duration)}},{key:"go",value:function(t){if(!(t<0||t>this._getItemElementsCount()-1||t===this._current))return 0===t?(this._current=0,this._prev=0):(this._current=t,this._prev=t-1),this._goto=t,this._show(this._current),this}},{key:"refresh",value:function(){this._current=this._getCurrentByOffset(this._offset,{round:!0}),this._show(this._current)}}]),t}();function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}var y={name:"UiScroll",props:{items:{type:Array,default:function(){return[]}},snap:{type:Boolean,default:!1},start:{type:Number,default:0},scrollToCenter:{type:Boolean,default:!1},wait:{type:Number,default:300},padding:{type:Number,default:16},decayFactor:{type:Number,default:1},useCapture:{type:Boolean,default:!1}},watch:{start:function(t){this._isMounted&&this.scrollTo(t)},items:function(){this.snap&&this.scrollTo(0)}},created:function(){this.onScrollEnd=u()(this.onScrollEnd.bind(this),this.wait)},mounted:function(){var t=this;return o()(c.a.mark((function e(){var r,i,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,t.$refs.scroll&&t.snap&&(i=t.$el.querySelector(".ui-scroll__wrapper"))&&(i.style.marginLeft="".concat(t.padding-4,"px")),t.$refs.scroll){e.next=4;break}return e.abrupt("return");case 4:if(!t.snap){e.next=13;break}return e.next=7,t.$nextTick();case 7:t.$refs.scroll.querySelector(".ui-scroll__item"),(n=new _({el:t.$refs.scroll,container:".ui-scroll__wrapper",item:".ui-scroll__item",padding:t.padding-4,decayFactor:t.decayFactor,useCapture:t.useCapture})).on("scroll",(function(e){return t.$emit("scroll",e)})),n.on("swiped",(function(t,e){r.onScrollEnd()})),t.swiper=n,t.scrollTo(t.start);case 13:t.scrollToCenter&&t.scrollTo(t.start);case 14:case"end":return e.stop()}}),e)})))()},methods:{refresh:function(){this.swiper&&this.swiper.refresh()},onScroll:function(t){this.$emit("scroll",t),this.onScrollEnd()},calcVisibility:function(){var t=this;if(!this.$refs.scroll||!this.$refs.items)return[];var e=this.$refs.scroll;return this.parentRect=e.getBoundingClientRect(),this.$refs.items.map((function(e){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){n()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({el:e},t.getVisibility(e))}))},onScrollEnd:function(){this.$emit("scrollEnd",this.calcVisibility())},getVisibility:function(t){if(!t)return{visible:!1,include:!1};var e=t.getBoundingClientRect(),r=this.parentRect,i=function(t,e){return parseFloat(t)<=parseFloat(e)+1},n=Boolean(i(r.left,e.left)&&i(e.right,r.right)&&i(r.top,e.top)&&i(e.bottom,r.bottom));return{visible:Boolean((i(r.left,e.right)&&i(e.right,r.right)||i(r.left,e.left)&&i(e.left,r.right))&&(i(r.top,e.bottom)&&i(e.bottom,r.bottom)||i(r.top,e.bottom)&&i(e.bottom,r.bottom))),include:n}},scrollTo:function(t){if(t=Math.max(Math.min(t,this.items.length-1),0),this.snap)this.swiper.go(t);else{var e=this.$refs.items[t].getBoundingClientRect(),r=e.left,i=e.width,n=this.$refs.scroll.getBoundingClientRect(),s=n.left,o=n.width,a=this.$refs.scroll.scrollLeft,c=r-s;this.$refs.scroll.scrollTo({left:this.scrollToCenter?c+a-(o-i)/2:c+a,top:0,behavior:"smooth"})}}}},b=(r(3289),r(4)),w=Object(b.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.snap?r("div",{ref:"scroll",staticClass:"ui-scroll ui-scroll-snap"},[r("div",{staticClass:"ui-scroll__wrapper"},t._l(t.items,(function(e,i){return r("div",{key:e.id||e.docId||e.docID||i+ +new Date,ref:"items",refInFor:!0,staticClass:"ui-scroll__item",attrs:{"data-scroll-item-index":i}},[t._t("default",null,{item:e,index:i})],2)})),0)]):r("div",{ref:"scroll",staticClass:"ui-scroll ui-scroll-smooth",on:{scroll:function(e){return e.stopPropagation(),e.preventDefault(),t.onScroll.apply(null,arguments)}}},[r("div",{staticClass:"ui-scroll__wrapper"},t._l(t.items,(function(e,i){return r("div",{key:e.id||e.docId||e.docID||i+ +new Date,ref:"items",refInFor:!0,staticClass:"ui-scroll__item",attrs:{"data-scroll-item-index":i}},[t._t("default",null,{item:e,index:i})],2)})),0)])}),[],!1,null,"f8361092",null).exports;w.install=function(t){t.component(w.name,w)};e.a=w},951:function(t,e,r){"use strict";r(375)},961:function(t,e,r){"use strict";r(378)}}]);