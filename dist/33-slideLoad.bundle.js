(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{2241:function(e,t,s){"use strict";s.r(t);var n=s(1),o=s.n(n),a=s(25),r=s(0);function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var c=1,u=2,p=+new Date,d=!1,f={props:{tapLoadMore:{type:Function,default:function(){}}},data:function(){return{showByStepLoading:!1}},computed:l(l({},Object(a.c)({selfBase:function(e){return e.result.self.base},cacheData:function(e){return e.result.cacheData}})),{},{showByStepFold:function(){var e=!1;return this.$store.dispatch({type:"result/self/walkDocItem",visit:function(t){var s=t.item;e||(e=1===s.foldHide)}}),e},retryText:function(){return this.selfBase.retryText||"网络断开，轻触再试"}}),watch:{showByStepFold:{handler:function(e){e&&(this.showByStepLoading=!1)},immediate:!0}},created:function(){r.a.$on(r.k.resultReady,this._onResultReady),r.a.$on(r.k.handleResult,this._onHandleResult),r.a.$on(r.k.resultPageEnd,this.expose),window.addEventListener("scroll",this._scrollThrottle)},mounted:function(){var e=this;setTimeout((function(){r.g.isElemExpose(e.$el)&&e.expose()}),100)},beforeDestroy:function(){r.a.$off(r.k.resultReady,this._onResultReady),r.a.$off(r.k.handleResult,this._onHandleResult),r.a.$off(r.k.resultPageEnd,this.expose),window.removeEventListener("scroll",this._scrollThrottle)},methods:{_onResultReady:function(){var e=this;e._onlyExecInByStep((function(){e.showByStepLoading&&(r.g.isObjectEmpty(e.cacheData)||e.$store.dispatch("result/handleResult")),setTimeout((function(){r.g.isElemExpose(e.$el)&&e.expose()}),100)}))},_onHandleResult:function(){var e=this;d=!1,e._onlyExecInByStep((function(){e.showByStepLoading=!1,r.f.result.turnPageDur(+new Date-p)}))},_checkIfVerticalSearch:function(){return r.b.isVerticalSearch},_checkIfHideSplitLineForced:function(){return 33554440===r.b.type},_onlyExecInByStep:function(e){if(this.selfBase.byStepText)return e()},_scrollThrottle:r.g.throttle((function(){r.g.isElemExpose(this.$el)&&this.expose()})),expose:function(){this._onlyExecInByStep((function(){d||(d=!0,r.f.result.turnPageClickExpose(c))}))},tapStep:function(e){var t=this;if(t.showByStepLoading=!0,p=+new Date,r.f.result.turnPageClickExpose(u),t.$store.commit({type:"result/updateState",scrollY:window.pageYOffset}),!e)return t.$store.dispatch({type:"result/self/walkDocItem",visit:function(e){e.item.foldHide=0}}),t.$store.commit({type:"result/self/updateBase",byStepText:""}),void r.a.$emit(r.k.resultClickExpand);r.g.isObjectEmpty(t.cacheData)?e&&t.tapLoadMore():t.$store.dispatch("result/handleResult")}}},h=(s(3706),s(4)),y=Object(h.a)(f,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loadmore",class:{loadmore_vertical:e._checkIfVerticalSearch(),"loadmore--hide-split-line-forced":e._checkIfHideSplitLineForced()}},[e.showByStepFold||e.selfBase.continueFlag||0!=e.selfBase.ret?[e.selfBase.byStepText?[e.showByStepLoading?s("div",{staticClass:"loadmore__loading loadmore__loading_plain",attrs:{role:"option"}},[s("span",{staticClass:"circle-loading"}),s("span",[e._v("\n          "+e._s(e.selfBase.loadingText)+"\n        ")])]):[e.showByStepFold?s("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"loadmore__step",attrs:{role:"button"},on:{click:function(t){return e.tapStep(0)}}},[s("span",[e._v(e._s(e.selfBase.byStepText))]),s("ui-arrow",{attrs:{size:"big",direction:"down"}})],1):s("div",{staticClass:"loadmore__retry",on:{click:function(t){return e.tapStep(1)}}},[s("svg-icon",{staticClass:"loadmore__retry-icon",attrs:{name:"refresh"}}),s("span",[e._v(e._s(e.retryText))])],1)]]:[s("div",{staticClass:"loadmore__loading loadmore__loading_plain"},[s("span",{staticClass:"circle-loading"}),s("span",[e._v("\n          "+e._s(e.selfBase.loadingText)+"\n        ")])])]]:e.selfBase.pageTail?s("div",{staticClass:"loadmore__nomore"},[s("span",{staticClass:"page-end"},[e._v(e._s(e.selfBase.pageTail))])]):e._e()],2)}),[],!1,null,"38265a90",null);t.default=y.exports},3706:function(e,t,s){"use strict";s(958)},958:function(e,t,s){}}]);