(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{2230:function(t,e,n){"use strict";n.r(e);var a,r=n(1),i=n.n(r),o=n(16),s=n(0),c=n(467),p=n(25),u=n(2),d=n(29);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={components:{negative:c.a},mixins:[s.n,s.l],props:{d:{type:Object,default:function(){}},typePos:{type:Number,default:0},col:{type:Number,default:2}},data:function(){return{}},computed:f(f({},Object(p.c)({isLoading:function(t){return t.result.self.base.isLoading}})),{},{allowTwoLine:function(){return s.b.fontRatio>1}}),mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.bd.$el;if(e){for(var n=e.querySelectorAll("[calc-key]"),a=[],r=0;r<n.length;r+=1){var i=n[r],o=i.offsetWidth,c=i.scrollWidth;a.push([i.getAttribute("calc-key"),o,c,+(c>o)].join("|"));var p=t.d.items[r];if(p){var u={};try{p.report_extinfo_str&&(u=JSON.parse(decodeURIComponent(p.report_extinfo_str))),u.if_fullexpose=c>o?0:1,p.report_extinfo_str=encodeURIComponent(JSON.stringify(u))}catch(l){}}}a.length>0&&s.f.reportCommonKv(d.a.compExposeDetail,[s.b.searchId,s.b.sessionId,s.b.parentSearchID,"",s.b.scene,100*s.b.fontRatio,Math.floor(window.innerWidth),s.b.version,s.b.platform,t.d.type,t.d.real_type,a.join(";")])}}))},methods:{M_genDocReportId:null===s.n||void 0===s.n||null===(a=s.n.methods)||void 0===a?void 0:a.M_genDocReportId,tap:function(t,e){var n=this;if(!n.isLoading){n.M_clickReport({businessType:n.d.real_type||n.d.type,pageNo:n.d.vuePage,title:t.word,boxId:n.d.boxID,docId:t.docID,pos:e+1,resultType:n.d.resultType,resultSubType:n.d.subType,report_extinfo_str:t.report_extinfo_str,docReportId:"".concat(t.docID,":").concat(e+1)},t);var a=n.M_composeParentSid({t:t.parentType||u.p.NEW_CORRELATE,s:s.b.searchId,did:t.docID,rid:n.$store.state.result.previousRid});n.M_checkSpecialSearchBeforeLaunchNewSearch({query:t.word,callback:function(){s.i.setInputBar({query:t.word,isInputChange:!1}),s.b.setValue({searchId:""}),n.M_setQuery({page:u.f.RESULT,query:t.word,tagInfo:{},searchId:"",extReqParams:{key:"parentSearchID",textValue:a}})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:a}]}},{newSearchType:u.t.RELATIVE,docId:t.docID}),Object(o.e)(s.m.detail.result.relatedWord)}}}},h=(n(748),n(4)),b=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related",class:{"related--link-title-allow-two-line":t.allowTwoLine}},[n("div",{staticClass:"related__title"},[n("div",[t._v(t._s(t.d.title))]),t.d.feedback?n("div",{staticClass:"related__title-tail"},[n("negative",{attrs:{item:t.d,data:t.d,"type-pos":t.typePos,"need-words":!0,pos:1}})],1):t._e()]),n("ui-column",{ref:"bd",staticClass:"related__box",attrs:{list:t.d.items,col:t.col,fill:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item,r=e.index;return[n("ui-link",{staticClass:"expose_log_elem",attrs:{title:a.word,"data-word":a.word,"data-id":a.docID,"data-back-report-id":t.M_genDocReportId({data:t.d,typePos:t.typePos,item:a,pos:r+1}),"data-report-id":t.M_genItemReportId({d:t.d,typePos:t.typePos,item:a,pos:r+1,reportId:a.reportId,itemPos:r+1})},nativeOn:{click:function(e){return t.tap(a,r)}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"link-title"},[n("span",{staticClass:"link-title__text",class:{"link-title__text--before-tag":!!a.tag},attrs:{"calc-key":a.word}},[t._v(t._s(a.word))]),a.tag?n("ui-tags",{staticClass:"link-title__tags",attrs:{tags:[a.tag]}}):t._e()],1)]},proxy:!0}],null,!0)})]}}])})],1)}),[],!1,null,null,null);e.default=b.exports},238:function(t,e,n){},239:function(t,e,n){},241:function(t,e,n){},242:function(t,e,n){},3135:function(t,e,n){"use strict";n(239)},366:function(t,e,n){},467:function(t,e,n){"use strict";var a=n(1),r=n.n(a),i=n(39),o=n(3),s={mixins:[i.a],props:{data:{type:Object,default:function(){return{}}}},data:function(){return{reasons:[]}},computed:{renderReasons:{set:function(t){this.reasons=t},get:function(){return this.reasons.length?this.reasons:this.data.reasons}},showButton:function(){return this.renderReasons.some((function(t){return t.checked}))}},created:function(){window.reportVueCreated("src/components/global/source/negative/withReason.vue");var t=this;o.a.$on(o.b.negativeHide,(function(){t.renderReasons=[]}))},methods:{tapJump:function(){this.$emit("tapJump")},tapConfirm:function(){this.$emit("tapConfirm",this.renderReasons)},tapReason:function(t,e){this.renderReasons=this.renderReasons.map((function(t,n){return e==n?Object.assign({},t,{checked:t.checked?0:1}):t}))}}},c=(n(474),n(4)),p=Object(c.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"header line"},[n("div",{staticClass:"title line__item"},[n("p",{staticClass:"title__word"},[t._v("\n        "+t._s(t.data.title)+"\n      ")])]),n("div",{staticClass:"button line__item primary no-wrap"},[t.showButton?n("div",{staticClass:"weui-btn weui-btn_mini weui-btn_primary",on:{click:t.tapConfirm}},[t._v("\n        "+t._s(t.data.confirm.title)+"\n      ")]):t._e()])]),n("div",{staticClass:"reasons"},t._l(t.renderReasons,(function(e,a){return n("div",{key:e.wording,staticClass:"reason",class:{reason__checked:e.checked},on:{click:function(n){return t.tapReason(e,a)}}},[t._v("\n      "+t._s(e.wording)+"\n    ")])})),0),n("div",{staticClass:"jump",on:{click:t.tapJump}},[n("div",{staticClass:"jump-in"},[t._v("\n      "+t._s(t.data.complaint.title)+"\n    ")])])])}),[],!1,null,"d28ecc42",null).exports,u={created:function(){window.reportVueCreated("src/components/global/source/negative/plain.vue")},props:{data:{type:Object,default:function(){return{}}}},methods:{tap:function(){this.$emit("tapJump")}}},d=(n(3135),Object(c.a)(u,(function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"n-plain active__item",on:{click:this.tap}},[this._v("\n  "+this._s(this.data.complaint.title)+"\n")])}),[],!1,null,"926be1a0",null).exports),l=new(n(10).a)({withReason:1,plain:2}),f={components:{withReason:p,plain:d},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{types:l}},methods:{tapJump:function(){var t=this.data.complaint;this.$emit("tapJump",t)},tapConfirm:function(t){this.$emit("tapConfirm",{confirm:this.data.confirm,feedback:{reasons:t,title:this.data.title}})}}},m=(n(476),Object(c.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.types[this.data.type],{tag:"component",attrs:{data:this.data},on:{tapJump:this.tapJump,tapConfirm:this.tapConfirm}})],1)}),[],!1,null,null,null).exports),h=n(8),b=n(17),_=n(0);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={components:{pop:m},mixins:[i.a],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0},needWords:{type:Boolean,default:!1}},computed:{feedback:function(){return this.item.feedback},popData:function(){if(!this.feedback)return!1;var t=(this.$store.state.result.self.resultObj.feedback||{})[this.feedback.id];return!!t&&Object.assign({},t,this.feedback)}},created:function(){o.a.$on(o.b.viewChange,this._hide)},destroyed:function(){o.a.$off(o.b.viewChange,this._hide)},methods:{_hide:function(){this.$refs&&this.$refs.popOver&&this.$refs.popOver.hide()},_makeUrlPamrams:function(){var t=this;return y(y({},t.base),{},{clientType:t.data.real_type||t.data.type,subType:t.data.subType||0,docID:t.item.docID||"",boxID:t.data.boxID||"",boxPos:t.typePos||0,docPos:t.pos||0,docUrl:t.item.jumpUrl||t.item.doc_url||t.item.weappUrl||""})},onHide:function(){o.a.$emit(o.b.negativeHide)},tap:function(){this._hide()},tapJump:function(t){if(this.needWords&&this.data.items.length&&t.jumpUrl&&!t.jumpUrl.includes("relatedWords")){var e=this.data.items.map((function(t){return t.word||""})).join("|");t.jumpUrl=this.M_composeUrl(t.jumpUrl,{relatedWords:e,query:_.b.query})}this.M_go({jumpUrl:this.M_composeUrl(t.jumpUrl,this._makeUrlPamrams())}),this._hide()},tapConfirm:function(t){var e=Object.assign(this._makeUrlPamrams(),{clientTimeStamp:"".concat(+new Date),feedback:t.feedback});h.a.commonCgi({cgiName:t.confirm.cgiName||b.a.negativeFeedBack,data:e}),this.$refs.popOver.hide(),o.a.$emit(o.b.showToast,{text:"已反馈"})}}},w=(n(477),Object(c.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.popData?n("PopOver",{ref:"popOver",staticClass:"negative__wrap expand-hotspot",attrs:{"class-name":"negative__outter"},on:{hide:t.onHide},nativeOn:{click:function(t){t.stopPropagation()},touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("svg-icon",{staticClass:"source__negative",attrs:{name:"negative_button","aria-hidden":"true"}})]},proxy:!0},{key:"content",fn:function(){return[n("pop",{attrs:{data:t.popData},on:{tapJump:t.tapJump,tapConfirm:t.tapConfirm}})]},proxy:!0}],null,!1,582450734)}):t._e()}),[],!1,null,null,null));e.a=w.exports},474:function(t,e,n){"use strict";n(238)},476:function(t,e,n){"use strict";n(241)},477:function(t,e,n){"use strict";n(242)},748:function(t,e,n){"use strict";n(366)}}]);